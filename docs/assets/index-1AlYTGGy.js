const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BootScene-zYbuxhNV.js","assets/three-D7vjLnNd.js","assets/vendor-CqO7gtIP.js","assets/animation-CETMx-Jf.js","assets/HubScene-DvZ4uoFZ.js","assets/ProfileScene-BAr3za6X.js","assets/Lab01Scene-B5RdXI-O.js","assets/Lab02Scene-BdufBsi3.js","assets/Lab03Scene-DrwZeCyN.js","assets/Lab04Scene-DoSEGbdw.js","assets/ContactScene-DfdOlWKP.js","assets/stegaEncodeSourceMap-BocHGHM1.js","assets/browser-8gYOhkFu.js"])))=>i.map(i=>d[i]);
import{r as g,R as V,V as L,U as me,S as k,D as si,a as ii,b as ai,c as oi,W,L as nt,M as li,C as Ae,N as Me,F as ci,B as Pe,E as Qt,d as fn,e as pn,f as E,g as vr,O as ui,h as di,i as Qe,k as He,l as Z,m as hi,n as le,o as mn,T as vn,p as Zt,P as fi,q as pi,A as mi,s as vi,t as gr,u as xr,v as ft,w as gi,H as xi,x as pt,y as yi,z as bi,j as c,G as wi,I as Ti,_ as J,J as gn,K as Ei,Q as Si,X as ue,Y as Ci,Z as Ai,$ as Mi,a0 as Ii,a1 as Ri,a2 as _i}from"./three-D7vjLnNd.js";import{g as Jt}from"./vendor-CqO7gtIP.js";import{g as zt,A as mt,m as _}from"./animation-CETMx-Jf.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Ct,yr;function Ni(){if(yr)return Ct;yr=1;var e=typeof Element<"u",t=typeof Map=="function",r=typeof Set=="function",n=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(i,a){if(i===a)return!0;if(i&&a&&typeof i=="object"&&typeof a=="object"){if(i.constructor!==a.constructor)return!1;var o,l,u;if(Array.isArray(i)){if(o=i.length,o!=a.length)return!1;for(l=o;l--!==0;)if(!s(i[l],a[l]))return!1;return!0}var d;if(t&&i instanceof Map&&a instanceof Map){if(i.size!==a.size)return!1;for(d=i.entries();!(l=d.next()).done;)if(!a.has(l.value[0]))return!1;for(d=i.entries();!(l=d.next()).done;)if(!s(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&i instanceof Set&&a instanceof Set){if(i.size!==a.size)return!1;for(d=i.entries();!(l=d.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(a)){if(o=i.length,o!=a.length)return!1;for(l=o;l--!==0;)if(i[l]!==a[l])return!1;return!0}if(i.constructor===RegExp)return i.source===a.source&&i.flags===a.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof a.valueOf=="function")return i.valueOf()===a.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof a.toString=="function")return i.toString()===a.toString();if(u=Object.keys(i),o=u.length,o!==Object.keys(a).length)return!1;for(l=o;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,u[l]))return!1;if(e&&i instanceof Element)return!1;for(l=o;l--!==0;)if(!((u[l]==="_owner"||u[l]==="__v"||u[l]==="__o")&&i.$$typeof)&&!s(i[u[l]],a[u[l]]))return!1;return!0}return i!==i&&a!==a}return Ct=function(a,o){try{return s(a,o)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}},Ct}var Oi=Ni();const ji=Jt(Oi);var At,br;function Pi(){if(br)return At;br=1;var e=function(t,r,n,s,i,a,o,l){if(!t){var u;if(r===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,s,i,a,o,l],h=0;u=new Error(r.replace(/%s/g,function(){return d[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return At=e,At}var Li=Pi();const wr=Jt(Li);var Mt,Tr;function ki(){return Tr||(Tr=1,Mt=function(t,r,n,s){var i=n?n.call(s,t,r):void 0;if(i!==void 0)return!!i;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(r),u=0;u<a.length;u++){var d=a[u];if(!l(d))return!1;var h=t[d],m=r[d];if(i=n?n.call(s,h,m,d):void 0,i===!1||i===void 0&&h!==m)return!1}return!0}),Mt}var Di=ki();const Ui=Jt(Di);var xn=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(xn||{}),It={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Er=Object.values(xn),er={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Bi=Object.entries(er).reduce((e,[t,r])=>(e[r]=t,e),{}),Y="data-rh",we={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Te=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},Fi=e=>{let t=Te(e,"title");const r=Te(e,we.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const n=Te(e,we.DEFAULT_TITLE);return t||n||void 0},zi=e=>Te(e,we.ON_CHANGE_CLIENT_STATE)||(()=>{}),Rt=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,n)=>({...r,...n}),{}),Hi=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const s=Object.keys(n);for(let i=0;i<s.length;i+=1){const o=s[i].toLowerCase();if(e.indexOf(o)!==-1&&n[o])return r.concat(n)}}return r},[]),$i=e=>console&&typeof console.warn=="function"&&console.warn(e),De=(e,t,r)=>{const n={};return r.filter(s=>Array.isArray(s[e])?!0:(typeof s[e]<"u"&&$i(`Helmet: ${e} should be of type "Array". Instead found type "${typeof s[e]}"`),!1)).map(s=>s[e]).reverse().reduce((s,i)=>{const a={};i.filter(l=>{let u;const d=Object.keys(l);for(let m=0;m<d.length;m+=1){const p=d[m],v=p.toLowerCase();t.indexOf(v)!==-1&&!(u==="rel"&&l[u].toLowerCase()==="canonical")&&!(v==="rel"&&l[v].toLowerCase()==="stylesheet")&&(u=v),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(u=p)}if(!u||!l[u])return!1;const h=l[u].toLowerCase();return n[u]||(n[u]={}),a[u]||(a[u]={}),n[u][h]?!1:(a[u][h]=!0,!0)}).reverse().forEach(l=>s.push(l));const o=Object.keys(a);for(let l=0;l<o.length;l+=1){const u=o[l],d={...n[u],...a[u]};n[u]=d}return s},[]).reverse()},Gi=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},Vi=e=>({baseTag:Hi(["href"],e),bodyAttributes:Rt("bodyAttributes",e),defer:Te(e,we.DEFER),encode:Te(e,we.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Rt("htmlAttributes",e),linkTags:De("link",["rel","href"],e),metaTags:De("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:De("noscript",["innerHTML"],e),onChangeClientState:zi(e),scriptTags:De("script",["src","innerHTML"],e),styleTags:De("style",["cssText"],e),title:Fi(e),titleAttributes:Rt("titleAttributes",e),prioritizeSeoTags:Gi(e,we.PRIORITIZE_SEO_TAGS)}),yn=e=>Array.isArray(e)?e.join(""):e,Wi=(e,t)=>{const r=Object.keys(e);for(let n=0;n<r.length;n+=1)if(t[r[n]]&&t[r[n]].includes(e[r[n]]))return!0;return!1},_t=(e,t)=>Array.isArray(e)?e.reduce((r,n)=>(Wi(n,t)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:e,priority:[]},Sr=(e,t)=>({...e,[t]:void 0}),qi=["noscript","script","style"],Ht=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),bn=e=>Object.keys(e).reduce((t,r)=>{const n=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${n}`:n},""),Xi=(e,t,r,n)=>{const s=bn(r),i=yn(t);return s?`<${e} ${Y}="true" ${s}>${Ht(i,n)}</${e}>`:`<${e} ${Y}="true">${Ht(i,n)}</${e}>`},Yi=(e,t,r=!0)=>t.reduce((n,s)=>{const i=s,a=Object.keys(i).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,d)=>{const h=typeof i[d]>"u"?d:`${d}="${Ht(i[d],r)}"`;return u?`${u} ${h}`:h},""),o=i.innerHTML||i.cssText||"",l=qi.indexOf(e)===-1;return`${n}<${e} ${Y}="true" ${a}${l?"/>":`>${o}</${e}>`}`},""),wn=(e,t={})=>Object.keys(e).reduce((r,n)=>{const s=er[n];return r[s||n]=e[n],r},t),Ki=(e,t,r)=>{const n={key:t,[Y]:!0},s=wn(r,n);return[V.createElement("title",s,t)]},tt=(e,t)=>t.map((r,n)=>{const s={key:n,[Y]:!0};return Object.keys(r).forEach(i=>{const o=er[i]||i;if(o==="innerHTML"||o==="cssText"){const l=r.innerHTML||r.cssText;s.dangerouslySetInnerHTML={__html:l}}else s[o]=r[i]}),V.createElement(e,s)}),G=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>Ki(e,t.title,t.titleAttributes),toString:()=>Xi(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>wn(t),toString:()=>bn(t)};default:return{toComponent:()=>tt(e,t),toString:()=>Yi(e,t,r)}}},Qi=({metaTags:e,linkTags:t,scriptTags:r,encode:n})=>{const s=_t(e,It.meta),i=_t(t,It.link),a=_t(r,It.script);return{priorityMethods:{toComponent:()=>[...tt("meta",s.priority),...tt("link",i.priority),...tt("script",a.priority)],toString:()=>`${G("meta",s.priority,n)} ${G("link",i.priority,n)} ${G("script",a.priority,n)}`},metaTags:s.default,linkTags:i.default,scriptTags:a.default}},Zi=e=>{const{baseTag:t,bodyAttributes:r,encode:n=!0,htmlAttributes:s,noscriptTags:i,styleTags:a,title:o="",titleAttributes:l,prioritizeSeoTags:u}=e;let{linkTags:d,metaTags:h,scriptTags:m}=e,p={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:p,linkTags:d,metaTags:h,scriptTags:m}=Qi(e)),{priority:p,base:G("base",t,n),bodyAttributes:G("bodyAttributes",r,n),htmlAttributes:G("htmlAttributes",s,n),link:G("link",d,n),meta:G("meta",h,n),noscript:G("noscript",i,n),script:G("script",m,n),style:G("style",a,n),title:G("title",{title:o,titleAttributes:l},n)}},$t=Zi,Ze=[],Tn=!!(typeof window<"u"&&window.document&&window.document.createElement),Gt=class{instances=[];canUseDOM=Tn;context;value={setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Ze:this.instances,add:e=>{(this.canUseDOM?Ze:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Ze:this.instances).indexOf(e);(this.canUseDOM?Ze:this.instances).splice(t,1)}}};constructor(e,t){this.context=e,this.canUseDOM=t||!1,t||(e.helmet=$t({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Ji={},En=V.createContext(Ji),Sn=class Cn extends g.Component{static canUseDOM=Tn;helmetData;constructor(t){super(t),this.helmetData=new Gt(this.props.context||{},Cn.canUseDOM)}render(){return V.createElement(En.Provider,{value:this.helmetData.value},this.props.children)}},ye=(e,t)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${e}[${Y}]`),s=[].slice.call(n),i=[];let a;return t&&t.length&&t.forEach(o=>{const l=document.createElement(e);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u))if(u==="innerHTML")l.innerHTML=o.innerHTML;else if(u==="cssText")l.styleSheet?l.styleSheet.cssText=o.cssText:l.appendChild(document.createTextNode(o.cssText));else{const d=u,h=typeof o[d]>"u"?"":o[d];l.setAttribute(u,h)}l.setAttribute(Y,"true"),s.some((u,d)=>(a=d,l.isEqualNode(u)))?s.splice(a,1):i.push(l)}),s.forEach(o=>o.parentNode?.removeChild(o)),i.forEach(o=>r.appendChild(o)),{oldTags:s,newTags:i}},Vt=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const n=r.getAttribute(Y),s=n?n.split(","):[],i=[...s],a=Object.keys(t);for(const o of a){const l=t[o]||"";r.getAttribute(o)!==l&&r.setAttribute(o,l),s.indexOf(o)===-1&&s.push(o);const u=i.indexOf(o);u!==-1&&i.splice(u,1)}for(let o=i.length-1;o>=0;o-=1)r.removeAttribute(i[o]);s.length===i.length?r.removeAttribute(Y):r.getAttribute(Y)!==a.join(",")&&r.setAttribute(Y,a.join(","))},ea=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=yn(e)),Vt("title",t)},Cr=(e,t)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:s,linkTags:i,metaTags:a,noscriptTags:o,onChangeClientState:l,scriptTags:u,styleTags:d,title:h,titleAttributes:m}=e;Vt("body",n),Vt("html",s),ea(h,m);const p={baseTag:ye("base",r),linkTags:ye("link",i),metaTags:ye("meta",a),noscriptTags:ye("noscript",o),scriptTags:ye("script",u),styleTags:ye("style",d)},v={},f={};Object.keys(p).forEach(y=>{const{newTags:w,oldTags:b}=p[y];w.length&&(v[y]=w),b.length&&(f[y]=p[y].oldTags)}),t&&t(),l(e,v,f)},Ue=null,ta=e=>{Ue&&cancelAnimationFrame(Ue),e.defer?Ue=requestAnimationFrame(()=>{Cr(e,()=>{Ue=null})}):(Cr(e),Ue=null)},ra=ta,Ar=class extends g.Component{rendered=!1;shouldComponentUpdate(e){return!Ui(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let r=null;const n=Vi(e.get().map(s=>{const i={...s.props};return delete i.context,i}));Sn.canUseDOM?ra(n):$t&&(r=$t(n)),t(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},na=class extends g.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(e){return!ji(Sr(this.props,"helmetData"),Sr(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,n){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,n)}]}}mapObjectTypeChildren(e,t,r,n){switch(e.type){case"title":return{...t,[e.type]:n,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(n=>{r={...r,[n]:e[n]}}),r}warnOnInvalidChildren(e,t){return wr(Er.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Er.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),wr(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return V.Children.forEach(e,n=>{if(!n||!n.props)return;const{children:s,...i}=n.props,a=Object.keys(i).reduce((l,u)=>(l[Bi[u]||u]=i[u],l),{});let{type:o}=n;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(n,s),o){case"Symbol(react.fragment)":t=this.mapChildrenToProps(s,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,a,s);break;default:t=this.mapObjectTypeChildren(n,t,a,s);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:n}=t;if(e&&(r=this.mapChildrenToProps(e,r)),n&&!(n instanceof Gt)){const s=n;n=new Gt(s.context,!0),delete r.helmetData}return n?V.createElement(Ar,{...r,context:n.value}):V.createElement(En.Consumer,null,s=>V.createElement(Ar,{...r,context:s}))}};var Nt=1/1e3,sa=1e3,ia=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*Nt}get fixedDelta(){return this._fixedDelta*Nt}set fixedDelta(e){this._fixedDelta=e*sa}get elapsed(){return this._elapsed*Nt}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(e!==void 0?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},aa=(()=>{const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),r=new vi;return r.setAttribute("position",new gr(e,3)),r.setAttribute("uv",new gr(t,2)),r})(),B=class Wt{static get fullscreenGeometry(){return aa}constructor(t="Pass",r=new vr,n=new ui){this.name=t,this.renderer=null,this.scene=r,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const r=this.fullscreenMaterial;r!==null&&(r.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let r=this.screen;r!==null?r.material=t:(r=new di(Wt.fullscreenGeometry,t),r.frustumCulled=!1,this.scene===null&&(this.scene=new vr),this.scene.add(r),this.screen=r)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,r=Pe){}render(t,r,n,s,i){throw new Error("Render method not implemented!")}setSize(t,r){}initialize(t,r,n){}dispose(){for(const t of Object.keys(this)){const r=this[t];(r instanceof W||r instanceof mn||r instanceof vn||r instanceof Wt)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},oa=class extends B{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,n,s){const i=e.state.buffers.stencil;i.setLocked(!1),i.setTest(!1)}},la=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,tr="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",An=class extends Z{constructor(){super({name:"CopyMaterial",defines:{DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new E(null),depthBuffer:new E(null),channelWeights:new E(null),opacity:new E(1)},blending:le,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:la,vertexShader:tr}),this.depthFunc=mi}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(e){const t=e!==null;this.colorWrite!==t&&(t?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=t,this.needsUpdate=!0),this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){const t=e!==null;this.depthWrite!==t&&(t?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=t,this.depthWrite=t,this.needsUpdate=!0),this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(e){e!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=e):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},Mn=class extends B{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new An,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new W(1,1,{minFilter:nt,magFilter:nt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,n,s){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==me?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e!==null&&e.outputColorSpace===k&&(this.renderTarget.texture.colorSpace=k))}},Mr=new Ae,In=class extends B{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,n,s){const i=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=i!==null,u=a>=0;l?(e.getClearColor(Mr),e.setClearColor(i,u?a:o)):u&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(Mr,o):u&&e.setClearAlpha(o)}},ca=class extends B{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new In(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,n,s){const i=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,u=this.clearPass,d=this.inverted?0:1,h=1-d;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),a.stencil.setFunc(i.ALWAYS,d,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(r),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(i.EQUAL,1,4294967295),a.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),a.stencil.setLocked(!0)}},ua=class{constructor(t=null,{depthBuffer:r=!0,stencilBuffer:n=!1,multisampling:s=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(r,n,i,s),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Mn,this.depthTexture=null,this.passes=[],this.timer=new ia,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const r=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(r.depthBuffer,r.stencilBuffer,r.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const r=t.getSize(new L),n=t.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;s===me&&t.outputColorSpace===k&&(this.inputBuffer.texture.colorSpace=k,this.outputBuffer.texture.colorSpace=k,this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(r.width,r.height);for(const i of this.passes)i.initialize(t,n,s)}}replaceRenderer(t,r=!0){const n=this.renderer,s=n.domElement.parentNode;return this.setRenderer(t),r&&s!==null&&(s.removeChild(n.domElement),s.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new si;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=ii,t.type=ai):t.type=oi,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,r,n,s){const i=this.renderer,a=i===null?new L:i.getDrawingBufferSize(new L),o={minFilter:nt,magFilter:nt,stencilBuffer:r,depthBuffer:t,type:n},l=new W(a.width,a.height,o);return s>0&&(l.samples=s),n===me&&i!==null&&i.outputColorSpace===k&&(l.texture.colorSpace=k),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(t){for(const r of this.passes)r.mainScene=t}setMainCamera(t){for(const r of this.passes)r.mainCamera=t}addPass(t,r){const n=this.passes,s=this.renderer,i=s.getDrawingBufferSize(new L),a=s.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(t.setRenderer(s),t.setSize(i.width,i.height),t.initialize(s,a,o),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),r!==void 0?n.splice(r,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(t of n)t.setDepthTexture(l)}else t.setDepthTexture(this.depthTexture)}removePass(t){const r=this.passes,n=r.indexOf(t);if(n!==-1&&r.splice(n,1).length>0){if(this.depthTexture!==null){const a=(l,u)=>l||u.needsDepthTexture;r.reduce(a,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===r.length&&(t.renderToScreen=!1,r.length>0&&(r[r.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const r=this.renderer,n=this.copyPass;let s=this.inputBuffer,i=this.outputBuffer,a=!1,o,l,u;t===void 0&&(this.timer.update(),t=this.timer.getDelta());for(const d of this.passes)d.enabled&&(d.render(r,s,i,t,a),d.needsSwap&&(a&&(n.renderToScreen=d.renderToScreen,o=r.getContext(),l=r.state.buffers.stencil,l.setFunc(o.NOTEQUAL,1,4294967295),n.render(r,s,i,t,a),l.setFunc(o.EQUAL,1,4294967295)),u=s,s=i,i=u),d instanceof ca?a=!0:d instanceof oa&&(a=!1))}setSize(t,r,n){const s=this.renderer,i=s.getSize(new L);(t===void 0||r===void 0)&&(t=i.width,r=i.height),(i.width!==t||i.height!==r)&&s.setSize(t,r,n);const a=s.getDrawingBufferSize(new L);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const o of this.passes)o.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),B.fullscreenGeometry.dispose()}},K={NONE:0,DEPTH:1,CONVOLUTION:2},M={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},da=class{constructor(){this.shaderParts=new Map([[M.FRAGMENT_HEAD,null],[M.FRAGMENT_MAIN_UV,null],[M.FRAGMENT_MAIN_IMAGE,null],[M.VERTEX_HEAD,null],[M.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=K.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=fn}},Ot=!1,Ir=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case He:r=this.materialsFlatShadedDoubleSide;break;case Qe:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case He:r=this.materialsDoubleSide;break;case Qe:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof Z))return e.clone();const t=e.uniforms,r=new Map;for(const s in t){const i=t[s].value;i.isRenderTargetTexture&&(t[s].value=null,r.set(s,i))}const n=e.clone();for(const s of r)t[s[0]].value=s[1],n.uniforms[s[0]].value=s[1];return n}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const r of t)r.uniforms=Object.assign({},e.uniforms),r.side=hi;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.side=Qe,n}),this.materialsDoubleSide=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.side=He,n}),this.materialsFlatShaded=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=Qe,n}),this.materialsFlatShadedDoubleSide=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=He,n})}}render(e,t,r){const n=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,Ot){const s=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(const i of s)i[0].material=i[1];this.meshCount!==s.size&&s.clear()}else{const s=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=s}e.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Ot}static set workaroundEnabled(e){Ot=e}},ie=-1,D=class extends Qt{constructor(e,t=ie,r=ie,n=1){super(),this.resizable=e,this.baseSize=new L(1,1),this.preferredSize=new L(t,r),this.target=this.preferredSize,this.s=n,this.effectiveSize=new L,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,r=this.effectiveSize,n=this.scale;t.width!==ie?r.width=t.width:t.height!==ie?r.width=Math.round(t.height*(e.width/Math.max(e.height,1))):r.width=Math.round(e.width*n),t.height!==ie?r.height=t.height:t.width!==ie?r.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r.height=Math.round(e.height*n)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(ie),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.baseSize.width!==e||this.baseSize.height!==t)&&(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferredSize.width!==e||this.preferredSize.height!==t)&&(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return ie}},C={ADD:0,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},ha="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),y.a*opacity);}",fa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),y.a*opacity);}",pa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",ma="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),y.a*opacity);}",va="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),y.a*opacity);}",ga="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),y.a*opacity);}",xa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),y.a*opacity);}",ya="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),y.a*opacity);}",ba="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),y.a*opacity);}",wa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),y.a*opacity);}",Ta="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),y.a*opacity);}",Ea="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),y.a*opacity);}",Sa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),y.a*opacity);}",Ca="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),y.a*opacity);}",Aa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),y.a*opacity);}",Ma="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",Ia="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),y.a*opacity);}",Ra="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",_a="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",Na="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),y.a*opacity);}",Oa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),y.a*opacity);}",ja="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}",Pa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",La="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),y.a*opacity);}",ka="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",Da="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",Ua="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),y.a*opacity);}",Ba="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),y.a*opacity);}",Fa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",za="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),y.a*opacity);}",Ha="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",$a=new Map([[C.ADD,ha],[C.AVERAGE,fa],[C.COLOR,pa],[C.COLOR_BURN,ma],[C.COLOR_DODGE,va],[C.DARKEN,ga],[C.DIFFERENCE,xa],[C.DIVIDE,ya],[C.DST,null],[C.EXCLUSION,ba],[C.HARD_LIGHT,wa],[C.HARD_MIX,Ta],[C.HUE,Ea],[C.INVERT,Sa],[C.INVERT_RGB,Ca],[C.LIGHTEN,Aa],[C.LINEAR_BURN,Ma],[C.LINEAR_DODGE,Ia],[C.LINEAR_LIGHT,Ra],[C.LUMINOSITY,_a],[C.MULTIPLY,Na],[C.NEGATION,Oa],[C.NORMAL,ja],[C.OVERLAY,Pa],[C.PIN_LIGHT,La],[C.REFLECT,ka],[C.SATURATION,Da],[C.SCREEN,Ua],[C.SOFT_LIGHT,Ba],[C.SRC,Fa],[C.SUBTRACT,za],[C.VIVID_LIGHT,Ha]]),Ga=class extends Qt{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new E(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return $a.get(this.blendFunction)}},ve=class extends Qt{constructor(e,t,{attributes:r=K.NONE,blendFunction:n=C.NORMAL,defines:s=new Map,uniforms:i=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=o,this.defines=s,this.uniforms=i,this.extensions=a,this.blendMode=new Ga(n),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=fn,this._outputColorSpace=pn}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Pe){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof W||t instanceof mn||t instanceof vn||t instanceof B)&&this[e].dispose()}}},rr={MEDIUM:2,LARGE:3},Va=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Wa="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",qa=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Xa=class extends Z{constructor(e=new xr){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new E(null),texelSize:new E(new xr),scale:new E(1),kernel:new E(0)},blending:le,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Va,vertexShader:Wa}),this.setTexelSize(e.x,e.y),this.kernelSize=rr.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return qa[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,e*.5,t*.5)}setSize(e,t){const r=1/e,n=1/t;this.uniforms.texelSize.value.set(r,n,r*.5,n*.5)}},Ya=class extends B{constructor({kernelSize:e=rr.MEDIUM,resolutionScale:t=.5,width:r=D.AUTO_SIZE,height:n=D.AUTO_SIZE,resolutionX:s=r,resolutionY:i=n}={}){super("KawaseBlurPass"),this.renderTargetA=new W(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new D(this,s,i,t);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new Xa,this._blurMaterial.kernelSize=e,this.copyMaterial=new An}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,n,s){const i=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,d=u.kernelSequence;let h=t;this.fullscreenMaterial=u;for(let m=0,p=d.length;m<p;++m){const v=(m&1)===0?o:l;u.kernel=d[m],u.inputBuffer=h.texture,e.setRenderTarget(v),e.render(i,a),h=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(i,a)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t);const n=r.width,s=r.height;this.renderTargetA.setSize(n,s),this.renderTargetB.setSize(n,s),this.blurMaterial.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==me?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e!==null&&e.outputColorSpace===k&&(this.renderTargetA.texture.colorSpace=k,this.renderTargetB.texture.colorSpace=k))}static get AUTO_SIZE(){return D.AUTO_SIZE}},Ka=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,Qa=class extends Z{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Zt.replace(/\D+/g,"")},uniforms:{inputBuffer:new E(null),threshold:new E(0),smoothing:new E(1),range:new E(null)},blending:le,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ka,vertexShader:tr}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},Rn=class extends B{constructor({renderTarget:e,luminanceRange:t,colorOutput:r,resolutionScale:n=1,width:s=D.AUTO_SIZE,height:i=D.AUTO_SIZE,resolutionX:a=s,resolutionY:o=i}={}){super("LuminancePass"),this.fullscreenMaterial=new Qa(r,t),this.needsSwap=!1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new W(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new D(this,a,o,n);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,n,s){const i=this.fullscreenMaterial;i.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==me&&(this.renderTarget.texture.type=r,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Za=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Ja="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",eo=class extends Z{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new E(null),texelSize:new E(new L)},blending:le,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Za,vertexShader:Ja})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},to=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,ro="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",no=class extends Z{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new E(null),supportBuffer:new E(null),texelSize:new E(new L),radius:new E(.85)},blending:le,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:to,vertexShader:ro})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},so=class extends B{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new W(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new eo,this.upsamplingMaterial=new no,this.resolution=new L}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let r=0;r<e;++r){const n=t.clone();n.texture.name="Downsampling.Mipmap"+r,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(t);for(let r=1,n=e-1;r<n;++r){const s=t.clone();s.texture.name="Upsampling.Mipmap"+r,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,r,n,s){const{scene:i,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:d}=this;let h=t;this.fullscreenMaterial=o;for(let m=0,p=u.length;m<p;++m){const v=u[m];o.setSize(h.width,h.height),o.inputBuffer=h.texture,e.setRenderTarget(v),e.render(i,a),h=v}this.fullscreenMaterial=l;for(let m=d.length-1;m>=0;--m){const p=d[m];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=u[m].texture,e.setRenderTarget(p),e.render(i,a),h=p}}setSize(e,t){const r=this.resolution;r.set(e,t);let n=r.width,s=r.height;for(let i=0,a=this.downsamplingMipmaps.length;i<a;++i)n=Math.round(n*.5),s=Math.round(s*.5),this.downsamplingMipmaps[i].setSize(n,s),i<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[i].setSize(n,s)}initialize(e,t,r){if(r!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of n)s.texture.type=r;if(r!==me)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(e!==null&&e.outputColorSpace===k)for(const s of n)s.texture.colorSpace=k}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},io=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}`,_h=class extends ve{constructor({blendFunction:e=C.SCREEN,luminanceThreshold:t=1,luminanceSmoothing:r=.03,mipmapBlur:n=!0,intensity:s=1,radius:i=.85,levels:a=8,kernelSize:o=rr.LARGE,resolutionScale:l=.5,width:u=D.AUTO_SIZE,height:d=D.AUTO_SIZE,resolutionX:h=u,resolutionY:m=d}={}){super("BloomEffect",io,{blendFunction:e,uniforms:new Map([["map",new E(null)],["intensity",new E(s)]])}),this.renderTarget=new W(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Ya({kernelSize:o}),this.luminancePass=new Rn({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=r,this.mipmapBlurPass=new so,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=i,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new D(this,h,m,l);p.addEventListener("change",v=>this.setSize(p.baseWidth,p.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){const n=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,s.renderTarget):this.blurPass.render(e,s.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,n)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.blurPass.resolution.copy(r),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,r){this.blurPass.initialize(e,t,r),this.luminancePass.initialize(e,t,r),this.mipmapBlurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e!==null&&e.outputColorSpace===k&&(this.renderTarget.texture.colorSpace=k))}},ao=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,oo="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",Nh=class extends ve{constructor({offset:e=new L(.001,5e-4),radialModulation:t=!1,modulationOffset:r=.15}={}){super("ChromaticAberrationEffect",ao,{vertexShader:oo,attributes:K.CONVOLUTION,uniforms:new Map([["offset",new E(e)],["modulationOffset",new E(r)]])}),this.radialModulation=t}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(e){e?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(e){this.uniforms.get("modulationOffset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},_n=class extends B{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new In,this.overrideMaterialManager=r===null?null:new Ir(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new Ir(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,n,s){const i=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,u=i.background,d=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(i.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,i,a):e.render(i,a),a.layers.mask=l,i.background=u,e.shadowMap.autoUpdate=d}},H={LINEAR:0,REINHARD:1,REINHARD2:2,REINHARD2_ADAPTIVE:3,OPTIMIZED_CINEON:5,CINEON:5,ACES_FILMIC:6,AGX:7,NEUTRAL:8},Be={DEFAULT:0,ESKIL:1},lo=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,Oh=class extends ve{constructor({blendFunction:e=C.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",lo,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},co=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,uo="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",ho=class extends Z{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new E(null),normalBuffer:new E(null),texelSize:new E(new L)},blending:le,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:co,vertexShader:uo})}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Pe){this.depthBuffer=e,this.depthPacking=t}set normalBuffer(e){this.uniforms.normalBuffer.value=e,e!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(e){this.normalBuffer=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},fo=class extends B{constructor({normalBuffer:e=null,resolutionScale:t=.5,width:r=D.AUTO_SIZE,height:n=D.AUTO_SIZE,resolutionX:s=r,resolutionY:i=n}={}){super("DepthDownsamplingPass");const a=new ho;a.normalBuffer=e,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new W(1,1,{minFilter:Me,magFilter:Me,depthBuffer:!1,type:ci}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new D(this,s,i,t);o.addEventListener("change",l=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(e,t=Pe){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t}render(e,t,r,n,s){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.fullscreenMaterial.setSize(e,t)}initialize(e,t,r){const n=e.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},po=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,mo=class extends Z{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new E(null),luminanceBuffer1:new E(null),minLuminance:new E(.01),deltaTime:new E(0),tau:new E(1)},extensions:{shaderTextureLOD:!0},blending:le,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:po,vertexShader:tr})}set luminanceBuffer0(e){this.uniforms.luminanceBuffer0.value=e}setLuminanceBuffer0(e){this.uniforms.luminanceBuffer0.value=e}set luminanceBuffer1(e){this.uniforms.luminanceBuffer1.value=e}setLuminanceBuffer1(e){this.uniforms.luminanceBuffer1.value=e}set mipLevel1x1(e){this.defines.MIP_LEVEL_1X1=e.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(e){this.mipLevel1x1=e}set deltaTime(e){this.uniforms.deltaTime.value=e}setDeltaTime(e){this.uniforms.deltaTime.value=e}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(e){this.uniforms.minLuminance.value=e}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(e){this.uniforms.minLuminance.value=e}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(e){this.uniforms.tau.value=e}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(e){this.uniforms.tau.value=e}},vo=class extends B{constructor(e,{minLuminance:t=.01,adaptationRate:r=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new mo,this.needsSwap=!1,this.renderTargetPrevious=new W(1,1,{minFilter:Me,magFilter:Me,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const n=this.fullscreenMaterial;n.luminanceBuffer0=this.renderTargetPrevious.texture,n.luminanceBuffer1=e,n.minLuminance=t,n.adaptationRate=r,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new Mn(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(e){this.fullscreenMaterial.mipLevel1x1=e}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(e){this.fullscreenMaterial.adaptationRate=e}render(e,t,r,n,s){this.fullscreenMaterial.deltaTime=n,e.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),e.render(this.scene,this.camera),this.copyPass.render(e,this.renderTargetAdapted)}},go=`#include <tonemapping_pars_fragment>
uniform float whitePoint;
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
uniform float middleGrey;
#if TONE_MAPPING_MODE == 3
uniform lowp sampler2D luminanceBuffer;
#else
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 3
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}
#elif TONE_MAPPING_MODE == 4
#define A 0.15
#define B 0.50
#define C 0.10
#define D 0.20
#define E 0.02
#define F 0.30
vec3 Uncharted2Helper(const in vec3 x){return((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}vec3 Uncharted2ToneMapping(vec3 color){color*=toneMappingExposure;return clamp(Uncharted2Helper(color)/Uncharted2Helper(vec3(whitePoint)),0.0,1.0);}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#elif TONE_MAPPING_MODE == 4
outputColor=vec4(Uncharted2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,xo=class extends ve{constructor({blendFunction:e=C.SRC,adaptive:t=!1,mode:r=t?H.REINHARD2_ADAPTIVE:H.AGX,resolution:n=256,maxLuminance:s=4,whitePoint:i=s,middleGrey:a=.6,minLuminance:o=.01,averageLuminance:l=1,adaptationRate:u=1}={}){super("ToneMappingEffect",go,{blendFunction:e,uniforms:new Map([["luminanceBuffer",new E(null)],["maxLuminance",new E(s)],["whitePoint",new E(i)],["middleGrey",new E(a)],["averageLuminance",new E(l)]])}),this.renderTargetLuminance=new W(1,1,{minFilter:pi,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new Rn({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new vo(this.luminancePass.texture,{minLuminance:o,adaptationRate:u}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=n,this.mode=r}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(e){if(this.mode===e)return;const r=Zt.replace(/\D+/g,"")>=168?"CineonToneMapping(texel)":"OptimizedCineonToneMapping(texel)";switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",e.toFixed(0)),e){case H.LINEAR:this.defines.set("toneMapping(texel)","LinearToneMapping(texel)");break;case H.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case H.CINEON:case H.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)",r);break;case H.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;case H.AGX:this.defines.set("toneMapping(texel)","AgXToneMapping(texel)");break;case H.NEUTRAL:this.defines.set("toneMapping(texel)","NeutralToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=e===H.REINHARD2_ADAPTIVE,this.setChanged()}getMode(){return this.mode}setMode(e){this.mode=e}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(e){this.uniforms.get("whitePoint").value=e}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(e){this.uniforms.get("middleGrey").value=e}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(e){this.uniforms.get("averageLuminance").value=e}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(e){const t=Math.max(0,Math.ceil(Math.log2(e))),r=Math.pow(2,t);this.luminancePass.resolution.setPreferredSize(r,r),this.adaptiveLuminanceMaterial.mipLevel1x1=t}getResolution(){return this.resolution}setResolution(e){this.resolution=e}get adaptive(){return this.mode===H.REINHARD2_ADAPTIVE}set adaptive(e){this.mode=e?H.REINHARD2_ADAPTIVE:H.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(e){this.adaptiveLuminanceMaterial.adaptationRate=e}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(e){console.warn(this.name,"distinction was removed.")}update(e,t,r){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(e,t),this.adaptiveLuminancePass.render(e,null,null,r))}initialize(e,t,r){this.adaptiveLuminancePass.initialize(e,t,r)}},yo=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,bo=class extends ve{constructor({blendFunction:e,eskil:t=!1,technique:r=t?Be.ESKIL:Be.DEFAULT,offset:n=.5,darkness:s=.5}={}){super("VignetteEffect",yo,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",r.toFixed(0)]]),uniforms:new Map([["offset",new E(n)],["darkness",new E(s)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Be.ESKIL}set eskil(e){this.technique=e?Be.ESKIL:Be.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},wo=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,To="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Eo=class extends Z{constructor(e,t,r,n,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Zt.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new E(null),depthBuffer:new E(null),resolution:new E(new L),texelSize:new E(new L),cameraNear:new E(.3),cameraFar:new E(1e3),aspect:new E(1),time:new E(0)},blending:le,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.copyCameraSettings(n)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Pe){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader=wo.replace(M.FRAGMENT_HEAD,e.get(M.FRAGMENT_HEAD)||"").replace(M.FRAGMENT_MAIN_UV,e.get(M.FRAGMENT_MAIN_UV)||"").replace(M.FRAGMENT_MAIN_IMAGE,e.get(M.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=To.replace(M.VERTEX_HEAD,e.get(M.VERTEX_HEAD)||"").replace(M.VERTEX_MAIN_SUPPORT,e.get(M.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof fi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return M}};function Rr(e,t,r){for(const n of t){const s="$1"+e+n.charAt(0).toUpperCase()+n.slice(1),i=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const a of r.entries())a[1]!==null&&r.set(a[0],a[1].replace(i,s))}}function So(e,t,r){let n=t.getFragmentShader(),s=t.getVertexShader();const i=n!==void 0&&/mainImage/.test(n),a=n!==void 0&&/mainUv/.test(n);if(r.attributes|=t.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(a&&(r.attributes&K.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!i&&!a)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=r.shaderParts;let u=l.get(M.FRAGMENT_HEAD)||"",d=l.get(M.FRAGMENT_MAIN_UV)||"",h=l.get(M.FRAGMENT_MAIN_IMAGE)||"",m=l.get(M.VERTEX_HEAD)||"",p=l.get(M.VERTEX_MAIN_SUPPORT)||"";const v=new Set,f=new Set;if(a&&(d+=`	${e}MainUv(UV);
`,r.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const b=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);p+=`	${e}MainSupport(`,p+=b?`vUv);
`:`);
`;for(const x of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const A of x[1].split(/\s*,\s*/))r.varyings.add(A),v.add(A),f.add(A);for(const x of s.matchAll(o))f.add(x[1])}for(const b of n.matchAll(o))f.add(b[1]);for(const b of t.defines.keys())f.add(b.replace(/\([\w\s,]*\)/g,""));for(const b of t.uniforms.keys())f.add(b);f.delete("while"),f.delete("for"),f.delete("if"),t.uniforms.forEach((b,x)=>r.uniforms.set(e+x.charAt(0).toUpperCase()+x.slice(1),b)),t.defines.forEach((b,x)=>r.defines.set(e+x.charAt(0).toUpperCase()+x.slice(1),b));const y=new Map([["fragment",n],["vertex",s]]);Rr(e,f,r.defines),Rr(e,f,y),n=y.get("fragment"),s=y.get("vertex");const w=t.blendMode;if(r.blendModes.set(w.blendFunction,w),i){t.inputColorSpace!==null&&t.inputColorSpace!==r.colorSpace&&(h+=t.inputColorSpace===k?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==pn?r.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(r.colorSpace=t.inputColorSpace);const b=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${e}MainImage(color0, UV, `,(r.attributes&K.DEPTH)!==0&&b.test(n)&&(h+="depth, ",r.readDepth=!0),h+=`color1);
	`;const x=e+"BlendOpacity";r.uniforms.set(x,w.opacity),h+=`color0 = blend${w.blendFunction}(color0, color1, ${x});

	`,u+=`uniform float ${x};

`}if(u+=n+`
`,s!==null&&(m+=s+`
`),l.set(M.FRAGMENT_HEAD,u),l.set(M.FRAGMENT_MAIN_UV,d),l.set(M.FRAGMENT_MAIN_IMAGE,h),l.set(M.VERTEX_HEAD,m),l.set(M.VERTEX_MAIN_SUPPORT,p),t.extensions!==null)for(const b of t.extensions)r.extensions.add(b)}}var Co=class extends B{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Eo(null,null,null,e),this.listener=r=>this.handleEvent(r),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort((t,r)=>r.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new da;let t=0;for(const a of this.effects)if(a.blendMode.blendFunction===C.DST)e.attributes|=a.getAttributes()&K.DEPTH;else{if((e.attributes&a.getAttributes()&K.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);So("e"+t++,a,e)}let r=e.shaderParts.get(M.FRAGMENT_HEAD),n=e.shaderParts.get(M.FRAGMENT_MAIN_IMAGE),s=e.shaderParts.get(M.FRAGMENT_MAIN_UV);const i=/\bblend\b/g;for(const a of e.blendModes.values())r+=a.getShaderCode().replace(i,`blend${a.blendFunction}`)+`
`;(e.attributes&K.DEPTH)!==0?(e.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,e.colorSpace===k&&(n+=`color0 = sRGBToLinear(color0);
	`),e.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(M.FRAGMENT_HEAD,r),e.shaderParts.set(M.FRAGMENT_MAIN_IMAGE,n),e.shaderParts.set(M.FRAGMENT_MAIN_UV,s);for(const[a,o]of e.shaderParts)o!==null&&e.shaderParts.set(a,o.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Pe){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,n,s){for(const i of this.effects)i.update(e,t,n);if(!this.skipRendering||this.renderToScreen){const i=this.fullscreenMaterial;i.inputBuffer=t.texture,i.time+=n*this.timeScale,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(const n of this.effects)n.initialize(e,t,r);this.updateMaterial(),r!==void 0&&r!==me&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},Ao=class extends B{constructor(e,t,{renderTarget:r,resolutionScale:n=1,width:s=D.AUTO_SIZE,height:i=D.AUTO_SIZE,resolutionX:a=s,resolutionY:o=i}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new _n(e,t,new li);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new Ae(7829503),u.overrideClearAlpha=1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new W(1,1,{minFilter:Me,magFilter:Me}),this.renderTarget.texture.name="NormalPass.Target");const d=this.resolution=new D(this,a,o,n);d.addEventListener("change",h=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,n,s){const i=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,i,i)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}};const Mo=g.createContext(null),_r=e=>(e.getAttributes()&K.CONVOLUTION)===K.CONVOLUTION,Io=V.memo(g.forwardRef(({children:e,camera:t,scene:r,resolutionScale:n,enabled:s=!0,renderPriority:i=1,autoClear:a=!0,depthBuffer:o,enableNormalPass:l,stencilBuffer:u,multisampling:d=8,frameBufferType:h=xi},m)=>{const{gl:p,scene:v,camera:f,size:y}=ft(),w=r||v,b=t||f,[x,A,N]=g.useMemo(()=>{const F=gi(),$=new ua(p,{depthBuffer:o,stencilBuffer:u,multisampling:d>0&&F?d:0,frameBufferType:h});$.addPass(new _n(w,b));let z=null,X=null;return l&&(X=new Ao(w,b),X.enabled=!1,$.addPass(X),n!==void 0&&F&&(z=new fo({normalBuffer:X.texture,resolutionScale:n}),z.enabled=!1,$.addPass(z))),[$,X,z]},[b,p,o,u,d,h,w,l,n]);g.useEffect(()=>x?.setSize(y.width,y.height),[x,y]),pt((F,$)=>{if(s){const z=p.autoClear;p.autoClear=a,u&&!a&&p.clearStencil(),x.render($),p.autoClear=z}},s?i:0);const P=g.useRef(null),ke=yi(P);g.useLayoutEffect(()=>{const F=[];if(P.current&&ke.current&&x){const $=ke.current.objects;for(let z=0;z<$.length;z++){const X=$[z];if(X instanceof ve){const mr=[X];if(!_r(X)){let St=null;for(;(St=$[z+1])instanceof ve&&!_r(St);)mr.push(St),z++}const ni=new Co(b,...mr);F.push(ni)}else X instanceof B&&F.push(X)}for(const z of F)x?.addPass(z);A&&(A.enabled=!0),N&&(N.enabled=!0)}return()=>{for(const $ of F)x?.removePass($);A&&(A.enabled=!1),N&&(N.enabled=!1)}},[x,e,b,A,N,ke]),g.useEffect(()=>{const F=p.toneMapping;return p.toneMapping=bi,()=>{p.toneMapping=F}},[]);const Et=g.useMemo(()=>({composer:x,normalPass:A,downSamplingPass:N,resolutionScale:n,camera:b,scene:w}),[x,A,N,n,b,w]);return g.useImperativeHandle(m,()=>x,[x]),c.jsx(Mo.Provider,{value:Et,children:c.jsx("group",{ref:P,children:e})})}));let Ro=0;const Nr=new WeakMap,_o=(e,t)=>V.forwardRef(function({blendFunction:n=t?.blendFunction,opacity:s=t?.opacity,...i},a){let o=Nr.get(e);if(!o){const d=`@react-three/postprocessing/${e.name}-${Ro++}`;wi({[d]:e}),Nr.set(e,o=d)}const l=ft(d=>d.camera),u=V.useMemo(()=>{var d,h;return[...(d=t?.args)!=null?d:[],...(h=i.args)!=null?h:[{...t,...i}]]},[JSON.stringify(i)]);return c.jsx(o,{camera:l,"blendMode-blendFunction":n,"blendMode-opacity-value":s,...i,ref:a,args:u})}),No=g.forwardRef(function({blendFunction:t,adaptive:r,mode:n,resolution:s,maxLuminance:i,whitePoint:a,middleGrey:o,minLuminance:l,averageLuminance:u,adaptationRate:d,...h},m){const p=g.useMemo(()=>new xo({blendFunction:t,adaptive:r,mode:n,resolution:s,maxLuminance:i,whitePoint:a,middleGrey:o,minLuminance:l,averageLuminance:u,adaptationRate:d}),[t,r,n,s,i,a,o,l,u,d]);return g.useEffect(()=>{p.dispose()},[p]),c.jsx("primitive",{...h,ref:m,object:p,attributes:K.CONVOLUTION})}),Oo=_o(bo);class jo extends g.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t){console.log("[CinematicEffects] Bloom  :",t.message)}render(){return this.state.hasError?null:this.props.children}}const Po=()=>c.jsx(jo,{children:c.jsxs(Io,{disableNormalPass:!0,children:[c.jsx(Oo,{offset:.4,darkness:.4,eskil:!1}),c.jsx(No,{adaptive:!0,resolution:256,middleGrey:.6,maxLuminance:16,averageLuminance:1,adaptationRate:1})]})}),T=Ti((e,t)=>({currentScene:"boot",prevScene:null,isTransitioning:!1,performanceMode:"high",isMuted:!1,systemLogs:[],addLog:r=>e(n=>({systemLogs:[{timestamp:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),message:r},...n.systemLogs].slice(0,100)})),hoverState:!1,setHoverState:r=>e({hoverState:r}),hoveredPlanet:null,setHoveredPlanet:r=>e({hoveredPlanet:r}),missionModalData:null,openMissionModal:r=>e({missionModalData:r}),closeMissionModal:()=>e({missionModalData:null}),blackBoxOpen:!1,currentLogId:null,openBlackBox:(r=null)=>e({blackBoxOpen:!0,currentLogId:r}),closeBlackBox:()=>e({blackBoxOpen:!1,currentLogId:null}),setCurrentLog:r=>e({currentLogId:r}),isWarping:!1,warpTarget:null,warpTargetPosition:null,warpTo:(r,n=null)=>{t().currentScene!==r&&(e({isWarping:!0,warpTarget:r,warpTargetPosition:n}),setTimeout(()=>{e(i=>({prevScene:i.currentScene,currentScene:r,isTransitioning:!0})),setTimeout(()=>{e({isWarping:!1,warpTarget:null,warpTargetPosition:null})},1e3)},1200))},finishWarp:()=>e({isWarping:!1,warpTarget:null,warpTargetPosition:null}),setScene:r=>e(n=>n.currentScene===r?{}:{prevScene:n.currentScene,currentScene:r,isTransitioning:!0}),endTransition:()=>e({isTransitioning:!1}),setPerformanceMode:r=>e({performanceMode:r}),toggleMute:()=>e(r=>({isMuted:!r.isMuted})),orbitSpeed:.05,setOrbitSpeed:r=>e({orbitSpeed:r}),lab01Config:{distort:.4,speed:1.5,color:"#06b6d4"},setLab01Config:r=>e(n=>({lab01Config:{...n.lab01Config,...r}})),lab02Config:{zeroG:!1,gravity:[0,-.5,0]},setLab02Config:r=>e(n=>({lab02Config:{...n.lab02Config,...r}})),lab03Config:{mode:"demo"},setLab03Config:r=>e({lab03Config:{mode:r}})})),Lo=g.lazy(()=>J(()=>import("./BootScene-zYbuxhNV.js"),__vite__mapDeps([0,1,2,3]))),ko=g.lazy(()=>J(()=>import("./HubScene-DvZ4uoFZ.js"),__vite__mapDeps([4,1,2,3]))),Do=g.lazy(()=>J(()=>import("./ProfileScene-BAr3za6X.js"),__vite__mapDeps([5,1,2,3]))),Uo=g.lazy(()=>J(()=>import("./Lab01Scene-B5RdXI-O.js"),__vite__mapDeps([6,1,2,3]))),Bo=g.lazy(()=>J(()=>import("./Lab02Scene-BdufBsi3.js"),__vite__mapDeps([7,1,2,3]))),Fo=g.lazy(()=>J(()=>import("./Lab03Scene-DrwZeCyN.js"),__vite__mapDeps([8,1,2,3]))),zo=g.lazy(()=>J(()=>import("./Lab04Scene-DoSEGbdw.js"),__vite__mapDeps([9,1,2,3]))),Ho=g.lazy(()=>J(()=>import("./ContactScene-DfdOlWKP.js"),__vite__mapDeps([10,1,2,3]))),$o=()=>{const e=T(t=>t.currentScene);return c.jsx(g.Suspense,{fallback:null,children:c.jsxs("group",{children:[e==="boot"&&c.jsx(Lo,{}),e==="hub"&&c.jsx(ko,{}),e==="profile"&&c.jsx(Do,{}),e==="lab01"&&c.jsx(Uo,{}),e==="contact"&&c.jsx(Ho,{}),e==="lab02"&&c.jsx(Bo,{}),e==="lab03"&&c.jsx(Fo,{}),e==="lab04"&&c.jsx(zo,{})]})})},Or={uniforms:{uColorInner:{value:new Ae("#ffaa00")},uColorOuter:{value:new Ae("#00ffff")}},vertexShader:`
        varying vec2 vUv;
        varying vec3 vPosition;
        void main() {
            vUv = uv;
            vPosition = position;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
    `,fragmentShader:`
        uniform float uTime;
        uniform vec3 uColorInner;
        uniform vec3 uColorOuter;
        varying vec2 vUv;
        varying vec3 vPosition;

        // Simple Noise
        float noise(vec2 p) {
            return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);
        }

        void main() {
            // Center is (0.5, 0.5)
            vec2 center = vec2(0.5);
            vec2 pos = vUv - center;
            float r = length(pos) * 2.0; // Radius 0 to 1
            float angle = atan(pos.y, pos.x);

            // Black Hole Event Horizon (Center)
            float eventHorizon = smoothstep(0.15, 0.2, r); // Smaller black hole hole
            
            // Accretion Disk Pattern
            // Spiral rotation
            float spiral = angle + 10.0 / (r + 0.1) - uTime * 2.0;
            float diskNoise = noise(vec2(r * 10.0, spiral * 5.0));
            
            // Soft glow
            float glow = 1.0 / (r + 0.1) * 0.1;
            
            // Disk Ring
            float disk = smoothstep(0.2, 0.5, r) * smoothstep(1.0, 0.4, r); // Wider fade out
            
            // Color mixing
            vec3 color = mix(uColorOuter, uColorInner, diskNoise);
            color += glow * uColorOuter;
            
            // Apply patterns
            float intensity = disk * (0.8 + 0.2 * diskNoise) + glow;
            
            // Final masking
            vec3 finalColor = color * intensity * eventHorizon;
            
            // Alpha fade at edges (Ensure scale is large enough so this fade happens off-screen or smooth)
            float alpha = smoothstep(0.0, 0.1, intensity);

            gl_FragColor = vec4(finalColor, alpha);
        }
    `},Go=({isFinished:e})=>{const t=g.useRef();pt(n=>{const s=n.clock.getElapsedTime();t.current&&(t.current.uniforms.uTime.value=s*2);const i=1+Math.sin(s*3)*.05;t.current&&t.current.parent&&t.current.parent.scale.set(i,i,1)});const r=g.useMemo(()=>new Z({uniforms:{uTime:{value:0},uColorInner:{value:new Ae("#ffaa00")},uColorOuter:{value:new Ae("#00ccff")}},vertexShader:Or.vertexShader,fragmentShader:Or.fragmentShader,transparent:!0,side:He,depthWrite:!1,blending:gn}),[]);return c.jsxs("group",{children:[c.jsx(Ei,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:3}),c.jsxs("mesh",{rotation:[-Math.PI/3,0,0],scale:[2,2,2],children:[c.jsx("planeGeometry",{args:[50,50]})," ",c.jsx("primitive",{object:r,attach:"material",ref:t})]}),c.jsx("group",{rotation:[-Math.PI/3,0,0],children:c.jsx(Si,{count:500,scale:[20,20,5],size:4,speed:2,opacity:.6,color:"#ffaa00"})}),c.jsxs("mesh",{position:[0,0,.1],children:[c.jsx("sphereGeometry",{args:[2,64,64]}),c.jsx("meshBasicMaterial",{color:"#000000"})]})]})},jh=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"})),nr={},Ph=(e,t)=>{nr[e]=t},Lh=e=>{delete nr[e]},Vo=(e,t)=>{const r=nr[e];return r&&r.current?(r.current.getWorldPosition(t),t):null},Wo=()=>{const{camera:e,controls:t}=ft(),r=T(o=>o.isWarping),n=T(o=>o.warpTargetPosition),s=T(o=>o.warpTarget),i=T(o=>o.finishWarp),a=g.useRef(new ue);return g.useEffect(()=>{if(r&&n){t&&(t.enabled=!1);const o=new ue(...n),l=zt.timeline({onComplete:()=>{i(),t&&(t.enabled=!0)}});return l.to(e.position,{x:o.x*.8,y:o.y*.8,z:o.z*.8,duration:2.5,ease:"power2.in"}),()=>{l.kill(),t&&(t.enabled=!0)}}},[r,e,i,n,t]),pt(()=>{r&&s&&Vo(s,a.current)&&e.lookAt(a.current)},100),null},Fe=600;function qo(){const e=g.useRef(),t=T(a=>a.isWarping),r=g.useRef(.2),{positions:n,randoms:s}=g.useMemo(()=>{const a=new Float32Array(Fe*3),o=new Float32Array(Fe);for(let l=0;l<Fe;l++){const u=Math.random()*Math.PI*2,d=15+Math.random()*40;a[l*3]=Math.cos(u)*d,a[l*3+1]=Math.sin(u)*d,a[l*3+2]=(Math.random()-.5)*400,o[l]=Math.random()}return{positions:a,randoms:o}},[]),i=g.useRef(new Ci);return pt((a,o)=>{if(!e.current)return;const l=t?30:.5;r.current=Ai.lerp(r.current,l,o*2);const u=r.current;for(let d=0;d<Fe;d++){let h=n[d*3+2];h+=u*(t?50:10)*o,h>200&&(h-=400),n[d*3+2]=h,i.current.position.set(n[d*3],n[d*3+1],h);const m=1+(t?15:0);i.current.scale.set(.2,.2,m),i.current.rotation.x=0,i.current.updateMatrix(),e.current.setMatrixAt(d,i.current.matrix)}e.current.instanceMatrix.needsUpdate=!0}),c.jsxs("instancedMesh",{ref:e,args:[null,null,Fe],children:[c.jsx("cylinderGeometry",{args:[.1,.1,1,4]}),c.jsx("meshBasicMaterial",{color:t?"#a5f3fc":"#4fd1c5",transparent:!0,opacity:.3,blending:gn,depthWrite:!1})]})}const Xo=()=>{const e=T(a=>a.currentScene),t=T(a=>a.prevScene),r=T(a=>a.isWarping),{camera:n,gl:s,controls:i}=ft();return g.useEffect(()=>{if(r){console.log("[CameraHandler] Warping active, skipping reset.");return}if(zt.killTweensOf(n.position),e==="hub"){const a=new ue(0,40,45),o={lab01:new ue(4,2,10),lab02:new ue(6,3,13),lab03:new ue(8,4,16),lab04:new ue(10,5,19)};t&&o[t]?(n.position.copy(o[t]),n.lookAt(0,0,0),zt.to(n.position,{x:a.x,y:a.y,z:a.z,duration:3.5,ease:"power2.out",onUpdate:()=>n.lookAt(0,0,0)})):n.position.copy(a)}else e==="boot"?n.position.set(0,0,12):e.startsWith("lab")?n.position.set(0,0,14):e==="contact"?n.position.set(0,0,12):n.position.set(0,0,5);i&&(i.target.set(0,0,0),i.update()),(e!=="hub"||!t)&&n.lookAt(0,0,0),n.updateProjectionMatrix()},[e,t,n,s,i,r]),null},Yo=()=>{const e=T(r=>r.currentScene),t=T(r=>r.isWarping);return c.jsx("div",{className:"w-full h-screen fixed inset-0 z-0 bg-black",children:c.jsxs(Mi,{dpr:[1,2],gl:{antialias:!0,powerPreference:"high-performance",preserveDrawingBuffer:!0},style:{touchAction:"none"},onPointerMissed:()=>{},children:[c.jsx(Xo,{}),c.jsx(Ii,{makeDefault:!0,position:[0,0,18]}),e==="hub"&&!t&&c.jsx(Ri,{makeDefault:!0,minPolarAngle:0,maxPolarAngle:Math.PI-.1,minDistance:2,maxDistance:100,enablePan:!1,enableDamping:!0,dampingFactor:.05,rotateSpeed:.5}),c.jsx("color",{attach:"background",args:["#000000"]}),c.jsx("ambientLight",{intensity:1}),c.jsx($o,{}),t&&c.jsxs(c.Fragment,{children:[c.jsx(Wo,{}),c.jsx(qo,{})]}),c.jsx(Po,{})]})})},Ko=[{version:"v1.5.0",date:"2025-12-19",title:"FINAL POLISH & UX REFINEMENT",changes:["Implemented User Interaction requirement for Audio Autoplay","Added 'Planning Philosophy' section to Profile","Refined Navbar naming to match Content (Assignments -> Awards)","Optimized Boot Log visualization","Fixed History update synchronization"]},{version:"v1.4.0",date:"2025-12-19",title:"MULTIVERSE LABS EXPANSION",changes:["Implemented 3 Distinct Lab Concepts (Organic, Audio, Glitch)","Populated 'Work' universe with actual project data","Added dynamic Tech Stack visualization in Lab 02","Enhanced Audio Visualizer in Lab 03 with pulsating core","Created 'Glitch Moon' environment for Lab 04"]},{version:"v1.3.0",date:"2025-12-18",title:"CONTENT SYNCHRONIZATION",changes:["Updated Hero/Career/Achievements with actual award data","Integrated 2024 ICT Awards (Grand Prize) & Web Award Korea records","Fixed Korean text encoding issues across all sections","Re-encoded Profile sections to UTF-8","Created content archive from Gamma portfolio"]},{version:"v1.2.5",date:"2025-12-16",title:"CINEMATIC FX UPGRADE",changes:["Restored Cinematic Bloom post-processing effect","Added procedural Sound FX (Hover/Click) via Web Audio API","Lab03 visual overhaul: Particle Cloud + Wireframe Wave","Fixed Lab03/Lab04 routing swap","Deployed to heoyesol.kr custom domain"]},{version:"v1.2.0",date:"2025-12-12",title:"COSMIC UPDATE",changes:["Implemented Atomic Orbital Physics for Hub Scene","Added 3D Electron Cloud aesthetics","Enhanced camera stabilization system","Integrated Matrix Rain effect in Boot Sequence","Optimized performance with Delta-Time based animations"]},{version:"v1.1.5",date:"2025-12-11",title:"VISUAL OVERHAUL",changes:["Resolved WebGL Crash issues","Upgraded post-processing pipeline","Added custom cursor with interactive states","Implemented sound effects engine (Hover/Click)","Deployed to custom domain (heoyesol.kr)"]},{version:"v1.0.0",date:"2025-12-01",title:"SYSTEM INITIALIZATION",changes:["Initial Release","Core systems online","Lab01-04 modules loaded","Boot sequence established"]}],Qo=[{version:"Recent Dev Stream",date:"2025-12-23",title:"DEVELOPER LOG (LIVE)",changes:[" : : Expanded Black Box s with strategic depth and Director persona"," :  README and Docs for Phase 36 release"," : 35 & 36 Complete: Black Box Archives & Lab 01 Crystalline Redesign","  : Phase 34 - Planetary Archives Modal"," : Optimize mobile UI (enlarge toggles, hide status overlap)"," : Translate README to Korean per user request"," :  guidelines to reflect personal portfolio nature"," : Professionalize repo with README overhaul, CI, and governance "," :  GitHub Action for automated ment"," : RECOVERY - Force  docs and source after git lock clear"]}],jr=[...Qo,...Ko],Zo=({onClose:e})=>{const[t,r]=g.useState("PATCH"),n=T(s=>s.systemLogs);return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 pointer-events-auto",children:c.jsxs("div",{className:"w-full max-w-2xl h-[70vh] bg-black border border-[#00ff41] p-6 font-mono text-[#00ff41] shadow-[0_0_20px_rgba(0,255,65,0.2)] relative overflow-hidden flex flex-col",children:[c.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(transparent_50%,rgba(0,255,65,0.05)_50%)] bg-[length:100%_4px] pointer-events-none z-0"}),c.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-[#00ff41]/30 pb-4 z-10 relative",children:[c.jsx("div",{className:"flex flex-col gap-2",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>r("PATCH"),className:`text-lg font-bold transition-all ${t==="PATCH"?"text-white text-shadow-glow underline decoration-2 underline-offset-4":"opacity-50 hover:opacity-100"}`,children:"UPDATE_LOGS"}),c.jsx("button",{onClick:()=>r("SYSTEM"),className:`text-lg font-bold transition-all ${t==="SYSTEM"?"text-white text-shadow-glow underline decoration-2 underline-offset-4":"opacity-50 hover:opacity-100"}`,children:"SYSTEM_LOGS"})]})}),c.jsx("button",{onClick:e,className:"hover:bg-[#00ff41] hover:text-black px-2 py-1 transition-colors border border-[#00ff41]/50 text-xs",children:"[CLOSE_TERMINAL]"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar z-10 relative pr-2",children:[t==="PATCH"&&c.jsx("div",{className:"space-y-8",children:jr.map((s,i)=>c.jsxs("div",{className:"border-l-2 border-[#00ff41]/50 pl-4 relative",children:[c.jsx("div",{className:"absolute -left-[5px] top-0 w-2 h-2 bg-[#00ff41]"}),c.jsxs("div",{className:"flex justify-between items-baseline mb-2 text-sm opacity-70",children:[c.jsx("span",{children:s.date}),c.jsx("span",{children:s.version})]}),c.jsx("h3",{className:"text-lg font-bold mb-3 text-white",children:s.title}),c.jsx("ul",{className:"space-y-1 text-sm text-[#00ff41]/80",children:s.changes.map((a,o)=>c.jsxs("li",{className:"flex",children:[c.jsx("span",{className:"mr-2",children:">"}),a]},o))})]},i))}),t==="SYSTEM"&&c.jsxs("div",{className:"font-mono text-xs space-y-1",children:[n.length===0&&c.jsx("div",{className:"text-center opacity-50 py-10",children:"NO_SYSTEM_LOGS_FOUND_LOCAL_MEMORY_EMPTY"}),n.map((s,i)=>c.jsxs("div",{className:"flex gap-4 hover:bg-[#00ff41]/10 px-2 py-0.5 rounded transition-colors",children:[c.jsx("span",{className:"opacity-50 min-w-[80px]",children:s.timestamp}),c.jsx("span",{className:`${s.message.includes("FATAL")||s.message.includes("ERROR")?"text-red-500 font-bold":s.message.includes("OK")?"text-white":"text-[#00ff41]/80"}`,children:s.message})]},i))]})]}),c.jsxs("div",{className:"mt-4 text-[10px] text-center opacity-50 border-t border-[#00ff41]/30 pt-4 z-10",children:["STATUS: ",t==="PATCH"?"ONLINE":"MONITORING"," // RECORDS: ",t==="PATCH"?jr.length:n.length," // MEM_USAGE: ",Math.floor(Math.random()*30+10),"MB"]})]})})},Jo=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(!1);g.useEffect(()=>{const d=()=>{n(window.scrollY>50)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const[s,i]=g.useState("");g.useEffect(()=>{const d=()=>{const h=["hero","about","work","expertise","achievements"],m=window.scrollY+100;for(const p of h){const v=document.getElementById(p);if(v&&v.offsetTop<=m&&v.offsetTop+v.offsetHeight>m){i(p==="achievements"?"awards":p),i(p);return}}i("")};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const a=T(d=>d.currentScene),o=T(d=>d.setScene),l=(d,h)=>{o(d),h&&setTimeout(()=>{const m=document.getElementById(h);m&&m.scrollIntoView({behavior:"smooth"})},100)},u=[{name:"Home",action:()=>l("hub"),id:"hub"},{name:"About",action:()=>l("profile","about"),id:"about"},{name:"Experience",action:()=>l("profile","work"),id:"work"},{name:"Expertise",action:()=>l("profile","expertise"),id:"expertise"},{name:"Awards",action:()=>l("profile","achievements"),id:"achievements"},{name:"Contact",action:()=>l("contact"),id:"contact"},{name:"History",action:()=>o("history"),id:"history"}];return c.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 pointer-events-none bg-black/60 backdrop-blur-md border-b border-white/10 ${r?"py-3":"py-4"}`,children:[c.jsxs("div",{className:"container mx-auto px-6 flex justify-between items-center",children:[c.jsx("button",{onClick:()=>o("hub"),className:"text-2xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent pointer-events-auto",children:"Yesol Heo"}),c.jsx("div",{className:"hidden md:flex space-x-8 pointer-events-auto",children:u.map(d=>c.jsx("button",{onClick:d.action,className:`transition-colors text-sm font-medium ${a==="history"&&d.name==="History"?"text-primary font-bold":s===d.id?"text-primary font-bold shadow-[0_0_10px_rgba(6,182,212,0.5)]":"text-gray-300 hover:text-white hover:text-glow"}`,children:d.name},d.name))}),c.jsx("button",{className:"md:hidden text-white pointer-events-auto p-2",onClick:()=>t(!e),children:e?c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),c.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),c.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]}),c.jsx(mt,{children:e&&c.jsx(_.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-surface border-b border-gray-800 bg-black/90 backdrop-blur",children:c.jsx("div",{className:"flex flex-col px-6 py-4 space-y-4",children:u.map(d=>c.jsx("button",{className:"text-gray-300 hover:text-white block py-3 text-left",onClick:()=>{d.action(),t(!1)},children:d.name},d.name))})})})]})},be={SYSTEM:{LOADING:"Synchronizing Dimensions..."},SECTORS:{LAB_01:{id:"LAB-01",name:"The Prism",tech:"SHADER",type:"Crystalline Planet",description:"A world of pure light and refraction.",mission:"Navigation & Orientation",status:"STABLE",visual:{color:"#06b6d4",texture:"glass",effect:"transmission"}},LAB_02:{id:"LAB-02",name:"The Terrarium",tech:"PHYSICS",type:"Living Planet",description:"An ecosystem of evolving data-forms.",mission:"Creature Analysis",status:"ACTIVE",visual:{color:"#10b981",texture:"organic",effect:"pulse"}},LAB_03:{id:"LAB-03",name:"The Resonance",tech:"AUDIO",type:"Gas Giant",description:"A storm of sound waves and frequencies.",mission:"Audio Visualization",status:"REACTIVE",visual:{color:"#facc15",texture:"gas",effect:"waves"}},LAB_04:{id:"LAB-04",name:"The Glitch",tech:"DEBUG",type:"Fractured Moon",description:"Unstable reality requiring constant patches.",mission:"Debug & Test",status:"UNSTABLE",visual:{color:"#ef4444",texture:"wireframe",effect:"glitch"}},PROFILE:{visual:{color:"#3b82f6"}}}},Ie=()=>{const e=g.useRef(null),t=g.useCallback(()=>(e.current||(e.current=new(window.AudioContext||window.webkitAudioContext)),e.current.state==="suspended"&&e.current.resume(),e.current),[]),r=g.useCallback(()=>{if(!T.getState().isMuted)try{const a=t(),o=a.createOscillator(),l=a.createGain();o.frequency.setValueAtTime(800,a.currentTime),o.frequency.exponentialRampToValueAtTime(1200,a.currentTime+.1),o.type="sine",l.gain.setValueAtTime(.05,a.currentTime),l.gain.exponentialRampToValueAtTime(.001,a.currentTime+.1),o.connect(l),l.connect(a.destination),o.start(),o.stop(a.currentTime+.1)}catch(a){console.warn("Audio FX Error:",a)}},[t]),n=g.useCallback(()=>{if(!T.getState().isMuted)try{const a=t(),o=a.createOscillator(),l=a.createGain();o.frequency.setValueAtTime(400,a.currentTime),o.frequency.exponentialRampToValueAtTime(100,a.currentTime+.15),o.type="square",l.gain.setValueAtTime(.1,a.currentTime),l.gain.exponentialRampToValueAtTime(.001,a.currentTime+.15),o.connect(l),l.connect(a.destination),o.start(),o.stop(a.currentTime+.15)}catch(a){console.warn("Audio FX Error:",a)}},[t]),s=g.useCallback(()=>{if(!T.getState().isMuted)try{const a=t(),o=a.createOscillator(),l=a.createGain();o.frequency.setValueAtTime(100,a.currentTime),o.frequency.exponentialRampToValueAtTime(800,a.currentTime+.5),o.type="sawtooth",l.gain.setValueAtTime(.05,a.currentTime),l.gain.linearRampToValueAtTime(0,a.currentTime+.5);const u=a.createBiquadFilter();u.type="lowpass",u.frequency.setValueAtTime(200,a.currentTime),u.frequency.linearRampToValueAtTime(2e3,a.currentTime+.5),o.connect(u),u.connect(l),l.connect(a.destination),o.start(),o.stop(a.currentTime+.5)}catch(a){console.warn("Audio FX Error:",a)}},[t]),i=g.useCallback(()=>{if(!T.getState().isMuted)try{const a=t(),o=a.createOscillator(),l=a.createGain();o.frequency.setValueAtTime(100,a.currentTime),o.frequency.exponentialRampToValueAtTime(2e3,a.currentTime+1.5),o.type="sawtooth",l.gain.setValueAtTime(0,a.currentTime),l.gain.linearRampToValueAtTime(.1,a.currentTime+.5),l.gain.linearRampToValueAtTime(0,a.currentTime+1.5);const u=a.createBiquadFilter();u.type="lowpass",u.frequency.setValueAtTime(200,a.currentTime),u.frequency.exponentialRampToValueAtTime(5e3,a.currentTime+1),o.connect(u),u.connect(l),l.connect(a.destination),o.start(),o.stop(a.currentTime+1.5)}catch(a){console.warn("Audio FX Error:",a)}},[t]);return{playHover:r,playClick:n,playTransition:s,playWarp:i}},el=()=>{const e=T(u=>u.warpTo),t=T(u=>u.setHoveredPlanet),r=T(u=>u.openBlackBox),n=Ie().playHover,s=Ie().playClick,i=[{id:"profile",label:"IDENTITY",icon:"",color:be.SECTORS.PROFILE.visual.color,target:"profile"},{id:"lab01",label:"PRISM",icon:"",color:be.SECTORS.LAB_01.visual.color,target:"lab01"},{id:"lab02",label:"TERRARIUM",icon:"",color:be.SECTORS.LAB_02.visual.color,target:"lab02"},{id:"lab03",label:"RESONANCE",icon:"",color:be.SECTORS.LAB_03.visual.color,target:"lab03"},{id:"lab04",label:"GLITCH",icon:"",color:be.SECTORS.LAB_04.visual.color,target:"lab04"},{id:"blackbox",label:"BLACK BOX",icon:"",color:"#06b6d4",target:"blackbox",isModal:!0}],a=u=>{t(u),n()},o=()=>{t(null)},l=u=>{if(s(),u.isModal&&u.target==="blackbox"){r();return}e(u.target)};return c.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 pointer-events-auto",children:c.jsx("div",{className:"flex items-end gap-4 px-6 py-2 rounded-full transition-all",children:i.map(u=>c.jsx(tl,{item:u,onHover:a,onLeave:o,onClick:l},u.id))})})},tl=({item:e,onHover:t,onLeave:r,onClick:n})=>c.jsxs(_.button,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.1,y:-10},whileTap:{scale:.9},onClick:()=>n(e),onMouseEnter:()=>t(e.id),onMouseLeave:r,className:"group relative flex flex-col items-center justify-center w-12 h-12 md:w-16 md:h-16 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 hover:bg-white/10 hover:border-white/40 transition-all shadow-lg overflow-visible",style:{boxShadow:`0 4px 20px ${e.color}20`},children:[c.jsx("div",{className:"absolute inset-0 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{boxShadow:`0 0 25px ${e.color}60`,border:`1px solid ${e.color}`}}),c.jsx("span",{className:"text-xl md:text-2xl filter drop-shadow-md z-10 transition-colors group-hover:text-white",style:{color:e.color},children:e.icon}),c.jsx("div",{className:"absolute -top-12 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0 pointer-events-none",children:c.jsx("div",{className:"px-3 py-1 text-[10px] md:text-xs font-bold font-mono tracking-widest bg-black/90 backdrop-blur text-white border-l-2 shadow-xl whitespace-nowrap",style:{borderLeftColor:e.color},children:e.label})})]}),rl=()=>{const e=T(h=>h.currentScene),t=T(h=>h.startWarp),{playClick:r,playHover:n}=Ie(),s=T(h=>h.lab01Config),i=T(h=>h.setLab01Config),a=T(h=>h.lab02Config),o=T(h=>h.setLab02Config),l=T(h=>h.lab03Config),u=T(h=>h.setLab03Config);if(!e.startsWith("lab"))return null;const d=()=>{r(),t("hub")};return c.jsxs("div",{className:"fixed top-1/2 left-8 -translate-y-1/2 z-30 pointer-events-auto",children:[e==="lab01"&&c.jsxs("div",{className:"w-72 bg-black/80 border border-cyan-500/50 p-6 rounded-lg backdrop-blur-md text-cyan-400 font-mono text-xs shadow-[0_0_30px_rgba(6,182,212,0.2)]",children:[c.jsxs("div",{className:"mb-6 border-b border-cyan-500/30 pb-2 font-bold flex justify-between tracking-widest",children:[c.jsx("span",{children:"PRISM_CONTROLLER"}),c.jsx("span",{className:"animate-pulse text-white",children:" STABLE"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-cyan-400 font-bold tracking-widest text-[10px]",children:"DISPERSION"}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:s.distort,onChange:h=>i({distort:parseFloat(h.target.value)}),onPointerDown:h=>h.stopPropagation(),className:"w-32 h-1 bg-cyan-900/50 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-cyan-400 hover:[&::-webkit-slider-thumb]:bg-cyan-300 transition-all border border-cyan-500/30"})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-purple-400 font-bold tracking-widest text-[10px]",children:"DATA FLOW"}),c.jsx("input",{type:"range",min:"0",max:"10",step:"0.1",value:s.speed,onChange:h=>i({speed:parseFloat(h.target.value)}),onPointerDown:h=>h.stopPropagation(),className:"w-32 h-1 bg-purple-900/50 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-400 hover:[&::-webkit-slider-thumb]:bg-purple-300 transition-all border border-purple-500/30"})]})]}),c.jsx("div",{className:"mt-6 text-[10px] opacity-50 text-center border-t border-cyan-500/20 pt-2 text-white",children:"CRYSTALLINE_OPTICS_V2.0"}),c.jsx("button",{onClick:d,onMouseEnter:n,className:"w-full mt-4 py-2 border border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/20 rounded transition-all font-mono text-xs tracking-widest bg-black/50",children:"[ WARP TO NEXUS ]"})]}),e==="lab02"&&c.jsxs("div",{className:"w-72 bg-black/80 border border-emerald-500/50 p-6 rounded-lg backdrop-blur-md text-emerald-400 font-mono text-xs shadow-[0_0_30px_rgba(16,185,129,0.2)]",children:[c.jsxs("div",{className:"mb-6 border-b border-emerald-500/30 pb-2 font-bold flex justify-between tracking-widest",children:[c.jsx("span",{children:"ECOSYSTEM_ENGINE"}),c.jsx("span",{className:"animate-pulse text-white",children:" ACTIVE"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center bg-emerald-500/10 p-3 rounded",children:[c.jsx("span",{className:"text-white opacity-80",children:"GRAVITY_FIELD"}),c.jsx("span",{className:a.zeroG?"text-cyan-400 font-bold":"text-emerald-500 opacity-50",children:a.zeroG?"[ZERO-G]":"[NORMAL]"})]}),c.jsx("button",{onClick:()=>{r(),a.zeroG?o({zeroG:!1,gravity:[0,-.5,0]}):o({zeroG:!0,gravity:[0,.2,0]})},onMouseEnter:n,className:`w-full py-3 border transition-all font-bold tracking-widest hover:scale-105 active:scale-95 ${a.zeroG?"bg-cyan-500 text-black border-cyan-400 shadow-[0_0_15px_rgba(6,182,212,0.5)]":"bg-transparent text-emerald-500 border-emerald-500 hover:bg-emerald-500 hover:text-black"}`,children:a.zeroG?"RESTORE GRAVITY":"INITIATE ZERO-G"}),c.jsx("div",{className:"text-[10px] opacity-70 mt-2 text-center text-white",children:"> INTERACT WITH ORGANIC MATTER"}),c.jsx("button",{onClick:d,onMouseEnter:n,className:"w-full mt-4 py-2 border border-emerald-500/50 text-emerald-400 hover:bg-emerald-500/20 rounded transition-all font-mono text-xs tracking-widest bg-black/50",children:"[ WARP TO NEXUS ]"})]})]}),e==="lab03"&&c.jsxs("div",{className:"w-72 bg-black/80 border border-purple-500/30 p-4 rounded-xl backdrop-blur-md shadow-[0_0_30px_rgba(139,92,246,0.3)]",children:[c.jsx("div",{className:"mb-4 border-b border-purple-500/30 pb-2 font-bold flex justify-between tracking-widest",children:c.jsx("span",{className:"text-purple-400",children:"SONIC_CONTROLS"})}),c.jsxs("div",{className:"flex gap-2 mb-4",children:[c.jsx("button",{onClick:()=>{r(),u("demo")},onMouseEnter:n,className:`flex-1 py-2 rounded font-mono text-xs transition-all cursor-pointer border ${l.mode==="demo"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_15px_#7c3aed]":"border-purple-500/30 text-purple-500 hover:bg-purple-900/30"}`,children:"DEMO_MODE"}),c.jsx("button",{onClick:()=>{r(),u("mic")},onMouseEnter:n,className:`flex-1 py-2 rounded font-mono text-xs transition-all cursor-pointer border ${l.mode==="mic"?"bg-cyan-600 border-cyan-500 text-white shadow-[0_0_15px_#0891b2]":"border-cyan-500/30 text-cyan-500 hover:bg-cyan-900/30"}`,children:"MIC_INPUT"})]}),c.jsx("button",{onClick:d,onMouseEnter:n,className:"w-full py-2 border border-white/30 text-white/70 hover:bg-white/10 hover:border-white/50 hover:text-white transition-all rounded shadow-lg cursor-pointer bg-black/50 text-xs font-mono tracking-widest",children:"[ WARP TO NEXUS ]"})]}),e==="lab04"&&c.jsx("div",{className:"absolute top-[80vh] left-[50vw] -translate-x-1/2 -translate-y-1/2 w-auto",children:c.jsx("button",{onClick:d,onMouseEnter:n,className:"px-6 py-2 bg-red-900/80 border border-red-500 rounded font-mono text-sm text-red-200 hover:bg-red-700 hover:text-white transition-all cursor-pointer shadow-[0_0_20px_rgba(239,68,68,0.8)] animate-pulse",children:"[ EMERGENCY EXIT ]"})})]})},nl=({onDismiss:e})=>c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},onClick:e,className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm pointer-events-auto cursor-pointer",children:c.jsxs(_.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:-20},transition:{delay:.2,type:"spring",damping:20},className:"text-center max-w-md px-8 py-10 border border-white/10 bg-black/80 rounded-2xl shadow-2xl",onClick:t=>t.stopPropagation(),children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white mb-2 font-orbitron tracking-wide",children:"WELCOME TO THE METAVERSE"}),c.jsxs("p",{className:"text-white/60 text-sm md:text-base mb-6 leading-relaxed",children:[" ",c.jsx("span",{className:"text-cyan-400 font-bold",children:""}),"   .",c.jsx("br",{})," ",c.jsx("span",{className:"text-yellow-400 font-bold",children:""}),"  ."]}),c.jsx("button",{onClick:e,className:"px-6 py-2 bg-cyan-500/20 border border-cyan-500/50 text-cyan-400 rounded-full text-sm font-bold tracking-wider hover:bg-cyan-500/30 transition-all",children:" "}),c.jsx("p",{className:"text-white/30 text-[10px] mt-4 animate-pulse",children:"   "})]})}),sl=()=>{const e=T(l=>l.currentScene),t=T(l=>l.setScene),r=T(l=>l.isMuted),n=T(l=>l.toggleMute),s=T(l=>l.performanceMode),[i,a]=g.useState(!1);g.useEffect(()=>{e==="hub"?localStorage.getItem("hub_visited")||a(!0):a(!1)},[e]);const o=()=>{a(!1),localStorage.setItem("hub_visited","true")};return g.useEffect(()=>{const l=u=>{u.key==="Escape"&&e!=="boot"&&e!=="hub"&&t("hub")};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[e,t]),c.jsxs("div",{className:"fixed inset-0 pointer-events-none z-40 text-xs font-mono select-none",children:[c.jsx(mt,{children:i&&c.jsx(nl,{onDismiss:o})}),e==="history"&&c.jsx(Zo,{onClose:()=>t("hub")}),e!=="boot"&&e!=="hub"&&e!=="history"&&c.jsxs("button",{onClick:()=>t("hub"),className:"fixed top-24 left-6 pointer-events-auto flex items-center gap-2 group text-white/70 hover:text-white transition-colors",children:[c.jsx("span",{className:"w-8 h-px bg-white/30 group-hover:bg-accent transition-colors"}),"< RETURN TO SYSTEM [ESC]"]}),c.jsx(Jo,{}),c.jsx(rl,{}),c.jsxs("div",{className:"fixed top-20 right-6 md:top-24 md:right-10 flex flex-col gap-3 pointer-events-auto z-50 items-end",children:[c.jsxs("button",{onClick:n,className:"px-4 py-3 md:px-4 md:py-2 bg-black/50 backdrop-blur-md rounded-full border border-white/10 hover:border-accent text-white transition-colors flex items-center gap-3 justify-between min-w-[120px] md:min-w-[140px] shadow-lg focus:ring-2 focus:ring-accent/50 active:scale-95","aria-label":"Toggle Audio",children:[c.jsx("span",{className:"text-[10px] md:text-xs font-bold tracking-wider",children:"AUDIO"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] text-white/50",children:r?"OFF":"ON"}),c.jsx("div",{className:`w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${r?"bg-red-500":"bg-green-500 animate-pulse"}`})]})]}),c.jsxs("button",{onClick:()=>{const l=s==="high"?"low":"high";T.getState().setPerformanceMode(l)},className:"px-4 py-3 md:px-4 md:py-2 bg-black/50 backdrop-blur-md rounded-full border border-white/10 hover:border-accent text-white transition-colors flex items-center gap-3 justify-between min-w-[120px] md:min-w-[140px] shadow-lg focus:ring-2 focus:ring-accent/50 active:scale-95","aria-label":"Toggle Performance Mode",children:[c.jsx("span",{className:"text-[10px] md:text-xs font-bold tracking-wider",children:"PERF"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] text-white/50",children:s==="high"?"HIGH":"LOW"}),c.jsx("div",{className:`w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${s==="low"?"bg-yellow-500":"bg-cyan-500 animate-pulse"}`})]})]})]}),e==="hub"&&c.jsx(el,{}),c.jsxs("div",{className:"hidden md:block fixed bottom-10 left-10 text-xs text-muted font-mono mix-blend-difference",children:["SYSTEM: ONLINE ",c.jsx("br",{}),"FPS: 60 ",c.jsx("br",{}),"COORD: [34.5, 127.0]"]})]})},il=()=>{const e=T(l=>l.hoverState),[t,r]=g.useState({x:0,y:0}),[n,s]=g.useState(!1),[i,a]=g.useState(!1),o=n||e;return g.useEffect(()=>{const l=d=>{r({x:d.clientX,y:d.clientY}),i||a(!0)};window.addEventListener("mousemove",l);const u=d=>{d.target.tagName==="A"||d.target.tagName==="BUTTON"||d.target.closest("a")||d.target.closest("button")?s(!0):s(!1)};return window.addEventListener("mouseover",u),()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseover",u)}},[i]),i?c.jsx(_.div,{className:"fixed top-0 left-0 pointer-events-none z-[9999] hidden md:flex items-center justify-center mix-blend-difference",animate:{x:t.x,y:t.y,translateX:"-50%",translateY:"-50%",width:o?48:32,height:o?48:32,backgroundColor:o?"rgba(6, 182, 212, 0.1)":"rgba(0, 0, 0, 0)",borderColor:o?"#06b6d4":"#e5e5e5",borderRadius:o?"8px":"50%"},style:{borderWidth:"1px",borderStyle:"solid"},transition:{type:"spring",stiffness:500,damping:28,mass:.5},children:c.jsx(_.div,{className:"w-1 h-1 bg-white rounded-full",animate:{scale:o?0:1,opacity:o?0:1}})}):null},al=()=>{const e=T(a=>a.currentScene),t=T(a=>a.isMuted),r=g.useRef(null),n=g.useRef(null),s={boot:"/sounds/hub_theme.mp3",hub:"/sounds/hub_theme.mp3",profile:"/sounds/hub_theme.mp3",lab01:"/sounds/lab01_theme.mp3",lab02:"/sounds/lab02_theme.mp3",lab03:"/sounds/lab03_theme.mp3",lab04:"/sounds/lab04_theme.mp3",contact:"/sounds/hub_theme.mp3"},i=async a=>{let o=s[a]||s.hub;if(a.startsWith("lab01")?o=s.lab01:a.startsWith("lab02")?o=s.lab02:a.startsWith("lab03")?o=s.lab03:a.startsWith("lab04")&&(o=s.lab04),n.current===o)return;r.current&&r.current.pause(),n.current=o;const l=new Audio(o);l.loop=!0,l.volume=t?0:.4;try{await l.play(),r.current=l}catch(u){console.warn("Audio Autoplay blocked, waiting for interaction",u)}};return g.useEffect(()=>{i(e)},[e]),g.useEffect(()=>{r.current&&(r.current.volume=t?0:.4,!t&&r.current.paused&&r.current.play().catch(a=>console.warn("Play failed",a)))},[t]),g.useEffect(()=>{const a=()=>{r.current&&r.current.paused&&!t&&r.current.play().catch(o=>console.log("Audio resume failed",o))};return window.addEventListener("click",a),()=>window.removeEventListener("click",a)},[t]),null},ol=()=>{const e=T(t=>t.setScene);return c.jsx("section",{className:"min-h-screen flex items-center justify-center relative z-10 pointer-events-none pt-20",children:c.jsx("div",{className:"container mx-auto px-6 text-center pointer-events-auto",children:c.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[c.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white/5 border border-cyan-500/30 rounded-full mb-6",children:[c.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-xs text-cyan-400 font-mono",children:"5 PM   CTS"})]}),c.jsx("h2",{className:"text-xl md:text-2xl font-mono text-cyan-400 mb-4 tracking-widest",children:", "}),c.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-6 leading-tight",children:["Metaverse & XR ",c.jsx("br",{}),c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-500 to-pink-500",children:"Project Manager"})]}),c.jsxs("p",{className:"text-gray-400 text-lg md:text-xl max-w-2xl mx-auto mb-8 leading-relaxed",children:[", XR,        .",c.jsx("br",{}),"  UI/UX      ."]}),c.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-10",children:[c.jsx("span",{className:"px-3 py-1 bg-yellow-500/10 border border-yellow-500/30 rounded-full text-xs text-yellow-400 font-mono",children:" 2024 ICT Award Grand Prize"}),c.jsx("span",{className:"px-3 py-1 bg-purple-500/10 border border-purple-500/30 rounded-full text-xs text-purple-400 font-mono",children:" 2024  "})]}),c.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[c.jsx("button",{onClick:()=>document.getElementById("work")?.scrollIntoView({behavior:"smooth"}),className:"px-8 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all transform hover:scale-105",children:" "}),c.jsx("button",{onClick:()=>e("contact"),className:"px-8 py-3 border border-white/30 text-white font-bold rounded-full hover:bg-white/10 transition-all backdrop-blur-sm",children:""})]})]})})})},ll=()=>c.jsx("section",{className:"py-20 relative z-10 text-white",children:c.jsxs("div",{className:"container mx-auto px-6 max-w-4xl",children:[c.jsxs(_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[c.jsx("h2",{className:"text-sm font-mono text-cyan-400 mb-2 tracking-widest",children:"ABOUT ME"}),c.jsxs("h3",{className:"text-3xl md:text-4xl font-bold leading-tight",children:["   ",c.jsx("br",{}),c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"  PM"})]})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-12 text-gray-300 leading-relaxed text-lg",children:[c.jsxs(_.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.2},children:[c.jsxs("h4",{className:"text-white font-bold text-xl mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 bg-cyan-500 rounded-full"}),"  "]}),c.jsx("p",{className:"mb-6",children:"       ,         ."}),c.jsx("p",{children:"  , ,            ."})]}),c.jsxs(_.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.4},children:[c.jsxs("h4",{className:"text-white font-bold text-xl mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"  "]}),c.jsx("p",{className:"mb-6",children:'"    "  ,       .'}),c.jsx("p",{children:"          ,       ."})]})]}),c.jsxs(_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.6},className:"mt-16 p-8 bg-white/5 border border-white/10 rounded-2xl text-center backdrop-blur-sm",children:[c.jsx("p",{className:"text-xl font-medium text-white mb-2",children:'"      ,"'}),c.jsx("p",{className:"text-cyan-400",children:"      ."}),c.jsxs(_.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.2},className:"mt-8 bg-white/5 p-8 rounded-2xl border border-white/10 backdrop-blur-sm text-left",children:[c.jsxs("h4",{className:"text-white font-bold text-xl mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Multiverse Architect:  "]}),c.jsx("p",{className:"mb-6 leading-relaxed",children:"     , **  (Universe)**  .  ,        (Project) ,        ."}),c.jsx("p",{className:"text-gray-300 leading-relaxed",children:"       , **[Boot - Hub - Lab]**     .             .     **  **,   ."})]})]})]})});const cl=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ul=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Pr=e=>{const t=ul(e);return t.charAt(0).toUpperCase()+t.slice(1)},Nn=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),dl=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var hl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fl=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...o},l)=>g.createElement("svg",{ref:l,...hl,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Nn("lucide",s),...!i&&!dl(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,d])=>g.createElement(u,d)),...Array.isArray(i)?i:[i]]));const Q=(e,t)=>{const r=g.forwardRef(({className:n,...s},i)=>g.createElement(fl,{ref:i,iconNode:t,className:Nn(`lucide-${cl(Pr(e))}`,`lucide-${e}`,n),...s}));return r.displayName=Pr(e),r};const pl=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ml=Q("award",pl);const vl=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],On=Q("briefcase",vl);const gl=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xl=Q("calendar",gl);const yl=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bl=Q("chevron-right",yl);const wl=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Tl=Q("crown",wl);const El=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Sl=Q("lightbulb",El);const Cl=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Al=Q("medal",Cl);const Ml=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Il=Q("star",Ml);const Rl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_l=Q("target",Rl);const Nl=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ol=Q("trophy",Nl);const jl=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pl=Q("users",jl),Ll=()=>{const e=[{icon:c.jsx(On,{className:"w-8 h-8 text-cyan-400"}),title:"Project Management",desc:", (RFP)   ,  ,    , Agile/Waterfall  "},{icon:c.jsx(_l,{className:"w-8 h-8 text-purple-400"}),title:"Metaverse & XR Planning",desc:"    ,  (IA/SB) ,     "},{icon:c.jsx(Pl,{className:"w-8 h-8 text-pink-400"}),title:"Communication & Tools",desc:"Jira/Redmine/Slack  , GA/SQL  , /  "},{icon:c.jsx(Sl,{className:"w-8 h-8 text-emerald-400"}),title:"Technical Understanding",desc:"Three.js/WebGL  , (Token/NFT)  , UI/UX   "}];return c.jsx("section",{className:"py-20 relative z-10 text-white",children:c.jsxs("div",{className:"container mx-auto px-6",children:[c.jsx(_.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-4xl font-bold mb-16 text-center",children:c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-500",children:"Core Expertise"})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,r)=>c.jsxs(_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.1},className:"bg-white/5 backdrop-blur-sm border border-white/10 p-8 rounded-xl hover:bg-white/10 transition-all hover:scale-105",children:[c.jsx("div",{className:"mb-6 p-4 bg-black/30 rounded-full w-fit mx-auto border border-white/5",children:t.icon}),c.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:t.title}),c.jsx("p",{className:"text-gray-400 text-sm text-center leading-relaxed break-keep",children:t.desc})]},r))})]})})},kl=()=>{const e=[{company:"",team:"CTS(Culture Technology Squad)  PM",period:"2023.08 - ",description:"/XR       (Project Leader)",achievements:["KOCCA R&D 'Hanok-meta'  PL:      ( A, 3.75)","TIPA R&D     PM: //    (7.5)","    PM: VR360        (1.37)","     PM:     4  (1.42)","KISTi  XR   : -       ","   ZEP  Z-World  PM: 31 /    "]},{company:"",team:"  ",period:"2021.06 - 2023.06",description:"/        ",achievements:["1o1.GG     PM:         (5)","  'Holiday'  PM: (Token/NFT)    (Whitepaper) ","NFT 'Cyber-holic'  PM:      ,  ","        "]},{company:" ",team:"",period:"2018.03 - 2019.02",description:"    ,   ",achievements:["        ","        "]}];return c.jsx("section",{className:"py-20 relative z-10 text-white",children:c.jsxs("div",{className:"container mx-auto px-6 max-w-5xl",children:[c.jsxs(_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex flex-col md:flex-row items-end gap-6 mb-16 border-b border-white/10 pb-8",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-300",children:"Experience"}),c.jsx("span",{className:"text-gray-400 font-mono text-sm mb-2",children:"// TOTAL EXPERIENCE: 5 YEARS"})]}),c.jsx("div",{className:"space-y-12",children:e.map((t,r)=>c.jsxs(_.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:r*.1},className:"relative pl-8 md:pl-0",children:[c.jsx("div",{className:"hidden md:block absolute left-0 top-0 bottom-0 w-px bg-white/10 -ml-8 md:ml-0 md:left-[200px]"}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[c.jsxs("div",{className:"md:w-[200px] flex-shrink-0 md:text-right pt-2",children:[c.jsxs("div",{className:"flex items-center gap-2 md:justify-end text-cyan-400 font-mono font-bold mb-1",children:[c.jsx(xl,{className:"w-4 h-4"}),c.jsx("span",{children:t.period})]}),c.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:t.company}),c.jsx("p",{className:"text-sm text-gray-400 mb-2",children:t.team})]}),c.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8 backdrop-blur-sm hover:bg-white/10 transition-colors",children:[c.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[c.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg text-blue-400",children:c.jsx(On,{className:"w-6 h-6"})}),c.jsx("div",{children:c.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:t.description})})]}),c.jsx("ul",{className:"space-y-3",children:t.achievements.map((n,s)=>c.jsxs("li",{className:"flex items-start gap-3 text-gray-300 text-sm leading-relaxed",children:[c.jsx(bl,{className:"w-4 h-4 text-cyan-500 mt-1 flex-shrink-0"}),c.jsxs("span",{children:[c.jsxs("strong",{className:"text-white/80 mr-1",children:[n.split(":")[0],":"]}),n.split(":")[1]]})]},s))})]})]})]},r))})]})})},Dl=()=>{const e=[{icon:c.jsx(Tl,{className:"w-8 h-8 text-yellow-400"}),title:"Grand Prize: Digital Comm.",project:"   ",org:"2024 ICT Awards",desc:"   Grand Prize "},{icon:c.jsx(Ol,{className:"w-8 h-8 text-orange-400"}),title:"Best Experience Design",project:"   ",org:"2024 Web Award Korea",desc:"   (  )"},{icon:c.jsx(Il,{className:"w-8 h-8 text-purple-400"}),title:"Metaverse Sector Grand Prize",project:"  ",org:"2024 Web Award Korea",desc:"  (    )"},{icon:c.jsx(Al,{className:"w-8 h-8 text-pink-400"}),title:"Cultural Sector Integrated Grand Prize",project:" : ",org:"2024 Web Award Korea",desc:"  (   )"},{icon:c.jsx(ml,{className:"w-8 h-8 text-blue-400"}),title:"Digital Tech Innovation Bronze",project:" : ",org:"2024 ICT Award Korea",desc:"  Bronze Prize "}];return c.jsx("section",{className:"py-20 relative z-10 text-white",children:c.jsxs("div",{className:"container mx-auto px-6",children:[c.jsx(_.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-4xl font-bold mb-16 text-center",children:c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-red-500",children:"Honors & Awards"})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:e.map((t,r)=>c.jsxs(_.div,{initial:{opacity:0,x:r%2===0?-20:20},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"bg-zinc-900/50 border border-white/10 p-8 rounded-2xl flex items-start gap-6 hover:border-yellow-500/50 transition-colors group",children:[c.jsx("div",{className:"bg-white/10 p-3 rounded-lg group-hover:bg-yellow-500/20 transition-colors",children:t.icon}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:t.title}),c.jsx("p",{className:"text-sm text-cyan-400 font-mono mb-1",children:t.project}),c.jsx("p",{className:"text-sm text-yellow-600 font-bold mb-3",children:t.org}),c.jsx("p",{className:"text-gray-400 leading-relaxed text-sm",children:t.desc})]})]},r))})]})})},Ul=({className:e=""})=>{const t=g.useRef(null),r=g.useRef(!1);return g.useEffect(()=>{if(!(r.current||!t.current))try{typeof window<"u"&&window.adsbygoogle&&((window.adsbygoogle=window.adsbygoogle||[]).push({}),r.current=!0)}catch(n){console.log("[AdSense]    :",n)}},[]),c.jsx("div",{className:`ad-container flex justify-center items-center py-6 ${e}`,children:c.jsx("ins",{ref:t,className:"adsbygoogle",style:{display:"block",minHeight:"90px",width:"100%",maxWidth:"728px"},"data-ad-client":"ca-pub-5874227298630347","data-ad-slot":"auto","data-ad-format":"auto","data-full-width-responsive":"true"})})},Bl=()=>{const e=T(n=>n.setScene),{playClick:t,playHover:r}=Ie();return c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-30 overflow-y-auto overflow-x-hidden bg-black/30 backdrop-blur-sm pointer-events-auto",children:c.jsx("div",{className:"w-full min-h-screen text-white selection:bg-primary/30 pb-32",children:c.jsxs("div",{className:"pt-0",children:[c.jsx("section",{id:"hero",children:c.jsx(ol,{})}),c.jsx("section",{id:"about",children:c.jsx(ll,{})}),c.jsx("section",{id:"work",children:c.jsx(kl,{})}),c.jsx("section",{id:"expertise",children:c.jsx(Ll,{})}),c.jsx("section",{id:"achievements",children:c.jsx(Dl,{})}),c.jsx(Ul,{className:"bg-black/20 border-y border-white/5"}),c.jsxs("div",{className:"py-20 text-center border-t border-white/5 bg-black",children:[c.jsx("h2",{className:"text-3xl font-bold mb-6 text-white",children:"Ready to Collaborate?"}),c.jsx("p",{className:"text-gray-400 mb-8 mb-12",children:"     ."}),c.jsx("button",{onClick:()=>{t(),e("contact")},onPointerEnter:r,className:"px-8 py-4 bg-primary text-black font-bold rounded-full hover:bg-primary/80 transition-all transform hover:scale-105",children:"Contact Me (Portal)"}),c.jsx("div",{className:"mt-12 text-xs text-gray-600 font-mono",children:"SYSTEM STATUS: OPTIMAL | LOGIN: GUEST"})]})]})})})},Fl=()=>{const e=T(d=>d.missionModalData),t=T(d=>d.closeMissionModal),r=T(d=>d.warpTo),{playHover:n,playClick:s}=Ie();if(g.useEffect(()=>{const d=h=>{h.key==="Escape"&&t()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t]),!e)return null;const{lab:i,config:a,warpPos:o}=e,l=i.details||{},u=()=>{s(),t(),r(a.target,o)};return c.jsx(mt,{children:e&&c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm pointer-events-auto",onClick:t,children:c.jsxs(_.div,{initial:{scale:.85,opacity:0,y:30},animate:{scale:1,opacity:1,y:0},exit:{scale:.85,opacity:0,y:30},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-[90vw] max-w-4xl max-h-[85vh] flex flex-col md:flex-row overflow-hidden rounded-2xl border border-white/10 bg-black/95 shadow-2xl",onClick:d=>d.stopPropagation(),style:{boxShadow:`0 0 60px ${a.color}30, inset 0 0 30px ${a.color}10`},children:[c.jsxs("div",{className:"w-full md:w-1/3 border-b md:border-b-0 md:border-r border-white/10 p-6 md:p-8 flex flex-col relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`radial-gradient(circle at center, ${a.color}, transparent)`}}),c.jsx("div",{className:"text-3xl md:text-4xl font-black font-orbitron mb-1 tracking-tighter",style:{color:a.color},children:i.id}),c.jsxs("div",{className:"text-xs font-mono text-white/50 mb-6 tracking-widest",children:["STATUS: ",c.jsx("span",{className:"text-emerald-400",children:i.status||"ACTIVE"})]}),c.jsx("div",{className:"flex-1 min-h-[150px] rounded-xl border border-white/10 bg-black/50 relative overflow-hidden mb-4 group",children:l.media&&l.media.length>0?c.jsx("img",{src:l.media[0],alt:i.name,className:"w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity duration-500"}):c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-white/20 font-mono text-xs text-center p-4",children:["[ NO VISUAL DATA ]",c.jsx("br",{}),"SCANNING..."]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs font-mono",children:[c.jsxs("div",{className:"p-2 border border-white/10 rounded bg-white/5",children:[c.jsx("div",{className:"text-white/40 mb-1",children:"TECH"}),c.jsx("div",{className:"text-white font-bold",children:i.tech})]}),c.jsxs("div",{className:"p-2 border border-white/10 rounded bg-white/5",children:[c.jsx("div",{className:"text-white/40 mb-1",children:"TYPE"}),c.jsx("div",{className:"text-white font-bold text-[10px]",children:i.type})]})]})]}),c.jsxs("div",{className:"flex-1 p-6 md:p-8 flex flex-col relative z-10 overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl md:text-3xl font-bold font-orbitron text-white mb-1",children:i.name}),c.jsx("h3",{className:"text-sm md:text-base text-white/60 font-rajdhani",children:i.description})]}),c.jsx("button",{onClick:()=>{s(),t()},onMouseEnter:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/50 hover:text-white",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.longDescription&&c.jsx("div",{className:"text-sm text-white/70 leading-relaxed mb-6",children:c.jsx("p",{children:l.longDescription})}),l.features&&l.features.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-xs font-bold font-orbitron text-white/80 mb-3 border-b border-white/10 pb-2 uppercase flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-3 bg-emerald-500 rounded-full"}),"Mission Objectives"]}),c.jsx("ul",{className:"grid grid-cols-1 gap-2",children:l.features.map((d,h)=>c.jsxs("li",{className:"flex items-center text-xs text-white/60 bg-white/5 px-3 py-2 rounded border border-white/5",children:[c.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-2 flex-shrink-0"}),d]},h))})]}),l.techStack&&l.techStack.length>0&&c.jsxs("div",{className:"mb-auto",children:[c.jsxs("h4",{className:"text-xs font-bold font-orbitron text-white/80 mb-3 border-b border-white/10 pb-2 uppercase flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-3 bg-blue-500 rounded-full"}),"Technical Schematics"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:l.techStack.map((d,h)=>c.jsx("span",{className:"px-2 py-1 text-[10px] font-mono rounded-full border border-blue-500/30 bg-blue-500/10 text-blue-300",children:d},h))})]}),c.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3 border-t border-white/10 pt-4",children:[c.jsx("button",{onClick:t,onMouseEnter:n,className:"px-4 py-2 rounded text-xs font-bold text-white/50 hover:text-white transition-colors uppercase font-mono tracking-wider",children:"Close"}),c.jsxs("button",{onClick:u,onMouseEnter:n,className:"px-6 py-2 rounded text-xs font-bold tracking-widest uppercase font-orbitron flex items-center gap-2 transition-all hover:scale-105",style:{background:a.color,color:"#000",boxShadow:`0 0 20px ${a.color}50`},children:[c.jsx("span",{children:"Enter Sector"}),c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]})]},"mission-modal-content")},"mission-modal-backdrop")})},jt=[{id:"log-001",title:" ''  ''",date:"2025-12-01",tags:["","",""],summary:"    '    '    .",content:`## 1. Problem Definition ( )

       **"  "** .
- (Notion)  ,  '' .
- PDF   , '' .

 .
**"  (Identity)      ?"**

## 2. Strategic Solution ( )

    **'  '**  .

> **"Experience is the new Resume."**
> (  .)

     (UX Strategy) .
1.  **Exploration ()**:    ,       .
2.  **Immersion ()**:   ,       .
3.  **Narrative ()**:     ,         .

## 3. The Core Concept: Solar System

  (Solar System) .
- **Central Star (Core)**:    .
- **Orbiting Planets (Skills)**:      .
- **Gravity (Influence)**:     (Reference).

      **'  '** **'  '**    .`},{id:"log-002",title:" :   ",date:"2025-12-03",tags:["UX","",""],summary:"  ,    'Form Follows Function' .",content:`## Design Philosophy: Form Follows Function

  3D   .
       ** **   .

## 1. Lab-01: The Prism (Capability)
- **Metaphor**: **"  "**
- **Design Intent**:  (White Light)    (Skills)   .
- **Visual logic**:  (Icosahedron) .     '' '' ,      ' ' .

## 2. Lab-02: The Terrarium (Projects)
- **Metaphor**: **" "**
- **Design Intent**:      .    **''**.
- **Visual Logic**:     .      (Gamification)  , **" "**  .

## 3. Lab-03: The Resonance (Audio/Sense)
- **Metaphor**: **" "**
- **Design Intent**:  (Logic)  (Sense) .       .
- **Visual Logic**:     .  (Frequency)      .   (Trend/User Feedback)     .

## Conclusion
      .
   **, , **  .`},{id:"log-003",title:"React Three Fiber:    ",date:"2025-12-06",tags:["","R3F","Three.js"],summary:"       .",content:`## Decision Matrix ( )

   , 3D        .

|   |  (Pros) |  (Cons) |  |
| :--- | :--- | :--- | :---: |
| **Pure Three.js** |  ,      |  , React     |  |
| **Spline / Vectary** |    3D   |        | X |
| **R3F (React Three Fiber)** | React   State     | Three.js       | **O** |

## Why R3F? ( )

### 1. "Declarative ()"  
 Three.js  (\`scene.add(mesh)\`)      .
R3F \`<Mesh />\`    , **UI  3D  **   .   **' '**     .

### 2. Ecosystem Integration ( )
- **Zustand**:  ,  ,      2D/3D    .
- **Drei**: \`Float\`, \`Environment\`, \`OrbitControls\`      '  '  .
- **Post-Processing**:  (Bloom, Glitch)    .

 R3F **" React  3D  "**,         .`},{id:"log-004",title:"  : High vs Low ",date:"2025-12-10",tags:["","",""],summary:"  RTX 4090.        .",content:`## The Bottleneck ( )

 (Bloom, Volumetric Light)    .
    (Intel Iris)  15FPS   ''  .

  .
1.     ? ()
2.    ? ()

 **"  (Adaptive Performance)"** 3  .

## Optimization Strategy ( )

### Tier 1: High Quality (Desktop/GPU)
- **Post-Processing ON**: Bloom( ), Vignette( ), Chromatic Aberration( ) .
- **Full Particle System**: 20,000   (Nebula) .
- **High-Res Textures**: 4K   .
- ** **:    "Wow Point".

### Tier 2: Performance Mode (Mobile/Low-Spec)
- **Post-Processing OFF**:      GPU  80% .
- **Lightweight Particles**:   5,000 ,    .
- **Resource Management**:         \`dispose()\`   .
- ** **:   60FPS    .

## Lesson Learned
  ,     ** **.
**"    "**    ,        .`},{id:"log-005",title:" :  ",date:"2025-12-14",tags:["UX","",""],summary:" (Latence) ''  ''  UX .",content:`## User Psychology ( )

  3   40% . 3D      .
 ' (Valley of Death)'    ?

 **" (Loading Bar)  "**  .
 **" (Boot Sequence)"** .

## Narrative Loading ( )

 "Loading... 45%"  ,  <> <>     .

1.  **System Initialization**:     " "  .
2.  **Random Themes**:     (Quantum, Genesis, Neural, Matrix)  .    "  ?"   .
3.  **Seamless Transition**:   ,       . (Fade-out & Zoom-in)

## Result
  '  '  **' '**  .
    UX  .`},{id:"log-007",title:"The Silicon Synapse: AI '(Resonance)'",date:"2025-12-17",tags:["AI","Co-Reasoning",""],summary:"AI  ' '  .   ' '.",content:`## Paradigm Shift in Development

  AI(ChatGPT, Claude)  "  " .
   **" (Senior Engineer)"** **" (Debate Partner)"** .
      **'Co-Reasoning ( )'**  .

## The Workflow: How We Worked

1.  **Director () **: **"(What)"** **"(Why)"** .
    - *"   .   ,       .       ."* (   )

2.  **AI () **: **"(How)"**  .
    - *" Icosahedron Geometry 3 (Clone),    Material(Wireframe, Points) .  \`useFrame\`  \`config.distort\`   \`scale\`  '(Exploded View)'  ."*

3.  **Iteration ()**:
    - Director: *" .    ,        ."*
    - AI: *"Matrix4          ."*

## Insight
AI   **'(Prompting)'**  **'(Communication)'** .
      , AI     .
   **'-AI  '**  .`},{id:"log-010",title:"Lab-02: '' '' (Identity Crisis)",date:"2025-12-20",tags:["","",""],summary:"[PROJECT] The Terrarium   '(Fun)' '(Proof)'  .",content:`## The Dilemma ()

Lab-02 'The Terrarium'     .
 ,    .

**"    ?    ?"**

    ' ',       .
   ''   .

## Resolution: Gamification as a Skill ()

   **'  (Complex State Management) '** .

- **(Surface)**:    .
- **(Under the hood)**: 
    - \`Zustand\`   (Gold/Diamond)  .
    -   (Gacha)  .
    -  (LocalStorage)   (Persistence).

## Conclusion
  ,  **'(Rule)'** **'(Economy)'**     .
 '' (Sugar-coating)  ' '  .
  . **   **.`},{id:"log-008",title:"The Prism Paradox:   ",date:"2025-12-23",tags:["","",""],summary:" 3 ,    . '' .",content:`## The Journey to "Crystalline Echoes"

Lab-01(Prism)    3  () .
    ,       .

### Phase 1: The Literal Beam ( )
- ****:  'Skill'      .
- ****: **[]**.  1 . 2000   . " "  .

### Phase 2: The Quantum Nebula ( )
- ****:      (Nebula)   .
- ****: **[]**.  , **"  ?"**    .         . **(Probabilty) **.

### Phase 3: Crystalline Echoes ()
- ****: **"  ,  ."**
-  (Icosahedron) **   **  3  .
-    (Counter-Rotation)      .
- ****: **[]**.         .

## Review
  ' '   .
**"  ?"**      .
3      .`},{id:"log-011",title:"Lab-04:    (Embracing Glitch)",date:"2025-12-25",tags:["","",""],summary:"[PROJECT] The Glitch:    '' ?",content:`## The Fear of Imperfection (  )

Lab-04  ,  ,   ' (Glitch)' .
     .
**"    ?"**  .

## Concept: Debugging is creating

 (Development) 80% (Debugging).
      .
 **'   '**     .

- **Visual Concept**:     '  ' .
- **Sound Design**:    '  ' .

## The Message
    .
**"  .      ,     ."**
    (Attitude).`},{id:"log-006",title:"Cinematic Multiverse:  ",date:"2025-12-28",tags:["","",""],summary:"   .   '(Beta)' .",content:`## Future Roadmap

   **Phase 36** .    .
         .

### 1. Hyperspace Navigation ( )
-     Fade-in/out.
-    ,       **(Seamless) **  .

### 2. Multi-User Connection ( )
-   , WebSocket       '(Ghost)'  .
- "     " (Presence)  .

### 3. Integrated CMS
- (DevLog)  JSON  , Headless CMS(Strapi )        .

## The Director's Vision
 **' '**   .
       ,      .
**"    ."** 
      .`},{id:"log-009",title:"The Director:  ",date:"2025-12-30",tags:["","",""],summary:"AI  ,  '(Architect)' '(Conductor)'  .",content:`## The Changing Landscape ( )

 AI  " " .
        .
 " " ,   **" "** .

## The New Role: Cinematic Director

   (SB)  ' ',
    **' '**.

1.  **Scenario (User Story)**:       .
2.  **Directing (Prompting)**: AI , AI      .
3.  **Editing (Curating)**:        .

## My Definition
      ' ' 'PM'  .
 **(Space), (Time), (Narrative)**  
**'Cinematic Metaverse Director'**.

    ,    .

**"Reality is just a suggestion. Welcome to my version of it."**`}],ze={:"#a855f7",:"#d8b4fe",:"#6366f1",:"#ec4899",:"#db2777",:"#be185d",PM:"#a855f7",:"#9333ea",:"#4f46e5",:"#c026d3",:"#f59e0b",:"#d97706",:"#b45309",:"#ef4444",AI:"#06b6d4","Co-Reasoning":"#22d3ee",:"#67e8f9","R&R":"#0891b2",:"#0eaa9f","Tech Art":"#f472b6",Shader:"#fb7185","Three.js":"#ffffff",:"#94a3b8",UX:"#22c55e",:"#16a34a",:"#15803d",:"#3b82f6",:"#eab308",:"#ca8a04",:"#2563eb",:"#f59e0b",:"#d97706",:"#b45309",:"#f43f5e",:"#fda4af",:"#be123c",:"#881337"},jn=!(typeof navigator>"u")&&navigator.product==="ReactNative",Pn={timeout:jn?6e4:12e4},zl=function(e){const t={...Pn,...typeof e=="string"?{url:e}:e};if(t.timeout=Ln(t.timeout),t.query){const{url:r,searchParams:n}=(function(s){const i=s.indexOf("?");if(i===-1)return{url:s,searchParams:new URLSearchParams};const a=s.slice(0,i),o=s.slice(i+1);if(!jn)return{url:a,searchParams:new URLSearchParams(o)};if(typeof decodeURIComponent!="function")throw new Error("Broken `URLSearchParams` implementation, and `decodeURIComponent` is not defined");const l=new URLSearchParams;for(const u of o.split("&")){const[d,h]=u.split("=");d&&l.append(Lr(d),Lr(h||""))}return{url:a,searchParams:l}})(t.url);for(const[s,i]of Object.entries(t.query)){if(i!==void 0)if(Array.isArray(i))for(const o of i)n.append(s,o);else n.append(s,i);const a=n.toString();a&&(t.url=`${r}?${a}`)}}return t.method=t.body&&!t.method?"POST":(t.method||"GET").toUpperCase(),t};function Lr(e){return decodeURIComponent(e.replace(/\+/g," "))}function Ln(e){if(e===!1||e===0)return!1;if(e.connect||e.socket)return e;const t=Number(e);return isNaN(t)?Ln(Pn.timeout):{connect:t,socket:t}}const Hl=/^https?:\/\//i,$l=function(e){if(!Hl.test(e.url))throw new Error(`"${e.url}" is not a valid URL`)};function kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const Gl=["request","response","progress","error","abort"],kr=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function Dn(e,t){const r=[],n=kr.reduce((i,a)=>(i[a]=i[a]||[],i),{processOptions:[zl],validateOptions:[$l]});function s(i){const a=Gl.reduce((p,v)=>(p[v]=(function(){const f=Object.create(null);let y=0;return{publish:function(w){for(const b in f)f[b](w)},subscribe:function(w){const b=y++;return f[b]=w,function(){delete f[b]}}}})(),p),{}),o=(p=>function(v,f,...y){const w=v==="onError";let b=f;for(let x=0;x<p[v].length&&(b=(0,p[v][x])(b,...y),!w||b);x++);return b})(n),l=o("processOptions",i);o("validateOptions",l);const u={options:l,channels:a,applyMiddleware:o};let d;const h=a.request.subscribe(p=>{d=t(p,(v,f)=>((y,w,b)=>{let x=y,A=w;if(!x)try{A=o("onResponse",w,b)}catch(N){A=null,x=N}x=x&&o("onError",x,b),x?a.error.publish(x):A&&a.response.publish(A)})(v,f,p))});a.abort.subscribe(()=>{h(),d&&d.abort()});const m=o("onReturn",a,u);return m===a&&a.request.publish(u),m}return s.use=function(i){if(!i)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof i=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(i.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return kr.forEach(a=>{i[a]&&n[a].push(i[a])}),r.push(i),s},s.clone=()=>Dn(r,t),e.forEach(s.use),s}var Dr,Ur,Vl=kn((function(){if(Ur)return Dr;Ur=1;var e=function(r){return r.replace(/^\s+|\s+$/g,"")},t=function(r){return Object.prototype.toString.call(r)==="[object Array]"};return Dr=function(r){if(!r)return{};for(var n=Object.create(null),s=e(r).split(`
`),i=0;i<s.length;i++){var a=s[i],o=a.indexOf(":"),l=e(a.slice(0,o)).toLowerCase(),u=e(a.slice(o+1));typeof n[l]>"u"?n[l]=u:t(n[l])?n[l].push(u):n[l]=[n[l],u]}return n}})());let qt=class{onabort;onerror;onreadystatechange;ontimeout;readyState=0;response;responseText="";responseType="";status;statusText;withCredentials;#t;#e;#n;#s={};#r;#i={};#a;open(t,r,n){this.#t=t,this.#e=r,this.#n="",this.readyState=1,this.onreadystatechange?.(),this.#r=void 0}abort(){this.#r&&this.#r.abort()}getAllResponseHeaders(){return this.#n}setRequestHeader(t,r){this.#s[t]=r}setInit(t,r=!0){this.#i=t,this.#a=r}send(t){const r=this.responseType!=="arraybuffer",n={...this.#i,method:this.#t,headers:this.#s,body:t};typeof AbortController=="function"&&this.#a&&(this.#r=new AbortController,typeof EventTarget<"u"&&this.#r.signal instanceof EventTarget&&(n.signal=this.#r.signal)),typeof document<"u"&&(n.credentials=this.withCredentials?"include":"omit"),fetch(this.#e,n).then(s=>(s.headers.forEach((i,a)=>{this.#n+=`${a}: ${i}\r
`}),this.status=s.status,this.statusText=s.statusText,this.readyState=3,this.onreadystatechange?.(),r?s.text():s.arrayBuffer())).then(s=>{typeof s=="string"?this.responseText=s:this.response=s,this.readyState=4,this.onreadystatechange?.()}).catch(s=>{s.name!=="AbortError"?this.onerror?.(s):this.onabort?.()})}};const Xt=typeof XMLHttpRequest=="function"?"xhr":"fetch",Wl=Xt==="xhr"?XMLHttpRequest:qt,ql=(e,t)=>{const r=e.options,n=e.applyMiddleware("finalizeOptions",r),s={},i=e.applyMiddleware("interceptRequest",void 0,{adapter:Xt,context:e});if(i){const f=setTimeout(t,0,null,i);return{abort:()=>clearTimeout(f)}}let a=new Wl;a instanceof qt&&typeof n.fetch=="object"&&a.setInit(n.fetch,n.useAbortSignal??!0);const o=n.headers,l=n.timeout;let u=!1,d=!1,h=!1;if(a.onerror=f=>{v(a instanceof qt?f instanceof Error?f:new Error(`Request error while attempting to reach is ${n.url}`,{cause:f}):new Error(`Request error while attempting to reach is ${n.url}${f.lengthComputable?`(${f.loaded} of ${f.total} bytes transferred)`:""}`))},a.ontimeout=f=>{v(new Error(`Request timeout while attempting to reach ${n.url}${f.lengthComputable?`(${f.loaded} of ${f.total} bytes transferred)`:""}`))},a.onabort=()=>{p(!0),u=!0},a.onreadystatechange=function(){l&&(p(),s.socket=setTimeout(()=>m("ESOCKETTIMEDOUT"),l.socket)),!u&&a&&a.readyState===4&&a.status!==0&&(function(){if(!(u||d||h)){if(a.status===0)return void v(new Error("Unknown XHR error"));p(),d=!0,t(null,{body:a.response||(a.responseType===""||a.responseType==="text"?a.responseText:""),url:n.url,method:n.method,headers:Vl(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText})}})()},a.open(n.method,n.url,!0),a.withCredentials=!!n.withCredentials,o&&a.setRequestHeader)for(const f in o)o.hasOwnProperty(f)&&a.setRequestHeader(f,o[f]);return n.rawBody&&(a.responseType="arraybuffer"),e.applyMiddleware("onRequest",{options:n,adapter:Xt,request:a,context:e}),a.send(n.body||null),l&&(s.connect=setTimeout(()=>m("ETIMEDOUT"),l.connect)),{abort:function(){u=!0,a&&a.abort()}};function m(f){h=!0,a.abort();const y=new Error(f==="ESOCKETTIMEDOUT"?`Socket timed out on request to ${n.url}`:`Connection timed out on request to ${n.url}`);y.code=f,e.channels.error.publish(y)}function p(f){(f||u||a&&a.readyState>=2&&s.connect)&&clearTimeout(s.connect),s.socket&&clearTimeout(s.socket)}function v(f){if(d)return;p(!0),d=!0,a=null;const y=f||new Error(`Network error while attempting to reach ${n.url}`);y.isNetworkError=!0,y.request=n,t(y)}},Xl=(e=[],t=ql)=>Dn(e,t);var Yl={},Br,Fr,zr,Hr,$r,Pt={exports:{}};$r||($r=1,(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,a=0;n[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(i++,o==="%c"&&(a=i))}),n.splice(a,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=Yl.DEBUG),n},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let n;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(n=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(n[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=(Hr?zr:(Hr=1,zr=function(n){function s(o){let l,u,d,h=null;function m(...p){if(!m.enabled)return;const v=m,f=Number(new Date),y=f-(l||f);v.diff=y,v.prev=l,v.curr=f,l=f,p[0]=s.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let w=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(b,x)=>{if(b==="%%")return"%";w++;const A=s.formatters[x];if(typeof A=="function"){const N=p[w];b=A.call(v,N),p.splice(w,1),w--}return b}),s.formatArgs.call(v,p),(v.log||s.log).apply(v,p)}return m.namespace=o,m.useColors=s.useColors(),m.color=s.selectColor(o),m.extend=i,m.destroy=s.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(u!==s.namespaces&&(u=s.namespaces,d=s.enabled(o)),d),set:p=>{h=p}}),typeof s.init=="function"&&s.init(m),m}function i(o,l){const u=s(this.namespace+(typeof l>"u"?":":l)+o);return u.log=this.log,u}function a(o,l){let u=0,d=0,h=-1,m=0;for(;u<o.length;)if(d<l.length&&(l[d]===o[u]||l[d]==="*"))l[d]==="*"?(h=d,m=u,d++):(u++,d++);else{if(h===-1)return!1;d=h+1,m++,u=m}for(;d<l.length&&l[d]==="*";)d++;return d===l.length}return s.debug=s,s.default=s,s.coerce=function(o){return o instanceof Error?o.stack||o.message:o},s.disable=function(){const o=[...s.names,...s.skips.map(l=>"-"+l)].join(",");return s.enable(""),o},s.enable=function(o){s.save(o),s.namespaces=o,s.names=[],s.skips=[];const l=(typeof o=="string"?o:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const u of l)u[0]==="-"?s.skips.push(u.slice(1)):s.names.push(u)},s.enabled=function(o){for(const l of s.skips)if(a(o,l))return!1;for(const l of s.names)if(a(o,l))return!0;return!1},s.humanize=(function(){if(Fr)return Br;Fr=1;var o=1e3,l=60*o,u=60*l,d=24*u,h=7*d;function m(p,v,f,y){var w=v>=1.5*f;return Math.round(p/f)+" "+y+(w?"s":"")}return Br=function(p,v){v=v||{};var f,y,w=typeof p;if(w==="string"&&p.length>0)return(function(b){if(!((b=String(b)).length>100)){var x=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(b);if(x){var A=parseFloat(x[1]);switch((x[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*A;case"weeks":case"week":case"w":return A*h;case"days":case"day":case"d":return A*d;case"hours":case"hour":case"hrs":case"hr":case"h":return A*u;case"minutes":case"minute":case"mins":case"min":case"m":return A*l;case"seconds":case"second":case"secs":case"sec":case"s":return A*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return A;default:return}}}})(p);if(w==="number"&&isFinite(p))return v.long?(f=p,(y=Math.abs(f))>=d?m(f,y,d,"day"):y>=u?m(f,y,u,"hour"):y>=l?m(f,y,l,"minute"):y>=o?m(f,y,o,"second"):f+" ms"):(function(b){var x=Math.abs(b);return x>=d?Math.round(b/d)+"d":x>=u?Math.round(b/u)+"h":x>=l?Math.round(b/l)+"m":x>=o?Math.round(b/o)+"s":b+"ms"})(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))}})(),s.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach(o=>{s[o]=n[o]}),s.names=[],s.skips=[],s.formatters={},s.selectColor=function(o){let l=0;for(let u=0;u<o.length;u++)l=(l<<5)-l+o.charCodeAt(u),l|=0;return s.colors[Math.abs(l)%s.colors.length]},s.enable(s.load()),s}))(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Pt,Pt.exports)),Pt.exports;const Kl=typeof Buffer>"u"?()=>!1:e=>Buffer.isBuffer(e);function Gr(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ql(e){if(Gr(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Gr(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)}const Zl=["boolean","string","number"];function Jl(){return{processOptions:e=>{const t=e.body;return!t||typeof t.pipe=="function"||Kl(t)||Zl.indexOf(typeof t)===-1&&!Array.isArray(t)&&!Ql(t)?e:Object.assign({},e,{body:JSON.stringify(e.body),headers:Object.assign({},e.headers,{"Content-Type":"application/json"})})}}}function ec(e){return{onResponse:r=>{const n=r.headers["content-type"]||"",s=e&&e.force||n.indexOf("application/json")!==-1;return r.body&&n&&s?Object.assign({},r,{body:t(r.body)}):r},processOptions:r=>Object.assign({},r,{headers:Object.assign({Accept:"application/json"},r.headers)})};function t(r){try{return JSON.parse(r)}catch(n){throw n.message=`Failed to parsed response body as JSON: ${n.message}`,n}}}let $e={};typeof globalThis<"u"?$e=globalThis:typeof window<"u"?$e=window:typeof global<"u"?$e=global:typeof self<"u"&&($e=self);var tc=$e;function rc(e={}){const t=e.implementation||tc.Observable;if(!t)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(r,n)=>new t(s=>(r.error.subscribe(i=>s.error(i)),r.progress.subscribe(i=>s.next(Object.assign({type:"progress"},i))),r.response.subscribe(i=>{s.next(Object.assign({type:"response"},i)),s.complete()}),r.request.publish(n),()=>r.abort.publish()))}}function nc(){return{onRequest:e=>{if(e.adapter!=="xhr")return;const t=e.request,r=e.context;function n(s){return i=>{const a=i.lengthComputable?i.loaded/i.total*100:-1;r.channels.progress.publish({stage:s,percent:a,total:i.total,loaded:i.loaded,lengthComputable:i.lengthComputable})}}"upload"in t&&"onprogress"in t.upload&&(t.upload.onprogress=n("upload")),"onprogress"in t&&(t.onprogress=n("download"))}}}var Un=(e,t,r)=>(r.method==="GET"||r.method==="HEAD")&&(e.isNetworkError||!1);function sc(e){return 100*Math.pow(2,e)+100*Math.random()}const sr=(e={})=>(t=>{const r=t.maxRetries||5,n=t.retryDelay||sc,s=t.shouldRetry;return{onError:(i,a)=>{const o=a.options,l=o.maxRetries||r,u=o.retryDelay||n,d=o.shouldRetry||s,h=o.attemptNumber||0;if((m=o.body)!==null&&typeof m=="object"&&typeof m.pipe=="function"||!d(i,h,o)||h>=l)return i;var m;const p=Object.assign({},a,{options:Object.assign({},o,{attemptNumber:h+1})});return setTimeout(()=>a.channels.request.publish(p),u(h)),null}}})({shouldRetry:Un,...e});sr.shouldRetry=Un;var Yt=function(e,t){return Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Yt(e,t)};function se(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Yt(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function ic(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(h){a(h)}}function l(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((n=n.apply(e,t||[])).next())})}function Bn(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Re(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function re(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],a;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function ne(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Ee(e){return this instanceof Ee?(this.v=e,this):new Ee(e)}function ac(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(p){return function(v){return Promise.resolve(v).then(p,h)}}function o(p,v){n[p]&&(s[p]=function(f){return new Promise(function(y,w){i.push([p,f,y,w])>1||l(p,f)})},v&&(s[p]=v(s[p])))}function l(p,v){try{u(n[p](v))}catch(f){m(i[0][3],f)}}function u(p){p.value instanceof Ee?Promise.resolve(p.value.v).then(d,h):m(i[0][2],p)}function d(p){l("next",p)}function h(p){l("throw",p)}function m(p,v){p(v),i.shift(),i.length&&l(i[0][0],i[0][1])}}function oc(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Re=="function"?Re(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(o,l){a=e[i](a),s(o,l,a.done,a.value)})}}function s(i,a,o,l){Promise.resolve(l).then(function(u){i({value:u,done:o})},a)}}function I(e){return typeof e=="function"}function ir(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Lt=ir(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,s){return s+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function st(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var We=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,s,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=Re(a),l=o.next();!l.done;l=o.next()){var u=l.value;u.remove(this)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}else a.remove(this);var d=this.initialTeardown;if(I(d))try{d()}catch(f){i=f instanceof Lt?f.errors:[f]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var m=Re(h),p=m.next();!p.done;p=m.next()){var v=p.value;try{Vr(v)}catch(f){i=i??[],f instanceof Lt?i=ne(ne([],re(i)),re(f.errors)):i.push(f)}}}catch(f){n={error:f}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}}if(i)throw new Lt(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Vr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&st(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&st(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})(),Fn=We.EMPTY;function zn(e){return e instanceof We||e&&"closed"in e&&I(e.remove)&&I(e.add)&&I(e.unsubscribe)}function Vr(e){I(e)?e():e.unsubscribe()}var lc={Promise:void 0},cc={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,ne([e,t],re(r)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Hn(e){cc.setTimeout(function(){throw e})}function Wr(){}function rt(e){e()}var ar=(function(e){se(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,zn(r)&&r.add(n)):n.destination=hc,n}return t.create=function(r,n,s){return new _e(r,n,s)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(We),uc=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){Je(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){Je(n)}else Je(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){Je(r)}},e})(),_e=(function(e){se(t,e);function t(r,n,s){var i=e.call(this)||this,a;return I(r)||!r?a={next:r??void 0,error:n??void 0,complete:s??void 0}:a=r,i.destination=new uc(a),i}return t})(ar);function Je(e){Hn(e)}function dc(e){throw e}var hc={closed:!0,next:Wr,error:dc,complete:Wr},or=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function vt(e){return e}function fc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $n(e)}function $n(e){return e.length===0?vt:e.length===1?e[0]:function(r){return e.reduce(function(n,s){return s(n)},r)}}var O=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var s=this,i=mc(t)?t:new _e(t,r,n);return rt(function(){var a=s,o=a.operator,l=a.source;i.add(o?o.call(i,l):l?s._subscribe(i):s._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=qr(r),new r(function(s,i){var a=new _e({next:function(o){try{t(o)}catch(l){i(l),a.unsubscribe()}},error:i,complete:s});n.subscribe(a)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[or]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return $n(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=qr(t),new t(function(n,s){var i;r.subscribe(function(a){return i=a},function(a){return s(a)},function(){return n(i)})})},e.create=function(t){return new e(t)},e})();function qr(e){var t;return(t=e??lc.Promise)!==null&&t!==void 0?t:Promise}function pc(e){return e&&I(e.next)&&I(e.error)&&I(e.complete)}function mc(e){return e&&e instanceof ar||pc(e)&&zn(e)}function vc(e){return I(e?.lift)}function ee(e){return function(t){if(vc(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(e,t,r,n,s){return new gc(e,t,r,n,s)}var gc=(function(e){se(t,e);function t(r,n,s,i,a,o){var l=e.call(this,r)||this;return l.onFinalize=a,l.shouldUnsubscribe=o,l._next=n?function(u){try{n(u)}catch(d){r.error(d)}}:e.prototype._next,l._error=i?function(u){try{i(u)}catch(d){r.error(d)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=s?function(){try{s()}catch(u){r.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t})(ar),xc=ir(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),lr=(function(e){se(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new Xr(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new xc},t.prototype.next=function(r){var n=this;rt(function(){var s,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=Re(n.currentObservers),o=a.next();!o.done;o=a.next()){var l=o.value;l.next(r)}}catch(u){s={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}}})},t.prototype.error=function(r){var n=this;rt(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var s=n.observers;s.length;)s.shift().error(r)}})},t.prototype.complete=function(){var r=this;rt(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,s=this,i=s.hasError,a=s.isStopped,o=s.observers;return i||a?Fn:(this.currentObservers=null,o.push(r),new We(function(){n.currentObservers=null,st(o,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,s=n.hasError,i=n.thrownError,a=n.isStopped;s?r.error(i):a&&r.complete()},t.prototype.asObservable=function(){var r=new O;return r.source=this,r},t.create=function(r,n){return new Xr(r,n)},t})(O),Xr=(function(e){se(t,e);function t(r,n){var s=e.call(this)||this;return s.destination=r,s.source=n,s}return t.prototype.next=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.next)===null||s===void 0||s.call(n,r)},t.prototype.error=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.error)===null||s===void 0||s.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,s;return(s=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&s!==void 0?s:Fn},t})(lr),cr={now:function(){return(cr.delegate||Date).now()},delegate:void 0},yc=(function(e){se(t,e);function t(r,n,s){r===void 0&&(r=1/0),n===void 0&&(n=1/0),s===void 0&&(s=cr);var i=e.call(this)||this;return i._bufferSize=r,i._windowTime=n,i._timestampProvider=s,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,r),i._windowTime=Math.max(1,n),i}return t.prototype.next=function(r){var n=this,s=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,o=n._timestampProvider,l=n._windowTime;s||(i.push(r),!a&&i.push(o.now()+l)),this._trimBuffer(),e.prototype.next.call(this,r)},t.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),s=this,i=s._infiniteTimeWindow,a=s._buffer,o=a.slice(),l=0;l<o.length&&!r.closed;l+=i?1:2)r.next(o[l]);return this._checkFinalizedStatuses(r),n},t.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,s=r._timestampProvider,i=r._buffer,a=r._infiniteTimeWindow,o=(a?1:2)*n;if(n<1/0&&o<i.length&&i.splice(0,i.length-o),!a){for(var l=s.now(),u=0,d=1;d<i.length&&i[d]<=l;d+=2)u=d;u&&i.splice(0,u+1)}},t})(lr),bc=(function(e){se(t,e);function t(r,n){return e.call(this)||this}return t.prototype.schedule=function(r,n){return this},t})(We),Yr={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setInterval.apply(void 0,ne([e,t],re(r)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},wc=(function(e){se(t,e);function t(r,n){var s=e.call(this,r,n)||this;return s.scheduler=r,s.work=n,s.pending=!1,s}return t.prototype.schedule=function(r,n){var s;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,n)),this.pending=!0,this.delay=n,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(a,this.id,n),this},t.prototype.requestAsyncId=function(r,n,s){return s===void 0&&(s=0),Yr.setInterval(r.flush.bind(r,this),s)},t.prototype.recycleAsyncId=function(r,n,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return n;n!=null&&Yr.clearInterval(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(r,n);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var s=!1,i;try{this.work(r)}catch(a){s=!0,i=a||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,s=r.scheduler,i=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,st(i,this),n!=null&&(this.id=this.recycleAsyncId(s,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t})(bc),Kr=(function(){function e(t,r){r===void 0&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(n,r)},e.now=cr.now,e})(),Tc=(function(e){se(t,e);function t(r,n){n===void 0&&(n=Kr.now);var s=e.call(this,r,n)||this;return s.actions=[],s._active=!1,s}return t.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var s;this._active=!0;do if(s=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,s){for(;r=n.shift();)r.unsubscribe();throw s}},t})(Kr),Ec=new Tc(wc),Sc=Ec,Cc=new O(function(e){return e.complete()});function Ac(e){return e&&I(e.schedule)}function ur(e){return e[e.length-1]}function Mc(e){return I(ur(e))?e.pop():void 0}function dr(e){return Ac(ur(e))?e.pop():void 0}function Ic(e,t){return typeof ur(e)=="number"?e.pop():t}var Gn=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function Vn(e){return I(e?.then)}function Wn(e){return I(e[or])}function qn(e){return Symbol.asyncIterator&&I(e?.[Symbol.asyncIterator])}function Xn(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Rc(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yn=Rc();function Kn(e){return I(e?.[Yn])}function Qn(e){return ac(this,arguments,function(){var r,n,s,i;return Bn(this,function(a){switch(a.label){case 0:r=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Ee(r.read())];case 3:return n=a.sent(),s=n.value,i=n.done,i?[4,Ee(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Ee(s)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Zn(e){return I(e?.getReader)}function te(e){if(e instanceof O)return e;if(e!=null){if(Wn(e))return _c(e);if(Gn(e))return Nc(e);if(Vn(e))return Oc(e);if(qn(e))return Jn(e);if(Kn(e))return jc(e);if(Zn(e))return Pc(e)}throw Xn(e)}function _c(e){return new O(function(t){var r=e[or]();if(I(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Nc(e){return new O(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function Oc(e){return new O(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,Hn)})}function jc(e){return new O(function(t){var r,n;try{for(var s=Re(e),i=s.next();!i.done;i=s.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}t.complete()})}function Jn(e){return new O(function(t){Lc(e,t).catch(function(r){return t.error(r)})})}function Pc(e){return Jn(Qn(e))}function Lc(e,t){var r,n,s,i;return ic(this,void 0,void 0,function(){var a,o;return Bn(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=oc(e),l.label=1;case 1:return[4,r.next()];case 2:if(n=l.sent(),!!n.done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=l.sent(),s={error:o},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function he(e,t,r,n,s){n===void 0&&(n=0),s===void 0&&(s=!1);var i=t.schedule(function(){r(),s?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!s)return i}function es(e,t){return t===void 0&&(t=0),ee(function(r,n){r.subscribe(oe(n,function(s){return he(n,e,function(){return n.next(s)},t)},function(){return he(n,e,function(){return n.complete()},t)},function(s){return he(n,e,function(){return n.error(s)},t)}))})}function ts(e,t){return t===void 0&&(t=0),ee(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function kc(e,t){return te(e).pipe(ts(t),es(t))}function Dc(e,t){return te(e).pipe(ts(t),es(t))}function Uc(e,t){return new O(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}function Bc(e,t){return new O(function(r){var n;return he(r,t,function(){n=e[Yn](),he(r,t,function(){var s,i,a;try{s=n.next(),i=s.value,a=s.done}catch(o){r.error(o);return}a?r.complete():r.next(i)},0,!0)}),function(){return I(n?.return)&&n.return()}})}function rs(e,t){if(!e)throw new Error("Iterable cannot be null");return new O(function(r){he(r,t,function(){var n=e[Symbol.asyncIterator]();he(r,t,function(){n.next().then(function(s){s.done?r.complete():r.next(s.value)})},0,!0)})})}function Fc(e,t){return rs(Qn(e),t)}function zc(e,t){if(e!=null){if(Wn(e))return kc(e,t);if(Gn(e))return Uc(e,t);if(Vn(e))return Dc(e,t);if(qn(e))return rs(e,t);if(Kn(e))return Bc(e,t);if(Zn(e))return Fc(e,t)}throw Xn(e)}function qe(e,t){return t?zc(e,t):te(e)}function Se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=dr(e);return qe(e,r)}function ns(e,t){var r=I(e)?e:function(){return e},n=function(s){return s.error(r())};return new O(n)}function Hc(e){return!!e&&(e instanceof O||I(e.lift)&&I(e.subscribe))}var ss=ir(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function S(e,t){return new Promise(function(r,n){var s=!1,i;e.subscribe({next:function(a){i=a,s=!0},error:n,complete:function(){s?r(i):n(new ss)}})})}function kt(e,t){return new Promise(function(r,n){var s=new _e({next:function(i){r(i),s.unsubscribe()},error:n,complete:function(){n(new ss)}});e.subscribe(s)})}function $c(e){return e instanceof Date&&!isNaN(e)}function U(e,t){return ee(function(r,n){var s=0;r.subscribe(oe(n,function(i){n.next(e.call(t,i,s++))}))})}var Gc=Array.isArray;function Vc(e,t){return Gc(t)?e.apply(void 0,ne([],re(t))):e(t)}function Wc(e){return U(function(t){return Vc(e,t)})}function qc(e,t,r){return r===void 0&&(r=vt),function(n){Qr(t,function(){for(var s=e.length,i=new Array(s),a=s,o=s,l=function(d){Qr(t,function(){var h=qe(e[d],t),m=!1;h.subscribe(oe(n,function(p){i[d]=p,m||(m=!0,o--),o||n.next(r(i.slice()))},function(){--a||n.complete()}))},n)},u=0;u<s;u++)l(u)})}}function Qr(e,t,r){t()}function Xc(e,t,r,n,s,i,a,o){var l=[],u=0,d=0,h=!1,m=function(){h&&!l.length&&!u&&t.complete()},p=function(f){return u<n?v(f):l.push(f)},v=function(f){u++;var y=!1;te(r(f,d++)).subscribe(oe(t,function(w){t.next(w)},function(){y=!0},void 0,function(){if(y)try{u--;for(var w=function(){var b=l.shift();a||v(b)};l.length&&u<n;)w();m()}catch(b){t.error(b)}}))};return e.subscribe(oe(t,p,function(){h=!0,m()})),function(){}}function fe(e,t,r){return r===void 0&&(r=1/0),I(t)?fe(function(n,s){return U(function(i,a){return t(n,i,s,a)})(te(e(n,s)))},r):(typeof t=="number"&&(r=t),ee(function(n,s){return Xc(n,s,e,r)}))}function is(e){return e===void 0&&(e=1/0),fe(vt,e)}function Yc(){return is(1)}function Kc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yc()(qe(e,dr(e)))}function as(e){return new O(function(t){te(e()).subscribe(t)})}function Qc(e,t,r){return r===void 0&&(r=Sc),new O(function(n){var s=$c(e)?+e-r.now():e;s<0&&(s=0);var i=0;return r.schedule(function(){n.closed||(n.next(i++),n.complete())},s)})}function Zc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=dr(e),n=Ic(e,1/0),s=e;return s.length?s.length===1?te(s[0]):is(n)(qe(s,r)):Cc}var Jc=Array.isArray;function eu(e){return e.length===1&&Jc(e[0])?e[0]:e}function Le(e,t){return ee(function(r,n){var s=0;r.subscribe(oe(n,function(i){return e.call(t,i,s++)&&n.next(i)}))})}function it(e){return ee(function(t,r){var n=null,s=!1,i;n=t.subscribe(oe(r,void 0,void 0,function(a){i=te(e(a,it(e)(t))),n?(n.unsubscribe(),n=null,i.subscribe(r)):s=!0})),s&&(n.unsubscribe(),n=null,i.subscribe(r))})}function os(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Mc(e);return r?fc(os.apply(void 0,ne([],re(e))),Wc(r)):ee(function(n,s){qc(ne([n],re(eu(e))))(s)})}function tu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return os.apply(void 0,ne([],re(e)))}function ls(e){return ee(function(t,r){try{t.subscribe(r)}finally{r.add(e)}})}function cs(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new lr}:t,n=e.resetOnError,s=n===void 0?!0:n,i=e.resetOnComplete,a=i===void 0?!0:i,o=e.resetOnRefCountZero,l=o===void 0?!0:o;return function(u){var d,h,m,p=0,v=!1,f=!1,y=function(){h?.unsubscribe(),h=void 0},w=function(){y(),d=m=void 0,v=f=!1},b=function(){var x=d;w(),x?.unsubscribe()};return ee(function(x,A){p++,!f&&!v&&y();var N=m=m??r();A.add(function(){p--,p===0&&!f&&!v&&(h=Dt(b,l))}),N.subscribe(A),!d&&p>0&&(d=new _e({next:function(P){return N.next(P)},error:function(P){f=!0,y(),h=Dt(w,s,P),N.error(P)},complete:function(){v=!0,y(),h=Dt(w,a),N.complete()}}),te(x).subscribe(d))})(u)}}function Dt(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var s=new _e({next:function(){s.unsubscribe(),e()}});return te(t.apply(void 0,ne([],re(r)))).subscribe(s)}}function ru(e,t,r){var n,s=!1;return n=e,cs({connector:function(){return new yc(n,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function nu(e,t,r){var n=I(e)||t||r?{next:e,error:t,complete:r}:e;return n?ee(function(s,i){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var o=!0;s.subscribe(oe(i,function(l){var u;(u=n.next)===null||u===void 0||u.call(n,l),i.next(l)},function(){var l;o=!1,(l=n.complete)===null||l===void 0||l.call(n),i.complete()},function(l){var u;o=!1,(u=n.error)===null||u===void 0||u.call(n,l),i.error(l)},function(){var l,u;o&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):vt}function us(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}var ds={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},hs={0:8203,1:8204,2:8205,3:65279};new Array(4).fill(String.fromCodePoint(hs[0])).join("");Object.fromEntries(Object.entries(hs).map(e=>e.reverse()));Object.fromEntries(Object.entries(ds).map(e=>e.reverse()));var su=`${Object.values(ds).map(e=>`\\u{${e.toString(16)}}`).join("")}`,Zr=new RegExp(`[${su}]{4,}`,"gu");function iu(e){var t;return{cleaned:e.replace(Zr,""),encoded:((t=e.match(Zr))==null?void 0:t[0])||""}}function au(e){return e&&JSON.parse(iu(JSON.stringify(e)).cleaned)}function ou(e){return au(e)}const lu="drafts",cu="versions",Ne=".",at=`${lu}${Ne}`,fs=`${cu}${Ne}`;function gt(e){return e.startsWith(at)}function xt(e){return e.startsWith(fs)}function ps(e){if(xt(e)){const t=yt(e);return at+t}return gt(e)?e:at+e}function Xe(e,t){if(t==="drafts"||t==="published")throw new Error('Version can not be "published" or "drafts"');return`${fs}${t}${Ne}${yt(e)}`}function ms(e){if(!xt(e))return;const[t,r,...n]=e.split(Ne);return r}function yt(e){return xt(e)?e.split(Ne).slice(2).join(Ne):gt(e)?e.slice(at.length):e}let uu=e=>crypto.getRandomValues(new Uint8Array(e)),du=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let a="";for(;;){let o=r(s),l=s|0;for(;l--;)if(a+=e[o[l]&n]||"",a.length===i)return a}}},hu=(e,t=21)=>du(e,t,uu);const Jr=/\r\n|[\n\r\u2028\u2029]/;function fu(e,t,r){const n=e.split(Jr),s={start:en(t.start,n),end:t.end?en(t.end,n):void 0},{start:i,end:a,markerLines:o}=pu(s,n),l=`${a}`.length;return e.split(Jr,a).slice(i,a).map((u,d)=>{const h=i+1+d,m=` ${` ${h}`.slice(-l)} |`,p=o[h],v=!o[h+1];if(!p)return` ${m}${u.length>0?` ${u}`:""}`;let f="";if(Array.isArray(p)){const y=u.slice(0,Math.max(p[0]-1,0)).replace(/[^\t]/g," "),w=p[1]||1;f=[`
 `,m.replace(/\d/g," ")," ",y,"^".repeat(w)].join(""),v&&r&&(f+=" "+r)}return[">",m,u.length>0?` ${u}`:"",f].join("")}).join(`
`)}function pu(e,t){const r={...e.start},n={...r,...e.end},s=2,i=3,a=r.line??-1,o=r.column??0,l=n.line,u=n.column;let d=Math.max(a-(s+1),0),h=Math.min(t.length,l+i);a===-1&&(d=0),l===-1&&(h=t.length);const m=l-a,p={};if(m)for(let v=0;v<=m;v++){const f=v+a;if(!o)p[f]=!0;else if(v===0){const y=t[f-1].length;p[f]=[o,y-o+1]}else if(v===m)p[f]=[0,u];else{const y=t[f-v].length;p[f]=[0,y]}}else o===u?o?p[a]=[o,0]:p[a]=!0:p[a]=[o,u-o];return{start:d,end:h,markerLines:p}}function en(e,t){let r=0;for(let n=0;n<t.length;n++){const s=t[n].length+1;if(r+s>e)return{line:n+1,column:e-r};r+=s}return{line:t.length,column:t[t.length-1]?.length??0}}const Ut=5;class mu extends Error{response;statusCode=400;responseBody;details;constructor(t,r){const n=vs(t,r);super(n.message),Object.assign(this,n)}}class vu extends Error{response;statusCode=500;responseBody;details;constructor(t){const r=vs(t);super(r.message),Object.assign(this,r)}}function vs(e,t){const r=e.body,n={response:e,statusCode:e.statusCode,responseBody:yu(r,e),message:"",details:void 0};if(!us(r))return n.message=Bt(e,r),n;const s=r.error;if(typeof s=="string"&&typeof r.message=="string")return n.message=`${s} - ${r.message}`,n;if(typeof s!="object"||s===null)return typeof s=="string"?n.message=s:typeof r.message=="string"?n.message=r.message:n.message=Bt(e,r),n;if(gu(s)||xu(s)){const i=s.items||[],a=i.slice(0,Ut).map(l=>l.error?.description).filter(Boolean);let o=a.length?`:
- ${a.join(`
- `)}`:"";return i.length>Ut&&(o+=`
...and ${i.length-Ut} more`),n.message=`${s.description}${o}`,n.details=r.error,n}if(gs(s)){const i=t?.options?.query?.tag;return n.message=xs(s,i),n.details=r.error,n}return"description"in s&&typeof s.description=="string"?(n.message=s.description,n.details=s,n):(n.message=Bt(e,r),n)}function gu(e){return"type"in e&&e.type==="mutationError"&&"description"in e&&typeof e.description=="string"}function xu(e){return"type"in e&&e.type==="actionError"&&"description"in e&&typeof e.description=="string"}function gs(e){return us(e)&&e.type==="queryParseError"&&typeof e.query=="string"&&typeof e.start=="number"&&typeof e.end=="number"}function xs(e,t){const{query:r,start:n,end:s,description:i}=e;if(!r||typeof n>"u")return`GROQ query parse error: ${i}`;const a=t?`

Tag: ${t}`:"";return`GROQ query parse error:
${fu(r,{start:n,end:s},i)}${a}`}function Bt(e,t){const r=typeof t=="string"?` (${bu(t,100)})`:"",n=e.statusMessage?` ${e.statusMessage}`:"";return`${e.method}-request to ${e.url} resulted in HTTP ${e.statusCode}${n}${r}`}function yu(e,t){return(t.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(e,null,2):e}function bu(e,t){return e.length>t?`${e.slice(0,t)}`:e}class wu extends Error{projectId;addOriginUrl;constructor({projectId:t}){super("CorsOriginError"),this.name="CorsOriginError",this.projectId=t;const r=new URL(`https://sanity.io/manage/project/${t}/api`);if(typeof location<"u"){const{origin:n}=location;r.searchParams.set("cors","add"),r.searchParams.set("origin",n),this.addOriginUrl=r,this.message=`The current origin is not allowed to connect to the Live Content API. Add it here: ${r}`}else this.message=`The current origin is not allowed to connect to the Live Content API. Change your configuration here: ${r}`}}const Tu={onResponse:(e,t)=>{if(e.statusCode>=500)throw new vu(e);if(e.statusCode>=400)throw new mu(e,t);return e}};function Eu(e={}){const t={},r=n=>e.ignoreWarnings===void 0?!1:(Array.isArray(e.ignoreWarnings)?e.ignoreWarnings:[e.ignoreWarnings]).some(s=>typeof s=="string"?n.includes(s):s instanceof RegExp?s.test(n):!1);return{onResponse:n=>{const s=n.headers["x-sanity-warning"],i=Array.isArray(s)?s:[s];for(const a of i)!a||t[a]||r(a)||(t[a]=!0,console.warn(a));return n}}}function tn(e,t={}){return Xl([sr({shouldRetry:Su}),...e,Eu(t),Jl(),ec(),nc(),Tu,rc({implementation:O})])}function Su(e,t,r){if(r.maxRetries===0)return!1;const n=r.method==="GET"||r.method==="HEAD",s=(r.uri||r.url).startsWith("/data/query"),i=e.response&&(e.response.statusCode===429||e.response.statusCode===502||e.response.statusCode===503);return(n||s)&&i?!0:sr.shouldRetry(e,t,r)}const Cu="https://www.sanity.io/help/";function hr(e){return Cu+e}const rn=["image","file"],nn=["before","after","replace"],ys=e=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(e))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},Au=e=>{if(!/^[-a-z0-9]+$/i.test(e))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},Mu=e=>{if(rn.indexOf(e)===-1)throw new Error(`Invalid asset type: ${e}. Must be one of ${rn.join(", ")}`)},Ge=(e,t)=>{if(t===null||typeof t!="object"||Array.isArray(t))throw new Error(`${e}() takes an object of properties`)},ot=(e,t)=>{if(typeof t!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(t)||t.includes(".."))throw new Error(`${e}(): "${t}" is not a valid document ID`)},Oe=(e,t)=>{if(!t._id)throw new Error(`${e}() requires that the document contains an ID ("_id" property)`);ot(e,t._id)},Iu=(e,t)=>{if(typeof t!="string")throw new Error(`\`${e}()\`: \`${t}\` is not a valid document type`)},bs=(e,t)=>{if(!t._type)throw new Error(`\`${e}()\` requires that the document contains a type (\`_type\` property)`);Iu(e,t._type)},Ru=(e,t)=>{if(t._id&&t._id!==e)throw new Error(`The provided document ID (\`${t._id}\`) does not match the generated version ID (\`${e}\`)`)},_u=(e,t,r)=>{const n="insert(at, selector, items)";if(nn.indexOf(e)===-1){const s=nn.map(i=>`"${i}"`).join(", ");throw new Error(`${n} takes an "at"-argument which is one of: ${s}`)}if(typeof t!="string")throw new Error(`${n} takes a "selector"-argument which must be a string`);if(!Array.isArray(r))throw new Error(`${n} takes an "items"-argument which must be an array`)},ge=e=>{if(!e.dataset)throw new Error("`dataset` must be provided to perform queries");return e.dataset||""},ws=e=>{if(typeof e!="string"||!/^[a-z0-9._-]{1,75}$/i.test(e))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return e},Ts=e=>{if(!e["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");const{type:t,id:r}=e["~experimental_resource"];switch(t){case"dataset":{if(r.split(".").length!==2)throw new Error('Dataset resource ID must be in the format "project.dataset"');return}case"dashboard":case"media-library":case"canvas":return;default:throw new Error(`Unsupported resource type: ${t.toString()}`)}},de=(e,t)=>{if(t["~experimental_resource"])throw new Error(`\`${e}\` does not support resource-based operations`)};function Nu(e){let t=!1,r;return(...n)=>(t||(r=e(...n),t=!0),r)}const ce=e=>Nu((...t)=>console.warn(e.join(" "),...t)),Ou=ce(["Because you set `withCredentials` to true, we will override your `useCdn`","setting to be false since (cookie-based) credentials are never set on the CDN"]),ju=ce(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),Pu=ce(["The Sanity client is configured with the `perspective` set to `drafts` or `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),Lu=ce(["The `previewDrafts` perspective has been renamed to  `drafts` and will be removed in a future API version"]),ku=ce(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.",`See ${hr("js-client-browser-token")} for more information and how to hide this warning.`]),Du=ce(["You have configured Sanity client to use a token, but also provided `withCredentials: true`.","This is no longer supported - only token will be used - remove `withCredentials: true`."]),Uu=ce(["Using the Sanity client without specifying an API version is deprecated.",`See ${hr("js-client-api-version")}`]),Bu=ce(["You have called `createVersion()` with a defined `document`. The recommended approach is to provide a `baseId` and `releaseId` instead."]),Fu="apicdn.sanity.io",Ve={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,stega:{enabled:!1}},zu=["localhost","127.0.0.1","0.0.0.0"],Hu=e=>zu.indexOf(e)!==-1;function $u(e){if(e==="1"||e==="X")return;const t=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&t instanceof Date&&t.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}function Es(e){if(Array.isArray(e)&&e.length>1&&e.includes("raw"))throw new TypeError('Invalid API perspective value: "raw". The raw-perspective can not be combined with other perspectives')}const Ss=(e,t)=>{const r={...t,...e,stega:{...typeof t.stega=="boolean"?{enabled:t.stega}:t.stega||Ve.stega,...typeof e.stega=="boolean"?{enabled:e.stega}:e.stega||{}}};r.apiVersion||Uu();const n={...Ve,...r},s=n.useProjectHostname&&!n["~experimental_resource"];if(typeof Promise>"u"){const m=hr("js-client-promise-polyfill");throw new Error(`No native Promise-implementation found, polyfill needed - see ${m}`)}if(s&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(n["~experimental_resource"]&&Ts(n),typeof n.perspective<"u"&&Es(n.perspective),"encodeSourceMap"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMap' is not supported in '@sanity/client'. Did you mean 'stega.enabled'?");if("encodeSourceMapAtPath"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMapAtPath' is not supported in '@sanity/client'. Did you mean 'stega.filter'?");if(typeof n.stega.enabled!="boolean")throw new Error(`stega.enabled must be a boolean, received ${n.stega.enabled}`);if(n.stega.enabled&&n.stega.studioUrl===void 0)throw new Error("stega.studioUrl must be defined when stega.enabled is true");if(n.stega.enabled&&typeof n.stega.studioUrl!="string"&&typeof n.stega.studioUrl!="function")throw new Error(`stega.studioUrl must be a string or a function, received ${n.stega.studioUrl}`);const i=typeof window<"u"&&window.location&&window.location.hostname,a=i&&Hu(window.location.hostname),o=!!n.token;n.withCredentials&&o&&(Du(),n.withCredentials=!1),i&&a&&o&&n.ignoreBrowserTokenWarning!==!0?ku():typeof n.useCdn>"u"&&ju(),s&&Au(n.projectId),n.dataset&&ys(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?ws(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion=`${n.apiVersion}`.replace(/^v/,""),n.isDefaultApi=n.apiHost===Ve.apiHost,n.useCdn===!0&&n.withCredentials&&Ou(),n.useCdn=n.useCdn!==!1&&!n.withCredentials,$u(n.apiVersion);const l=n.apiHost.split("://",2),u=l[0],d=l[1],h=n.isDefaultApi?Fu:d;return s?(n.url=`${u}://${n.projectId}.${d}/v${n.apiVersion}`,n.cdnUrl=`${u}://${n.projectId}.${h}/v${n.apiVersion}`):(n.url=`${n.apiHost}/v${n.apiVersion}`,n.cdnUrl=n.url),n};class Cs extends Error{name="ConnectionFailedError"}class Gu extends Error{name="DisconnectError";reason;constructor(t,r,n={}){super(t,n),this.reason=r}}class Vu extends Error{name="ChannelError";data;constructor(t,r){super(t),this.data=r}}class Wu extends Error{name="MessageError";data;constructor(t,r,n={}){super(t,n),this.data=r}}class sn extends Error{name="MessageParseError"}const qu=["channelError","disconnect"];function As(e,t){return as(()=>{const r=e();return Hc(r)?r:Se(r)}).pipe(fe(r=>Xu(r,t)))}function Xu(e,t){return new O(r=>{const n=t.includes("open"),s=t.includes("reconnect");function i(u){if("data"in u){const[d,h]=an(u);r.error(d?new sn("Unable to parse EventSource error message",{cause:h}):new Wu((h?.data).message,h));return}e.readyState===e.CLOSED?r.error(new Cs("EventSource connection failed")):s&&r.next({type:"reconnect"})}function a(){r.next({type:"open"})}function o(u){const[d,h]=an(u);if(d){r.error(new sn("Unable to parse EventSource message",{cause:d}));return}if(u.type==="channelError"){const m=new URL(e.url).searchParams.get("tag");r.error(new Vu(Yu(h?.data,m),h.data));return}if(u.type==="disconnect"){r.error(new Gu(`Server disconnected client: ${h.data?.reason||"unknown error"}`));return}r.next({type:u.type,id:u.lastEventId,...h.data?{data:h.data}:{}})}e.addEventListener("error",i),n&&e.addEventListener("open",a);const l=[...new Set([...qu,...t])].filter(u=>u!=="error"&&u!=="open"&&u!=="reconnect");return l.forEach(u=>e.addEventListener(u,o)),()=>{e.removeEventListener("error",i),n&&e.removeEventListener("open",a),l.forEach(u=>e.removeEventListener(u,o)),e.close()}})}function an(e){try{const t=typeof e.data=="string"&&JSON.parse(e.data);return[null,{type:e.type,id:e.lastEventId,...Ku(t)?{}:{data:t}}]}catch(t){return[t,null]}}function Yu(e,t){const r=e.error;return r?gs(r)?xs(r,t):r.description?r.description:typeof r=="string"?r:JSON.stringify(r,null,2):e.message||"Unknown listener error"}function Ku(e){for(const t in e)return!1;return!0}function Ms(e){if(typeof e=="string")return{id:e};if(Array.isArray(e))return{query:"*[_id in $ids]",params:{ids:e}};if(typeof e=="object"&&e!==null&&"query"in e&&typeof e.query=="string")return"params"in e&&typeof e.params=="object"&&e.params!==null?{query:e.query,params:e.params}:{query:e.query};const t=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

${t}`)}class Is{selection;operations;constructor(t,r={}){this.selection=t,this.operations=r}set(t){return this._assign("set",t)}setIfMissing(t){return this._assign("setIfMissing",t)}diffMatchPatch(t){return Ge("diffMatchPatch",t),this._assign("diffMatchPatch",t)}unset(t){if(!Array.isArray(t))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:t}),this}inc(t){return this._assign("inc",t)}dec(t){return this._assign("dec",t)}insert(t,r,n){return _u(t,r,n),this._assign("insert",{[t]:r,items:n})}append(t,r){return this.insert("after",`${t}[-1]`,r)}prepend(t,r){return this.insert("before",`${t}[0]`,r)}splice(t,r,n,s){const i=typeof n>"u"||n===-1,a=r<0?r-1:r,o=i?-1:Math.max(0,r+n),l=a<0&&o>=0?"":o,u=`${t}[${a}:${l}]`;return this.insert("replace",u,s||[])}ifRevisionId(t){return this.operations.ifRevisionID=t,this}serialize(){return{...Ms(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(t,r,n=!0){return Ge(t,r),this.operations=Object.assign({},this.operations,{[t]:Object.assign({},n&&this.operations[t]||{},r)}),this}_set(t,r){return this._assign(t,r,!1)}}class pe extends Is{#t;constructor(t,r,n){super(t,r),this.#t=n}clone(){return new pe(this.selection,{...this.operations},this.#t)}commit(t){if(!this.#t)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},t);return this.#t.mutate({patch:this.serialize()},n)}}class ae extends Is{#t;constructor(t,r,n){super(t,r),this.#t=n}clone(){return new ae(this.selection,{...this.operations},this.#t)}commit(t){if(!this.#t)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},t);return this.#t.mutate({patch:this.serialize()},n)}}const Rs={returnDocuments:!1};class _s{operations;trxId;constructor(t=[],r){this.operations=t,this.trxId=r}create(t){return Ge("create",t),this._add({create:t})}createIfNotExists(t){const r="createIfNotExists";return Ge(r,t),Oe(r,t),this._add({[r]:t})}createOrReplace(t){const r="createOrReplace";return Ge(r,t),Oe(r,t),this._add({[r]:t})}delete(t){return ot("delete",t),this._add({delete:{id:t}})}transactionId(t){return t?(this.trxId=t,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(t){return this.operations.push(t),this}}class bt extends _s{#t;constructor(t,r,n){super(t,n),this.#t=r}clone(){return new bt([...this.operations],this.#t,this.trxId)}commit(t){if(!this.#t)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#t.mutate(this.serialize(),Object.assign({transactionId:this.trxId},Rs,t||{}))}patch(t,r){const n=typeof r=="function",s=typeof t!="string"&&t instanceof ae,i=typeof t=="object"&&("query"in t||"id"in t);if(s)return this._add({patch:t.serialize()});if(n){const a=r(new ae(t,{},this.#t));if(!(a instanceof ae))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:a.serialize()})}if(i){const a=new ae(t,r||{},this.#t);return this._add({patch:a.serialize()})}return this._add({patch:{id:t,...r}})}}class wt extends _s{#t;constructor(t,r,n){super(t,n),this.#t=r}clone(){return new wt([...this.operations],this.#t,this.trxId)}commit(t){if(!this.#t)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#t.mutate(this.serialize(),Object.assign({transactionId:this.trxId},Rs,t||{}))}patch(t,r){const n=typeof r=="function";if(typeof t!="string"&&t instanceof pe)return this._add({patch:t.serialize()});if(n){const s=r(new pe(t,{},this.#t));if(!(s instanceof pe))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:s.serialize()})}return this._add({patch:{id:t,...r}})}}const Qu="X-Sanity-Project-ID";function Zu(e,t={}){const r={};e.headers&&Object.assign(r,e.headers);const n=t.token||e.token;n&&(r.Authorization=`Bearer ${n}`),!t.useGlobalApi&&!e.useProjectHostname&&e.projectId&&(r[Qu]=e.projectId);const s=!!(typeof t.withCredentials>"u"?e.withCredentials:t.withCredentials),i=typeof t.timeout>"u"?e.timeout:t.timeout;return Object.assign({},t,{headers:Object.assign({},r,t.headers||{}),timeout:typeof i>"u"?300*1e3:i,proxy:t.proxy||e.proxy,json:!0,withCredentials:s,fetch:typeof t.fetch=="object"&&typeof e.fetch=="object"?{...e.fetch,...t.fetch}:t.fetch||e.fetch})}const Ns=({query:e,params:t={},options:r={}})=>{const n=new URLSearchParams,{tag:s,includeMutations:i,returnQuery:a,...o}=r;s&&n.append("tag",s),n.append("query",e);for(const[l,u]of Object.entries(t))u!==void 0&&n.append(`$${l}`,JSON.stringify(u));for(const[l,u]of Object.entries(o))u&&n.append(l,`${u}`);return a===!1&&n.append("returnQuery","false"),i===!1&&n.append("includeMutations","false"),`?${n}`},Ju=(e,t)=>e===!1?void 0:typeof e>"u"?t:e,ed=(e={})=>({dryRun:e.dryRun,returnIds:!0,returnDocuments:Ju(e.returnDocuments,!0),visibility:e.visibility||"sync",autoGenerateArrayKeys:e.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:e.skipCrossDatasetReferenceValidation}),fr=e=>e.type==="response",td=e=>e.body,rd=(e,t)=>e.reduce((r,n)=>(r[t(n)]=n,r),Object.create(null)),nd=11264;function Os(e,t,r,n,s={},i={}){const a="stega"in i?{...r||{},...typeof i.stega=="boolean"?{enabled:i.stega}:i.stega||{}}:r,o=a.enabled?ou(s):s,l=i.filterResponse===!1?v=>v:v=>v.result,{cache:u,next:d,...h}={useAbortSignal:typeof i.signal<"u",resultSourceMap:a.enabled?"withKeyArraySelector":i.resultSourceMap,...i,returnQuery:i.filterResponse===!1&&i.returnQuery!==!1},m=typeof u<"u"||typeof d<"u"?{...h,fetch:{cache:u,next:d}}:h,p=xe(e,t,"query",{query:n,params:o},m);return a.enabled?p.pipe(tu(qe(J(()=>import("./stegaEncodeSourceMap-BocHGHM1.js"),__vite__mapDeps([11,1,2,3])).then(function(v){return v.stegaEncodeSourceMap$1}).then(({stegaEncodeSourceMap:v})=>v))),U(([v,f])=>{const y=f(v.result,v.resultSourceMap,a);return l({...v,result:y})})):p.pipe(U(l))}function je(e,t,r,n={}){const s=(()=>{if(!n.releaseId)return r;const a=ms(r);if(!a){if(gt(r))throw new Error(`The document ID (\`${r}\`) is a draft, but \`options.releaseId\` is set as \`${n.releaseId}\``);return Xe(r,n.releaseId)}if(a!==n.releaseId)throw new Error(`The document ID (\`${r}\`) is already a version of \`${a}\` release, but this does not match the provided \`options.releaseId\` (\`${n.releaseId}\`)`);return r})(),i={uri:q(e,"doc",s),json:!0,tag:n.tag,signal:n.signal,query:n.includeAllVersions!==void 0?{includeAllVersions:n.includeAllVersions}:void 0};return Ke(e,t,i).pipe(Le(fr),U(a=>{const o=a.body.documents;return o?n.includeAllVersions?o:o[0]:n.includeAllVersions?[]:void 0}))}function js(e,t,r,n={}){const s={uri:q(e,"doc",r.join(",")),json:!0,tag:n.tag,signal:n.signal};return Ke(e,t,s).pipe(Le(fr),U(i=>{const a=rd(i.body.documents||[],o=>o._id);return r.map(o=>a[o]||null)}))}function Ps(e,t,r,n={}){return xe(e,t,"query",{query:"*[sanity::partOfRelease($releaseId)]",params:{releaseId:r}},n)}function Ls(e,t,r,n){return Oe("createIfNotExists",r),Tt(e,t,r,"createIfNotExists",n)}function ks(e,t,r,n){return Oe("createOrReplace",r),Tt(e,t,r,"createOrReplace",n)}function Ds(e,t,r,n,s){return Oe("createVersion",r),bs("createVersion",r),Bu(),R(e,t,{actionType:"sanity.action.document.version.create",publishedId:n,document:r},s)}function Us(e,t,r,n,s,i,a){if(!n)throw new Error("`createVersion()` requires `baseId` when no `document` is provided");if(!r)throw new Error("`createVersion()` requires `publishedId` when `baseId` is provided");ot("createVersion",n),ot("createVersion",r);const o={actionType:"sanity.action.document.version.create",publishedId:r,baseId:n,versionId:s?Xe(r,s):ps(r),ifBaseRevisionId:i};return R(e,t,o,a)}function Bs(e,t,r,n){return xe(e,t,"mutate",{mutations:[{delete:Ms(r)}]},n)}function Fs(e,t,r,n=!1,s){return R(e,t,{actionType:"sanity.action.document.version.discard",versionId:r,purge:n},s)}function zs(e,t,r,n){return Oe("replaceVersion",r),bs("replaceVersion",r),R(e,t,{actionType:"sanity.action.document.version.replace",document:r},n)}function Hs(e,t,r,n,s){return R(e,t,{actionType:"sanity.action.document.version.unpublish",versionId:r,publishedId:n},s)}function $s(e,t,r,n){let s;r instanceof ae||r instanceof pe?s={patch:r.serialize()}:r instanceof bt||r instanceof wt?s=r.serialize():s=r;const i=Array.isArray(s)?s:[s],a=n&&n.transactionId||void 0;return xe(e,t,"mutate",{mutations:i,transactionId:a},n)}function R(e,t,r,n){const s=Array.isArray(r)?r:[r],i=n&&n.transactionId||void 0,a=n&&n.skipCrossDatasetReferenceValidation||void 0,o=n&&n.dryRun||void 0;return xe(e,t,"actions",{actions:s,transactionId:i,skipCrossDatasetReferenceValidation:a,dryRun:o},n)}function xe(e,t,r,n,s={}){const i=r==="mutate",a=r==="actions",o=r==="query",l=i||a?"":Ns(n),u=!i&&!a&&l.length<nd,d=u?l:"",h=s.returnFirst,{timeout:m,token:p,tag:v,headers:f,returnQuery:y,lastLiveEventId:w,cacheMode:b}=s,x=q(e,r,d),A={method:u?"GET":"POST",uri:x,json:!0,body:u?void 0:n,query:i&&ed(s),timeout:m,headers:f,token:p,tag:v,returnQuery:y,perspective:s.perspective,resultSourceMap:s.resultSourceMap,lastLiveEventId:Array.isArray(w)?w[0]:w,cacheMode:b,canUseCdn:o,signal:s.signal,fetch:s.fetch,useAbortSignal:s.useAbortSignal,useCdn:s.useCdn};return Ke(e,t,A).pipe(Le(fr),U(td),U(N=>{if(!i)return N;const P=N.results||[];if(s.returnDocuments)return h?P[0]&&P[0].document:P.map(F=>F.document);const ke=h?"documentId":"documentIds",Et=h?P[0]&&P[0].id:P.map(F=>F.id);return{transactionId:N.transactionId,results:P,[ke]:Et}}))}function Tt(e,t,r,n,s={}){const i={[n]:r},a=Object.assign({returnFirst:!0,returnDocuments:!0},s);return xe(e,t,"mutate",{mutations:[i]},a)}const Ye=e=>e.config().dataset!==void 0&&e.config().projectId!==void 0||e.config()["~experimental_resource"]!==void 0,Gs=(e,t)=>Ye(e)&&t.startsWith(q(e,"query")),sd=(e,t)=>Ye(e)&&t.startsWith(q(e,"mutate")),id=(e,t)=>Ye(e)&&t.startsWith(q(e,"doc","")),ad=(e,t)=>Ye(e)&&t.startsWith(q(e,"listen")),od=(e,t)=>Ye(e)&&t.startsWith(q(e,"history","")),ld=(e,t)=>t.startsWith("/data/")||Gs(e,t)||sd(e,t)||id(e,t)||ad(e,t)||od(e,t);function Ke(e,t,r){const n=r.url||r.uri,s=e.config(),i=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&ld(e,n):r.canUseCdn;let a=(r.useCdn??s.useCdn)&&i;const o=r.tag&&s.requestTagPrefix?[s.requestTagPrefix,r.tag].join("."):r.tag||s.requestTagPrefix;if(o&&r.tag!==null&&(r.query={tag:ws(o),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&Gs(e,n)){const d=r.resultSourceMap??s.resultSourceMap;d!==void 0&&d!==!1&&(r.query={resultSourceMap:d,...r.query});const h=r.perspective||s.perspective;typeof h<"u"&&(h==="previewDrafts"&&Lu(),Es(h),r.query={perspective:Array.isArray(h)?h.join(","):h,...r.query},(Array.isArray(h)&&h.length>0||h==="previewDrafts"||h==="drafts")&&a&&(a=!1,Pu())),r.lastLiveEventId&&(r.query={...r.query,lastLiveEventId:r.lastLiveEventId}),r.returnQuery===!1&&(r.query={returnQuery:"false",...r.query}),a&&r.cacheMode=="noStale"&&(r.query={cacheMode:"noStale",...r.query})}const l=Zu(s,Object.assign({},r,{url:pr(e,n,a)})),u=new O(d=>t(l,s.requester).subscribe(d));return r.signal?u.pipe(cd(r.signal)):u}function j(e,t,r){return Ke(e,t,r).pipe(Le(n=>n.type==="response"),U(n=>n.body))}function q(e,t,r){const n=e.config();if(n["~experimental_resource"]){Ts(n);const a=hd(n),o=r!==void 0?`${t}/${r}`:t;return`${a}/${o}`.replace(/\/($|\?)/,"$1")}const s=ge(n),i=`/${t}/${s}`;return`/data${r!==void 0?`${i}/${r}`:i}`.replace(/\/($|\?)/,"$1")}function pr(e,t,r=!1){const{url:n,cdnUrl:s}=e.config();return`${r?s:n}/${t.replace(/^\//,"")}`}function cd(e){return t=>new O(r=>{const n=()=>r.error(dd(e));if(e&&e.aborted){n();return}const s=t.subscribe(r);return e.addEventListener("abort",n),()=>{e.removeEventListener("abort",n),s.unsubscribe()}})}const ud=!!globalThis.DOMException;function dd(e){if(ud)return new DOMException(e?.reason??"The operation was aborted.","AbortError");const t=new Error(e?.reason??"The operation was aborted.");return t.name="AbortError",t}const hd=e=>{if(!e["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");const{type:t,id:r}=e["~experimental_resource"];switch(t){case"dataset":{const n=r.split(".");if(n.length!==2)throw new Error('Dataset ID must be in the format "project.dataset"');return`/projects/${n[0]}/datasets/${n[1]}`}case"canvas":return`/canvases/${r}`;case"media-library":return`/media-libraries/${r}`;case"dashboard":return`/dashboards/${r}`;default:throw new Error(`Unsupported resource type: ${t.toString()}`)}};function Vs(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/generate/${n}`,body:r})}function fd(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/patch/${n}`,body:r})}function pd(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/prompt/${n}`,body:r})}function Ws(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/transform/${n}`,body:r})}function qs(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/translate/${n}`,body:r})}class md{#t;#e;constructor(t,r){this.#t=t,this.#e=r}generate(t){return Vs(this.#t,this.#e,t)}transform(t){return Ws(this.#t,this.#e,t)}translate(t){return qs(this.#t,this.#e,t)}}class vd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}generate(t){return S(Vs(this.#t,this.#e,t))}transform(t){return S(Ws(this.#t,this.#e,t))}translate(t){return S(qs(this.#t,this.#e,t))}prompt(t){return S(pd(this.#t,this.#e,t))}patch(t){return S(fd(this.#t,this.#e,t))}}class gd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}upload(t,r,n){return Xs(this.#t,this.#e,t,r,n)}}class xd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}upload(t,r,n){const s=Xs(this.#t,this.#e,t,r,n);return S(s.pipe(Le(i=>i.type==="response"),U(i=>i.body.document)))}}function Xs(e,t,r,n,s={}){Mu(r);let i=s.extract||void 0;i&&!i.length&&(i=["none"]);const a=e.config(),o=bd(s,n),{tag:l,label:u,title:d,description:h,creditLine:m,filename:p,source:v}=o,f={label:u,title:d,description:h,filename:p,meta:i,creditLine:m};return v&&(f.sourceId=v.id,f.sourceName=v.name,f.sourceUrl=v.url),Ke(e,t,{tag:l,method:"POST",timeout:o.timeout||0,uri:yd(a,r),headers:o.contentType?{"Content-Type":o.contentType}:{},query:f,body:n})}function yd(e,t){const r=t==="image"?"images":"files";if(e["~experimental_resource"]){const{type:s,id:i}=e["~experimental_resource"];switch(s){case"dataset":throw new Error("Assets are not supported for dataset resources, yet. Configure the client with `{projectId: <projectId>, dataset: <datasetId>}` instead.");case"canvas":return`/canvases/${i}/assets/${r}`;case"media-library":return`/media-libraries/${i}/upload`;case"dashboard":return`/dashboards/${i}/assets/${r}`;default:throw new Error(`Unsupported resource type: ${s.toString()}`)}}const n=ge(e);return`assets/${r}/${n}`}function bd(e,t){return typeof File>"u"||!(t instanceof File)?e:Object.assign({filename:e.preserveFilename===!1?void 0:t.name,contentType:t.type},e)}var wd=(e,t)=>Object.keys(t).concat(Object.keys(e)).reduce((r,n)=>(r[n]=typeof e[n]>"u"?t[n]:e[n],r),{});const Td=(e,t)=>t.reduce((r,n)=>(typeof e[n]>"u"||(r[n]=e[n]),r),{}),Ys=as(()=>J(()=>import("./browser-8gYOhkFu.js").then(e=>e.b),__vite__mapDeps([12,2]))).pipe(U(({default:e})=>e),ru(1));function Ks(){return function(e){return e.pipe(it((t,r)=>t instanceof Cs?Kc(Se({type:"reconnect"}),Qc(1e3).pipe(fe(()=>r))):ns(()=>t)))}}const Ed=14800,Sd=["includePreviousRevision","includeResult","includeMutations","includeAllVersions","visibility","effectFormat","tag"],Cd={includeResult:!0};function Qs(e,t,r={}){const{url:n,token:s,withCredentials:i,requestTagPrefix:a,headers:o}=this.config(),l=r.tag&&a?[a,r.tag].join("."):r.tag,u={...wd(r,Cd),tag:l},d=Td(u,Sd),h=Ns({query:e,params:t,options:{tag:l,...d}}),m=`${n}${q(this,"listen",h)}`;if(m.length>Ed)return ns(()=>new Error("Query too large for listener"));const p=u.events?u.events:["mutation"],v={};return i&&(v.withCredentials=!0),(s||o)&&(v.headers={},s&&(v.headers.Authorization=`Bearer ${s}`),o&&Object.assign(v.headers,o)),As(()=>(typeof EventSource>"u"||v.headers?Ys:Se(EventSource)).pipe(U(f=>new f(m,v))),p).pipe(Ks(),Le(f=>p.includes(f.type)),U(f=>({type:f.type,..."data"in f?f.data:{}})))}function Ad(e,t){return Md(typeof e=="function"?{predicate:e,...t}:e)}function Md(e){return t=>{let r,n=!1;const{predicate:s,...i}=e,a=t.pipe(nu(l=>{e.predicate(l)&&(n=!0,r=l)}),ls(()=>{n=!1,r=void 0}),cs(i)),o=new O(l=>{n&&l.next(r),l.complete()});return Zc(a,o)}}const on="2021-03-25";class Zs{#t;constructor(t){this.#t=t}events({includeDrafts:t=!1,tag:r}={}){de("live",this.#t.config());const{projectId:n,apiVersion:s,token:i,withCredentials:a,requestTagPrefix:o,headers:l}=this.#t.config(),u=s.replace(/^v/,"");if(u!=="X"&&u<on)throw new Error(`The live events API requires API version ${on} or later. The current API version is ${u}. Please update your API version to use this feature.`);if(t&&!i&&!a)throw new Error("The live events API requires a token or withCredentials when 'includeDrafts: true'. Please update your client configuration. The token should have the lowest possible access role.");const d=q(this.#t,"live/events"),h=new URL(this.#t.getUrl(d,!1)),m=r&&o?[o,r].join("."):r;m&&h.searchParams.set("tag",m),t&&h.searchParams.set("includeDrafts","true");const p={};t&&a&&(p.withCredentials=!0),(t&&i||l)&&(p.headers={},t&&i&&(p.headers.Authorization=`Bearer ${i}`),l&&Object.assign(p.headers,l));const v=`${h.href}::${JSON.stringify(p)}`,f=Ft.get(v);if(f)return f;const y=As(()=>(typeof EventSource>"u"||p.headers?Ys:Se(EventSource)).pipe(U(x=>new x(h.href,p))),["message","restart","welcome","reconnect","goaway"]),w=Id(h,{method:"OPTIONS",mode:"cors",credentials:p.withCredentials?"include":"omit",headers:p.headers}).pipe(it(()=>{throw new wu({projectId:n})})),b=y.pipe(Ks(),fe(x=>x.type==="reconnect"?w.pipe(fe(()=>Se(x))):Se(x)),it(x=>w.pipe(fe(()=>{throw x}))),U(x=>{if(x.type==="message"){const{data:A,...N}=x;return{...N,tags:A.tags}}return x})).pipe(ls(()=>Ft.delete(v)),Ad({predicate:x=>x.type==="welcome"}));return Ft.set(v,b),b}}function Id(e,t){return new O(r=>{const n=new AbortController,s=n.signal;return fetch(e,{...t,signal:n.signal}).then(i=>{r.next(i),r.complete()},i=>{s.aborted||r.error(i)}),()=>n.abort()})}const Ft=new Map;class Rd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}create(t,r){return Ce(this.#t,this.#e,"PUT",t,r)}edit(t,r){return Ce(this.#t,this.#e,"PATCH",t,r)}delete(t){return Ce(this.#t,this.#e,"DELETE",t)}list(){de("dataset",this.#t.config());const t=this.#t.config(),r=t.projectId;let n="/datasets";return t.useProjectHostname===!1&&(n=`/projects/${r}/datasets`),j(this.#t,this.#e,{uri:n,tag:null})}}class _d{#t;#e;constructor(t,r){this.#t=t,this.#e=r}create(t,r){return de("dataset",this.#t.config()),S(Ce(this.#t,this.#e,"PUT",t,r))}edit(t,r){return de("dataset",this.#t.config()),S(Ce(this.#t,this.#e,"PATCH",t,r))}delete(t){return de("dataset",this.#t.config()),S(Ce(this.#t,this.#e,"DELETE",t))}list(){de("dataset",this.#t.config());const t=this.#t.config(),r=t.projectId;let n="/datasets";return t.useProjectHostname===!1&&(n=`/projects/${r}/datasets`),S(j(this.#t,this.#e,{uri:n,tag:null}))}}function Ce(e,t,r,n,s){return de("dataset",e.config()),ys(n),j(e,t,{method:r,uri:`/datasets/${n}`,body:s,tag:null})}class Js{#t;#e;constructor(t,r){this.#t=t,this.#e=r}getPlaybackInfo(t,r={}){const n=this.#t.config()["~experimental_resource"]?.id,{instanceId:s,libraryId:i}=Pd(t),a=i||n;if(!a)throw new Error("Could not determine Media Library ID - you need to provide a valid Media Library ID in the client config or a Media Library GDR");const o=Ld(s,a),l=kd(r);return j(this.#t,this.#e,{method:"GET",uri:o,query:l})}}class Nd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}getPlaybackInfo(t,r={}){return S(new Js(this.#t.observable,this.#e).getPlaybackInfo(t,r))}}const Od=/^media-library:(ml[^:]+):([^:]+)$/;function jd(e){return typeof e=="object"&&"_ref"in e}function Pd(e){const t=jd(e)?e._ref:e,r=Od.exec(t);if(r){const[,n,s]=r;return{libraryId:n,instanceId:s}}if(typeof e=="string"&&e.startsWith("video-"))return{instanceId:e};throw new Error(`Invalid video asset instance identifier "${t}": must be a valid video instance id or a Global Dataset Reference (GDR) to the video asset in the Media Library`)}function Ld(e,t){return`/media-libraries/${t}/video/${e}/playback-info`}function kd(e){const t={};if(e.transformations){const{thumbnail:r,animated:n,storyboard:s}=e.transformations;r&&(r.width&&(t.thumbnailWidth=r.width),r.height&&(t.thumbnailHeight=r.height),r.time!==void 0&&(t.thumbnailTime=r.time),r.fit&&(t.thumbnailFit=r.fit),r.format&&(t.thumbnailFormat=r.format)),n&&(n.width&&(t.animatedWidth=n.width),n.height&&(t.animatedHeight=n.height),n.start!==void 0&&(t.animatedStart=n.start),n.end!==void 0&&(t.animatedEnd=n.end),n.fps&&(t.animatedFps=n.fps),n.format&&(t.animatedFormat=n.format)),s&&s.format&&(t.storyboardFormat=s.format)}return e.expiration&&(t.expiration=e.expiration),t}class Dd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}list(t){const r={},n="/projects";return t?.includeMembers===!1&&(r.includeMembers="false"),t?.organizationId&&(r.organizationId=t.organizationId),j(this.#t,this.#e,{uri:n,query:r})}getById(t){return j(this.#t,this.#e,{uri:`/projects/${t}`})}}class Ud{#t;#e;constructor(t,r){this.#t=t,this.#e=r}list(t){const r={},n="/projects";return t?.includeMembers===!1&&(r.includeMembers="false"),t?.organizationId&&(r.organizationId=t.organizationId),S(j(this.#t,this.#e,{uri:n,query:r}))}getById(t){return S(j(this.#t,this.#e,{uri:`/projects/${t}`}))}}const ln=hu("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",8),lt=(e,t)=>t?Xe(e,t):ps(e);function ct(e,{releaseId:t,publishedId:r,document:n}){if(r&&n._id){const s=lt(r,t);return Ru(s,n),s}if(n._id){const s=gt(n._id),i=xt(n._id);if(!s&&!i)throw new Error(`\`${e}()\` requires a document with an \`_id\` that is a version or draft ID`);if(t){if(s)throw new Error(`\`${e}()\` was called with a document ID (\`${n._id}\`) that is a draft ID, but a release ID (\`${t}\`) was also provided.`);const a=ms(n._id);if(a!==t)throw new Error(`\`${e}()\` was called with a document ID (\`${n._id}\`) that is a version ID, but the release ID (\`${t}\`) does not match the document's version ID (\`${a}\`).`)}return n._id}if(r)return lt(r,t);throw new Error(`\`${e}()\` requires either a publishedId or a document with an \`_id\``)}const Bd=(e,t)=>{if(typeof e=="object"&&e!==null&&("releaseId"in e||"metadata"in e)){const{releaseId:r=ln(),metadata:n={}}=e;return[r,n,t]}return[ln(),{},e]},ei=(e,t)=>{const[r,n,s]=Bd(e,t),i={...n,releaseType:n.releaseType||"undecided"};return{action:{actionType:"sanity.action.release.create",releaseId:r,metadata:i},options:s}};class Fd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}get({releaseId:t},r){return je(this.#t,this.#e,`_.releases.${t}`,r)}create(t,r){const{action:n,options:s}=ei(t,r),{releaseId:i,metadata:a}=n;return R(this.#t,this.#e,n,s).pipe(U(o=>({...o,releaseId:i,metadata:a})))}edit({releaseId:t,patch:r},n){const s={actionType:"sanity.action.release.edit",releaseId:t,patch:r};return R(this.#t,this.#e,s,n)}publish({releaseId:t},r){const n={actionType:"sanity.action.release.publish",releaseId:t};return R(this.#t,this.#e,n,r)}archive({releaseId:t},r){const n={actionType:"sanity.action.release.archive",releaseId:t};return R(this.#t,this.#e,n,r)}unarchive({releaseId:t},r){const n={actionType:"sanity.action.release.unarchive",releaseId:t};return R(this.#t,this.#e,n,r)}schedule({releaseId:t,publishAt:r},n){const s={actionType:"sanity.action.release.schedule",releaseId:t,publishAt:r};return R(this.#t,this.#e,s,n)}unschedule({releaseId:t},r){const n={actionType:"sanity.action.release.unschedule",releaseId:t};return R(this.#t,this.#e,n,r)}delete({releaseId:t},r){const n={actionType:"sanity.action.release.delete",releaseId:t};return R(this.#t,this.#e,n,r)}fetchDocuments({releaseId:t},r){return Ps(this.#t,this.#e,t,r)}}class zd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}get({releaseId:t},r){return S(je(this.#t,this.#e,`_.releases.${t}`,r))}async create(t,r){const{action:n,options:s}=ei(t,r),{releaseId:i,metadata:a}=n;return{...await S(R(this.#t,this.#e,n,s)),releaseId:i,metadata:a}}edit({releaseId:t,patch:r},n){const s={actionType:"sanity.action.release.edit",releaseId:t,patch:r};return S(R(this.#t,this.#e,s,n))}publish({releaseId:t},r){const n={actionType:"sanity.action.release.publish",releaseId:t};return S(R(this.#t,this.#e,n,r))}archive({releaseId:t},r){const n={actionType:"sanity.action.release.archive",releaseId:t};return S(R(this.#t,this.#e,n,r))}unarchive({releaseId:t},r){const n={actionType:"sanity.action.release.unarchive",releaseId:t};return S(R(this.#t,this.#e,n,r))}schedule({releaseId:t,publishAt:r},n){const s={actionType:"sanity.action.release.schedule",releaseId:t,publishAt:r};return S(R(this.#t,this.#e,s,n))}unschedule({releaseId:t},r){const n={actionType:"sanity.action.release.unschedule",releaseId:t};return S(R(this.#t,this.#e,n,r))}delete({releaseId:t},r){const n={actionType:"sanity.action.release.delete",releaseId:t};return S(R(this.#t,this.#e,n,r))}fetchDocuments({releaseId:t},r){return S(Ps(this.#t,this.#e,t,r))}}class Hd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}getById(t){return j(this.#t,this.#e,{uri:`/users/${t}`})}}class $d{#t;#e;constructor(t,r){this.#t=t,this.#e=r}getById(t){return S(j(this.#t,this.#e,{uri:`/users/${t}`}))}}class ut{assets;datasets;live;mediaLibrary;projects;users;agent;releases;#t;#e;listen=Qs;constructor(t,r=Ve){this.config(r),this.#e=t,this.assets=new gd(this,this.#e),this.datasets=new Rd(this,this.#e),this.live=new Zs(this),this.mediaLibrary={video:new Js(this,this.#e)},this.projects=new Dd(this,this.#e),this.users=new Hd(this,this.#e),this.agent={action:new md(this,this.#e)},this.releases=new Fd(this,this.#e)}clone(){return new ut(this.#e,this.config())}config(t){if(t===void 0)return{...this.#t};if(this.#t&&this.#t.allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.#t=Ss(t,this.#t||{}),this}withConfig(t){const r=this.config();return new ut(this.#e,{...r,...t,stega:{...r.stega||{},...typeof t?.stega=="boolean"?{enabled:t.stega}:t?.stega||{}}})}fetch(t,r,n){return Os(this,this.#e,this.#t.stega,t,r,n)}getDocument(t,r){if(r?.includeAllVersions===!0)return je(this,this.#e,t,{...r,includeAllVersions:!0});const n={signal:r?.signal,tag:r?.tag,releaseId:r?.releaseId,...r&&"includeAllVersions"in r?{includeAllVersions:!1}:{}};return je(this,this.#e,t,n)}getDocuments(t,r){return js(this,this.#e,t,r)}create(t,r){return Tt(this,this.#e,t,"create",r)}createIfNotExists(t,r){return Ls(this,this.#e,t,r)}createOrReplace(t,r){return ks(this,this.#e,t,r)}createVersion({document:t,publishedId:r,releaseId:n,baseId:s,ifBaseRevisionId:i},a){if(!t)return Us(this,this.#e,r,s,n,i,a);const o=ct("createVersion",{document:t,publishedId:r,releaseId:n}),l={...t,_id:o},u=r||yt(t._id);return Ds(this,this.#e,l,u,a)}delete(t,r){return Bs(this,this.#e,t,r)}discardVersion({releaseId:t,publishedId:r},n,s){const i=lt(r,t);return Fs(this,this.#e,i,n,s)}replaceVersion({document:t,publishedId:r,releaseId:n},s){const i=ct("replaceVersion",{document:t,publishedId:r,releaseId:n}),a={...t,_id:i};return zs(this,this.#e,a,s)}unpublishVersion({releaseId:t,publishedId:r},n){const s=Xe(r,t);return Hs(this,this.#e,s,r,n)}mutate(t,r){return $s(this,this.#e,t,r)}patch(t,r){return new pe(t,r,this)}transaction(t){return new wt(t,this)}action(t,r){return R(this,this.#e,t,r)}request(t){return j(this,this.#e,t)}getUrl(t,r){return pr(this,t,r)}getDataUrl(t,r){return q(this,t,r)}}class dt{assets;datasets;live;mediaLibrary;projects;users;agent;releases;observable;#t;#e;listen=Qs;constructor(t,r=Ve){this.config(r),this.#e=t,this.assets=new xd(this,this.#e),this.datasets=new _d(this,this.#e),this.live=new Zs(this),this.mediaLibrary={video:new Nd(this,this.#e)},this.projects=new Ud(this,this.#e),this.users=new $d(this,this.#e),this.agent={action:new vd(this,this.#e)},this.releases=new zd(this,this.#e),this.observable=new ut(t,r)}clone(){return new dt(this.#e,this.config())}config(t){if(t===void 0)return{...this.#t};if(this.#t&&this.#t.allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(t),this.#t=Ss(t,this.#t||{}),this}withConfig(t){const r=this.config();return new dt(this.#e,{...r,...t,stega:{...r.stega||{},...typeof t?.stega=="boolean"?{enabled:t.stega}:t?.stega||{}}})}fetch(t,r,n){return S(Os(this,this.#e,this.#t.stega,t,r,n))}getDocument(t,r){if(r?.includeAllVersions===!0)return S(je(this,this.#e,t,{...r,includeAllVersions:!0}));const n={signal:r?.signal,tag:r?.tag,releaseId:r?.releaseId,...r&&"includeAllVersions"in r?{includeAllVersions:!1}:{}};return S(je(this,this.#e,t,n))}getDocuments(t,r){return S(js(this,this.#e,t,r))}create(t,r){return S(Tt(this,this.#e,t,"create",r))}createIfNotExists(t,r){return S(Ls(this,this.#e,t,r))}createOrReplace(t,r){return S(ks(this,this.#e,t,r))}createVersion({document:t,publishedId:r,releaseId:n,baseId:s,ifBaseRevisionId:i},a){if(!t)return kt(Us(this,this.#e,r,s,n,i,a));const o=ct("createVersion",{document:t,publishedId:r,releaseId:n}),l={...t,_id:o},u=r||yt(t._id);return kt(Ds(this,this.#e,l,u,a))}delete(t,r){return S(Bs(this,this.#e,t,r))}discardVersion({releaseId:t,publishedId:r},n,s){const i=lt(r,t);return S(Fs(this,this.#e,i,n,s))}replaceVersion({document:t,publishedId:r,releaseId:n},s){const i=ct("replaceVersion",{document:t,publishedId:r,releaseId:n}),a={...t,_id:i};return kt(zs(this,this.#e,a,s))}unpublishVersion({releaseId:t,publishedId:r},n){const s=Xe(r,t);return S(Hs(this,this.#e,s,r,n))}mutate(t,r){return S($s(this,this.#e,t,r))}patch(t,r){return new ae(t,r,this)}transaction(t){return new bt(t,this)}action(t,r){return S(R(this,this.#e,t,r))}request(t){return S(j(this,this.#e,t))}dataRequest(t,r,n){return S(xe(this,this.#e,t,r,n))}getUrl(t,r){return pr(this,t,r)}getDataUrl(t,r){return q(this,t,r)}}function Gd(e,t){return{requester:tn(e),createClient:r=>{const n=tn(e,{ignoreWarnings:r.ignoreWarnings});return new t((s,i)=>(i||n)({maxRedirects:0,maxRetries:r.maxRetries,retryDelay:r.retryDelay,lineage:r.lineage,...s}),r)}}}var Vd=[];const Wd=Gd(Vd,dt),qd=Wd.createClient,cn="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function Xd(e){const[,t,r,n]=e.split("-");if(!t||!r||!n)throw new Error(`Malformed asset _ref '${e}'. Expected an id like "${cn}".`);const[s,i]=r.split("x"),a=+s,o=+i;if(!(isFinite(a)&&isFinite(o)))throw new Error(`Malformed asset _ref '${e}'. Expected an id like "${cn}".`);return{id:t,width:a,height:o,format:n}}const Yd=e=>{const t=e;return t?typeof t._ref=="string":!1},Kd=e=>{const t=e;return t?typeof t._id=="string":!1},Qd=e=>{const t=e;return t&&t.asset?typeof t.asset.url=="string":!1},Zd=e=>{if(typeof e=="object"&&e!==null){const t=e;return t._upload&&(!t.asset||!t.asset._ref)}return!1};function Jd(e){if(!e)return null;let t;if(typeof e=="string"&&eh(e))t={asset:{_ref:un(e)}};else if(typeof e=="string")t={asset:{_ref:e}};else if(Yd(e))t={asset:e};else if(Kd(e))t={asset:{_ref:e._id||""}};else if(Qd(e))t={asset:{_ref:un(e.asset.url)}};else if(typeof e.asset=="object")t={...e};else return null;const r=e;return r.crop&&(t.crop=r.crop),r.hotspot&&(t.hotspot=r.hotspot),th(t)}function eh(e){return/^https?:\/\//.test(`${e}`)}function un(e){return`image-${e.split("/").slice(-1)[0]}`.replace(/\.([a-z]+)$/,"-$1")}function th(e){if(e.crop&&e.hotspot)return e;const t={...e};return t.crop||(t.crop={left:0,top:0,bottom:0,right:0}),t.hotspot||(t.hotspot={x:.5,y:.5,height:1,width:1}),t}const ti=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"],["frame","frame"]];function rh(e){let t={...e||{}};const r=t.source;delete t.source;const n=Jd(r);if(!n){if(r&&Zd(r))return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8HwQACfsD/QNViZkAAAAASUVORK5CYII=";throw new Error(`Unable to resolve image URL from source (${JSON.stringify(r)})`)}const s=n.asset._ref||n.asset._id||"",i=Xd(s),a=Math.round(n.crop.left*i.width),o=Math.round(n.crop.top*i.height),l={left:a,top:o,width:Math.round(i.width-n.crop.right*i.width-a),height:Math.round(i.height-n.crop.bottom*i.height-o)},u=n.hotspot.height*i.height/2,d=n.hotspot.width*i.width/2,h=n.hotspot.x*i.width,m=n.hotspot.y*i.height,p={left:h-d,top:m-u,right:h+d,bottom:m+u};return t.rect||t.focalPoint||t.ignoreImageParams||t.crop||(t={...t,...sh({crop:l,hotspot:p},t)}),nh({...t,asset:i})}function nh(e){const t=(e.baseUrl||"https://cdn.sanity.io").replace(/\/+$/,""),r=e.vanityName?`/${e.vanityName}`:"",n=`${e.asset.id}-${e.asset.width}x${e.asset.height}.${e.asset.format}${r}`,s=e.mediaLibraryId?`${t}/media-libraries/${e.mediaLibraryId}/images/${n}`:`${t}/images/${e.projectId}/${e.dataset}/${n}`,i=[];if(e.rect){const{left:o,top:l,width:u,height:d}=e.rect;(o!==0||l!==0||d!==e.asset.height||u!==e.asset.width)&&i.push(`rect=${o},${l},${u},${d}`)}e.bg&&i.push(`bg=${e.bg}`),e.focalPoint&&(i.push(`fp-x=${e.focalPoint.x}`),i.push(`fp-y=${e.focalPoint.y}`));const a=[e.flipHorizontal&&"h",e.flipVertical&&"v"].filter(Boolean).join("");return a&&i.push(`flip=${a}`),ti.forEach(o=>{const[l,u]=o;typeof e[l]<"u"?i.push(`${u}=${encodeURIComponent(e[l])}`):typeof e[u]<"u"&&i.push(`${u}=${encodeURIComponent(e[u])}`)}),i.length===0?s:`${s}?${i.join("&")}`}function sh(e,t){let r;const n=t.width,s=t.height;if(!(n&&s))return{width:n,height:s,rect:e.crop};const i=e.crop,a=e.hotspot,o=n/s;if(i.width/i.height>o){const l=Math.round(i.height),u=Math.round(l*o),d=Math.max(0,Math.round(i.top)),h=Math.round((a.right-a.left)/2+a.left);let m=Math.max(0,Math.round(h-u/2));m<i.left?m=i.left:m+u>i.left+i.width&&(m=i.left+i.width-u),r={left:m,top:d,width:u,height:l}}else{const l=i.width,u=Math.round(l/o),d=Math.max(0,Math.round(i.left)),h=Math.round((a.bottom-a.top)/2+a.top);let m=Math.max(0,Math.round(h-u/2));m<i.top?m=i.top:m+u>i.top+i.height&&(m=i.top+i.height-u),r={left:d,top:m,width:l,height:u}}return{width:n,height:s,rect:r}}const ih=["clip","crop","fill","fillmax","max","scale","min"],ah=["top","bottom","left","right","center","focalpoint","entropy"],oh=["format"];function lh(e){return e&&"config"in e?typeof e.config=="function":!1}function ch(e){return e&&"clientConfig"in e?typeof e.clientConfig=="object":!1}function dn(e){const{apiHost:t,projectId:r,dataset:n}=e,s={baseUrl:(t||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn.")},i=e["~experimental_resource"];if(i?.type==="media-library"){if(typeof i.id!="string"||i.id.length===0)throw new Error('Media library clients must include an id in "~experimental_resource"');return{...s,mediaLibraryId:i.id}}return{...s,projectId:r,dataset:n}}function uh(e){const t=ti;for(const r of t){const[n,s]=r;if(e===n||e===s)return n}return e}function ri(e){let t={};return lh(e)?t=dn(e.config()):ch(e)?t=dn(e.clientConfig):t=e||{},t}function dh(e,t){const r=ri(t);return new e(null,r)}function hh(e){return dh(ht,e)}function fh(e,t){const r=t.baseUrl||e.baseUrl,n={baseUrl:r};for(const s in t)if(t.hasOwnProperty(s)){const i=uh(s);n[i]=t[s]}return{baseUrl:r,...n}}class ht{options;constructor(t,r){this.options=t?{...t.options||{},...r||{}}:{...r||{}}}withOptions(t){const r=fh(this.options,t);return new ht(this,r)}image(t){return this.withOptions({source:t})}dataset(t){return this.withOptions({dataset:t})}projectId(t){return this.withOptions({projectId:t})}withClient(t){const r=ri(t),n={...this.options};return delete n.baseUrl,delete n.projectId,delete n.dataset,delete n.mediaLibraryId,new ht(null,{...r,...n})}bg(t){return this.withOptions({bg:t})}dpr(t){return this.withOptions(t&&t!==1?{dpr:t}:{})}width(t){return this.withOptions({width:t})}height(t){return this.withOptions({height:t})}focalPoint(t,r){return this.withOptions({focalPoint:{x:t,y:r}})}maxWidth(t){return this.withOptions({maxWidth:t})}minWidth(t){return this.withOptions({minWidth:t})}maxHeight(t){return this.withOptions({maxHeight:t})}minHeight(t){return this.withOptions({minHeight:t})}size(t,r){return this.withOptions({width:t,height:r})}blur(t){return this.withOptions({blur:t})}sharpen(t){return this.withOptions({sharpen:t})}rect(t,r,n,s){return this.withOptions({rect:{left:t,top:r,width:n,height:s}})}format(t){return this.withOptions({format:t})}invert(t){return this.withOptions({invert:t})}orientation(t){return this.withOptions({orientation:t})}quality(t){return this.withOptions({quality:t})}forceDownload(t){return this.withOptions({download:t})}flipHorizontal(){return this.withOptions({flipHorizontal:!0})}flipVertical(){return this.withOptions({flipVertical:!0})}ignoreImageParams(){return this.withOptions({ignoreImageParams:!0})}fit(t){if(ih.indexOf(t)===-1)throw new Error(`Invalid fit mode "${t}"`);return this.withOptions({fit:t})}crop(t){if(ah.indexOf(t)===-1)throw new Error(`Invalid crop mode "${t}"`);return this.withOptions({crop:t})}saturation(t){return this.withOptions({saturation:t})}auto(t){if(oh.indexOf(t)===-1)throw new Error(`Invalid auto mode "${t}"`);return this.withOptions({auto:t})}pad(t){return this.withOptions({pad:t})}vanityName(t){return this.withOptions({vanityName:t})}frame(t){if(t!==1)throw new Error(`Invalid frame value "${t}"`);return this.withOptions({frame:t})}url(){return rh(this.options)}toString(){return this.url()}}function ph(e){let t=!1,r;return(...n)=>(t||(r=e(...n),t=!0),r)}const mh=e=>ph((...t)=>{console.warn(e.join(" "),...t)}),vh=mh(["The default export of @sanity/image-url has been deprecated. Use the named export `createImageUrlBuilder` instead."]);function gh(e){return function(t){return vh(),e(t)}}const xh=gh(hh),yh="8s8dcy9g",bh="production",Kt=qd({projectId:yh,dataset:bh,useCdn:!1,apiVersion:"2023-05-03"});Kt&&xh(Kt);const wh=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[s,i]=g.useState("LOCAL");return g.useEffect(()=>{(async()=>{try{console.log("[System] Connecting to Satellite Link (Sanity.io)...");const u=(await Kt.fetch(`*[_type == "devLog"] | order(date desc) {
                    _id,
                    title,
                    date,
                    tags,
                    summary,
                    content
                }`)).map(m=>({id:m._id,title:m.title,date:m.date,tags:m.tags||[],summary:m.summary,content:m.content})),d=[...u,...jt],h=Array.from(new Map(d.map(m=>[m.id,m])).values());t(h),i("HYBRID (CMS + LOCAL)"),console.log(`[System] Satellite Link Established. ${u.length} CMS logs + ${jt.length} Local logs.`)}catch(o){console.error("[System] Satellite Link Failed:",o),console.warn("[System] Switching to Emergency Local Backup."),t(jt),i("LOCAL_BACKUP")}finally{n(!1)}})()},[]),{logs:e,isLoading:r,source:s}},Th=()=>{const e=T(f=>f.blackBoxOpen),t=T(f=>f.currentLogId),r=T(f=>f.closeBlackBox),{playHover:n,playClick:s}=Ie(),{logs:i,isLoading:a,source:o}=wh(),[l,u]=g.useState(null),[d,h]=g.useState(null);g.useEffect(()=>{!a&&e&&(t?u(t):!l&&i.length>0&&u(i[0]?.id))},[e,t,a,i]),g.useEffect(()=>{const f=y=>{y.key==="Escape"&&r()};return e&&window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,r]);const m=g.useMemo(()=>i?d?i.filter(f=>f.tags.includes(d)):i:[],[d,i]),p=g.useMemo(()=>{const f=new Set;return i&&i.forEach(y=>y.tags.forEach(w=>f.add(w))),Array.from(f)},[i]),v=i.find(f=>f.id===l);return e?c.jsx(mt,{children:e&&c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md pointer-events-auto",onClick:r,children:c.jsxs(_.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-[95vw] max-w-6xl h-[85vh] flex flex-col md:flex-row overflow-hidden rounded-lg border border-cyan-500/30 bg-black shadow-2xl",onClick:f=>f.stopPropagation(),style:{boxShadow:"0 0 60px rgba(6, 182, 212, 0.2), inset 0 0 100px rgba(6, 182, 212, 0.05)"},children:[c.jsx("div",{className:"absolute inset-0 pointer-events-none z-50 opacity-10",style:{background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.3) 2px, rgba(0,0,0,0.3) 4px)"}}),c.jsxs("div",{className:"absolute top-0 left-0 right-0 h-10 bg-gradient-to-b from-cyan-950/80 to-transparent border-b border-cyan-500/20 flex items-center justify-between px-4 z-40",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:""}),c.jsxs("span",{className:"text-cyan-300 font-mono text-xs tracking-widest",children:["BLACK BOX :: SYSTEM ARCHIVE v2.1",c.jsxs("span",{className:"ml-2 text-[10px] opacity-70",children:["[",a?"BOOTING...":`LINK: ${o}`,"]"]})]})]}),c.jsx("button",{onClick:()=>{s(),r()},onMouseEnter:n,className:"text-cyan-500/70 hover:text-cyan-300 transition-colors text-xl font-mono",children:""})]}),a?c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-cyan-500 font-mono",children:[c.jsx("div",{className:"text-xl animate-pulse mb-4",children:"ESTABLISHING UPLINK..."}),c.jsx("div",{className:"text-sm opacity-70",children:"Connecting to Satellite Database"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full md:w-72 border-b md:border-b-0 md:border-r border-cyan-500/20 pt-12 pb-4 flex flex-col bg-black/50 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto px-4 custom-scrollbar",children:[c.jsxs("h3",{className:"text-cyan-400 font-mono text-xs tracking-widest mb-3 border-b border-cyan-500/20 pb-2",children:["ARCHIVE LOGS [",m.length,"]"]}),c.jsx("div",{className:"space-y-1",children:m.map(f=>c.jsxs("button",{onClick:()=>{s(),u(f.id)},onMouseEnter:n,className:`w-full text-left px-3 py-2 rounded border transition-all text-xs font-mono group ${l===f.id?"border-cyan-500 bg-cyan-500/10 text-cyan-300":"border-transparent hover:border-cyan-500/30 hover:bg-cyan-500/5 text-white/60 hover:text-white"}`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-cyan-500",children:l===f.id?"":""}),c.jsx("span",{className:"truncate group-hover:text-cyan-200 transition-colors",children:f.title})]}),c.jsx("div",{className:"text-[10px] text-white/40 mt-1 pl-5",children:f.date})]},f.id))})]}),c.jsxs("div",{className:"px-4 pt-4 border-t border-cyan-500/20",children:[c.jsx("h3",{className:"text-cyan-400 font-mono text-xs tracking-widest mb-2",children:"TAGS"}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.jsx("button",{onClick:()=>{s(),h(null)},onMouseEnter:n,className:`px-2 py-0.5 text-[10px] font-mono rounded border transition-all ${d===null?"border-cyan-500 bg-cyan-500/20 text-cyan-300":"border-white/10 text-white/40 hover:text-white hover:border-white/30"}`,children:"ALL"}),p.slice(0,10).map(f=>c.jsxs("button",{onClick:()=>{s(),h(f)},onMouseEnter:n,className:`px-2 py-0.5 text-[10px] font-mono rounded border transition-all ${d===f?"border-cyan-500 bg-cyan-500/20 text-cyan-300":"border-white/10 text-white/40 hover:text-white hover:border-white/30"}`,style:d===f?{borderColor:ze[f]||"#06b6d4",color:ze[f]||"#06b6d4"}:{},children:["#",f]},f))]})]})]}),c.jsx("div",{className:"flex-1 pt-12 pb-6 px-6 overflow-y-auto custom-scrollbar",children:v?c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsxs("div",{className:"mb-6 border-b border-cyan-500/20 pb-4",children:[c.jsxs("div",{className:"text-cyan-500 font-mono text-[10px] tracking-widest mb-2",children:["LOG ENTRY: ",v.id?v.id.toUpperCase():"UNKNOWN"]}),c.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white font-orbitron mb-2",children:v.title}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs font-mono",children:[c.jsxs("span",{className:"text-white/40",children:["DATE: ",c.jsx("span",{className:"text-cyan-300",children:v.date})]}),c.jsx("div",{className:"flex gap-1",children:v.tags&&v.tags.map(f=>c.jsxs("span",{className:"px-2 py-0.5 rounded-full text-[10px] border",style:{borderColor:`${ze[f]||"#06b6d4"}50`,color:ze[f]||"#06b6d4",backgroundColor:`${ze[f]||"#06b6d4"}15`},children:["#",f]},f))})]}),c.jsx("p",{className:"text-white/60 text-sm mt-3 italic",children:v.summary})]}),c.jsx("div",{className:"prose prose-invert prose-cyan max-w-none pb-20",children:c.jsx(Eh,{content:v.content})}),c.jsxs("div",{className:"mt-8 pt-4 border-t border-cyan-500/20 flex justify-between",children:[c.jsx(hn,{direction:"prev",logs:i,currentId:l,onNavigate:f=>{s(),u(f)}}),c.jsx(hn,{direction:"next",logs:i,currentId:l,onNavigate:f=>{s(),u(f)}})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-white/30 font-mono text-sm",children:"[NO LOG SELECTED]"})})]}),c.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-lg",style:{boxShadow:"inset 0 0 150px rgba(6, 182, 212, 0.1)"}})]},"blackbox-content")},"blackbox-backdrop")}):null},Eh=({content:e})=>{if(!e)return null;const t=e.split(`
`),r=[];let n=!1,s=[],i=!1,a=[];for(let o=0;o<t.length;o++){const l=t[o];if(l.startsWith("```")){n?(r.push(c.jsx("pre",{className:"bg-black/50 border border-cyan-500/20 rounded-lg p-4 overflow-x-auto my-4 text-left",children:c.jsx("code",{className:"text-xs md:text-sm font-mono text-cyan-300/90 whitespace-pre",children:s.join(`
`)})},`code-${o}`)),s=[],n=!1):n=!0;continue}if(n){s.push(l);continue}if(l.includes("|")&&l.trim().startsWith("|")){if(i||(i=!0,a=[]),l.includes("---"))continue;a.push(l.split("|").filter(u=>u.trim()).map(u=>u.trim()));continue}else i&&(r.push(c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full my-4 text-sm border-collapse min-w-[500px]",children:[c.jsx("thead",{children:c.jsx("tr",{className:"border-b border-cyan-500/30",children:a[0]?.map((u,d)=>c.jsx("th",{className:"text-left py-2 px-3 text-cyan-400 font-mono whitespace-nowrap",children:u},d))})}),c.jsx("tbody",{children:a.slice(1).map((u,d)=>c.jsx("tr",{className:"border-b border-white/10 hover:bg-white/5",children:u.map((h,m)=>c.jsx("td",{className:"py-2 px-3 text-white/70",children:h},m))},d))})]})},`table-${o}`)),i=!1,a=[]);if(!l.trim()){r.push(c.jsx("div",{className:"h-4"},`space-${o}`));continue}if(l.startsWith("## ")){r.push(c.jsx("h2",{className:"text-xl font-bold text-cyan-400 mt-6 mb-3 font-orbitron border-l-2 border-cyan-500 pl-3",children:l.slice(3)},`h2-${o}`));continue}if(l.startsWith("### ")){r.push(c.jsx("h3",{className:"text-lg font-bold text-white mt-4 mb-2",children:l.slice(4)},`h3-${o}`));continue}if(l.startsWith("> ")){r.push(c.jsx("blockquote",{className:"border-l-2 border-purple-500 pl-4 my-4 text-white/70 italic bg-purple-500/5 py-2 pr-4 rounded-r",children:et(l.slice(2))},`quote-${o}`));continue}if(l.match(/^(\d+)\. /)){r.push(c.jsxs("div",{className:"flex gap-2 text-white/80 my-1 ml-2",children:[c.jsxs("span",{className:"text-cyan-500 font-mono",children:[l.match(/^(\d+)/)[1],"."]}),c.jsx("span",{children:et(l.replace(/^\d+\. /,""))})]},`li-${o}`));continue}if(l.startsWith("- ")){r.push(c.jsxs("div",{className:"flex gap-2 text-white/80 my-1 ml-2",children:[c.jsx("span",{className:"text-cyan-500",children:""}),c.jsx("span",{children:et(l.slice(2))})]},`li-${o}`));continue}if(l==="---"){r.push(c.jsx("hr",{className:"my-6 border-cyan-500/20"},`hr-${o}`));continue}r.push(c.jsx("p",{className:"text-white/80 leading-relaxed my-2",children:et(l)},`p-${o}`))}return c.jsx(c.Fragment,{children:r})},et=e=>e.split(/(`[^`]+`|\*\*[^*]+\*\*|\*[^*]+\*)/).map((r,n)=>r.startsWith("`")&&r.endsWith("`")?c.jsx("code",{className:"bg-cyan-500/10 text-cyan-300 px-1 rounded text-sm font-mono",children:r.slice(1,-1)},n):r.startsWith("**")&&r.endsWith("**")?c.jsx("strong",{className:"text-white font-bold",children:r.slice(2,-2)},n):r.startsWith("*")&&r.endsWith("*")?c.jsx("em",{className:"italic text-white/70",children:r.slice(1,-1)},n):r),hn=({direction:e,logs:t,currentId:r,onNavigate:n})=>{if(!t)return null;const s=t.findIndex(o=>o.id===r),i=e==="prev"?s-1:s+1,a=t[i];return a?c.jsxs("button",{onClick:()=>n(a.id),className:"flex items-center gap-2 text-xs font-mono text-white/50 hover:text-cyan-400 transition-colors group",children:[e==="prev"&&c.jsx("span",{className:"text-cyan-500 group-hover:-translate-x-1 transition-transform",children:""}),c.jsx("span",{className:"hidden md:inline",children:a.title}),c.jsx("span",{className:"md:hidden",children:e==="prev"?"PREV":"NEXT"}),e==="next"&&c.jsx("span",{className:"text-cyan-500 group-hover:translate-x-1 transition-transform",children:""})]}):c.jsx("div",{})};class Sh extends V.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Uncaught error:",t,r),this.setState({errorInfo:r})}render(){return this.state.hasError?c.jsxs("div",{style:{padding:"20px",color:"#ff0033",backgroundColor:"black",height:"100vh",fontFamily:"monospace"},children:[c.jsx("h1",{children:"SYSTEM CRITICAL FAILURE"}),c.jsx("h2",{style:{color:"white"},children:"Metaverse OS has encountered a fatal error."}),c.jsxs("details",{style:{whiteSpace:"pre-wrap",marginTop:"20px",color:"#888"},children:[this.state.error&&this.state.error.toString(),c.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),c.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",backgroundColor:"#333",color:"white",border:"1px solid #ff0033",cursor:"pointer"},children:"REBOOT SYSTEM"})]}):this.props.children}}function Ch(){const e=T(t=>t.currentScene);return g.useEffect(()=>{if(e!=="boot"){const t=new URL(window.location);t.searchParams.set("scene",e),window.history.pushState({},"",t)}else{const t=new URL(window.location);t.searchParams.delete("scene"),window.history.replaceState({},"",t)}},[e]),c.jsx(Sn,{children:c.jsx(Sh,{children:c.jsxs("div",{className:"w-full h-screen bg-background text-text selection:bg-primary/30 selection:text-white cursor-none overflow-hidden",children:[c.jsxs(na,{children:[c.jsx("title",{children:"Yesol Heo | Cinematic Metaverse Director"}),c.jsx("meta",{name:"description",content:"A Cinematic 3D Portfolio of Yesol Heo, Metaverse & XR Project Manager."})]}),c.jsx(il,{}),c.jsx(al,{}),c.jsx(g.Suspense,{fallback:c.jsx("div",{className:"flex items-center justify-center h-screen text-white font-mono text-xl animate-pulse tracking-widest",children:be.SYSTEM.LOADING}),children:c.jsx(Yo,{})}),c.jsx(sl,{}),e==="profile"&&c.jsx(Bl,{}),c.jsx(Fl,{}),c.jsx(Th,{})]})})})}_i.createRoot(document.getElementById("root")).render(c.jsx(Ch,{}));export{C as B,Nh as C,Io as E,be as L,Oh as N,jh as Q,Oo as V,_h as a,Ie as b,Lh as c,Po as d,us as i,Ph as r,T as u,_o as w};
