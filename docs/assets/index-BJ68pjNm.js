const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BootScene-CDwk3svR.js","assets/three-C3NlESEC.js","assets/vendor-CqO7gtIP.js","assets/animation-r5s8DLQG.js","assets/HubScene-BJJTi2Va.js","assets/ProfileScene-JleQi_p_.js","assets/Lab01Scene-BXFC8ESm.js","assets/Lab02Scene-BbmAlRat.js","assets/Lab03Scene-Cjj31m1a.js","assets/Lab04Scene-BeirIH4A.js","assets/ContactScene-yK0fhi5o.js","assets/stegaEncodeSourceMap-m7huXZae.js","assets/browser-8gYOhkFu.js"])))=>i.map(i=>d[i]);
import{r as g,R as V,E as Wt,L as cn,N as un,B as je,W,M as dn,T as hn,U as T,S as hr,O as ti,a as ri,b as ni,c as fr,V as L,d as ve,e as k,D as si,f as ii,g as ai,h as oi,i as tt,k as li,C as fn,l as Ae,F as ci,m as Xe,n as Ye,o as ne,p as ui,q as ce,s as qt,P as di,t as hi,A as fi,u as pr,v as dt,w as pi,H as mi,x as Xt,y as vi,z as gi,j as l,G as xi,I as bi,J as yi,_ as Z,K as de,Q as wi,X as Ti,Y as Ei,Z as Si}from"./three-C3NlESEC.js";import{g as Yt}from"./vendor-CqO7gtIP.js";import{g as Dt,m as I,A as ht}from"./animation-r5s8DLQG.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Tt,mr;function Ci(){if(mr)return Tt;mr=1;var e=typeof Element<"u",t=typeof Map=="function",r=typeof Set=="function",n=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(i,a){if(i===a)return!0;if(i&&a&&typeof i=="object"&&typeof a=="object"){if(i.constructor!==a.constructor)return!1;var o,c,u;if(Array.isArray(i)){if(o=i.length,o!=a.length)return!1;for(c=o;c--!==0;)if(!s(i[c],a[c]))return!1;return!0}var d;if(t&&i instanceof Map&&a instanceof Map){if(i.size!==a.size)return!1;for(d=i.entries();!(c=d.next()).done;)if(!a.has(c.value[0]))return!1;for(d=i.entries();!(c=d.next()).done;)if(!s(c.value[1],a.get(c.value[0])))return!1;return!0}if(r&&i instanceof Set&&a instanceof Set){if(i.size!==a.size)return!1;for(d=i.entries();!(c=d.next()).done;)if(!a.has(c.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(a)){if(o=i.length,o!=a.length)return!1;for(c=o;c--!==0;)if(i[c]!==a[c])return!1;return!0}if(i.constructor===RegExp)return i.source===a.source&&i.flags===a.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof a.valueOf=="function")return i.valueOf()===a.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof a.toString=="function")return i.toString()===a.toString();if(u=Object.keys(i),o=u.length,o!==Object.keys(a).length)return!1;for(c=o;c--!==0;)if(!Object.prototype.hasOwnProperty.call(a,u[c]))return!1;if(e&&i instanceof Element)return!1;for(c=o;c--!==0;)if(!((u[c]==="_owner"||u[c]==="__v"||u[c]==="__o")&&i.$$typeof)&&!s(i[u[c]],a[u[c]]))return!1;return!0}return i!==i&&a!==a}return Tt=function(a,o){try{return s(a,o)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},Tt}var Ai=Ci();const Mi=Yt(Ai);var Et,vr;function Ii(){if(vr)return Et;vr=1;var e=function(t,r,n,s,i,a,o,c){if(!t){var u;if(r===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,s,i,a,o,c],h=0;u=new Error(r.replace(/%s/g,function(){return d[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return Et=e,Et}var Ri=Ii();const gr=Yt(Ri);var St,xr;function _i(){return xr||(xr=1,St=function(t,r,n,s){var i=n?n.call(s,t,r):void 0;if(i!==void 0)return!!i;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(r),u=0;u<a.length;u++){var d=a[u];if(!c(d))return!1;var h=t[d],m=r[d];if(i=n?n.call(s,h,m,d):void 0,i===!1||i===void 0&&h!==m)return!1}return!0}),St}var Ni=_i();const Oi=Yt(Ni);var pn=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(pn||{}),Ct={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},br=Object.values(pn),Kt={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ji=Object.entries(Kt).reduce((e,[t,r])=>(e[r]=t,e),{}),Y="data-rh",we={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Te=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},Pi=e=>{let t=Te(e,"title");const r=Te(e,we.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const n=Te(e,we.DEFAULT_TITLE);return t||n||void 0},Li=e=>Te(e,we.ON_CHANGE_CLIENT_STATE)||(()=>{}),At=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,n)=>({...r,...n}),{}),ki=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const s=Object.keys(n);for(let i=0;i<s.length;i+=1){const o=s[i].toLowerCase();if(e.indexOf(o)!==-1&&n[o])return r.concat(n)}}return r},[]),Di=e=>console&&typeof console.warn=="function"&&console.warn(e),ke=(e,t,r)=>{const n={};return r.filter(s=>Array.isArray(s[e])?!0:(typeof s[e]<"u"&&Di(`Helmet: ${e} should be of type "Array". Instead found type "${typeof s[e]}"`),!1)).map(s=>s[e]).reverse().reduce((s,i)=>{const a={};i.filter(c=>{let u;const d=Object.keys(c);for(let m=0;m<d.length;m+=1){const p=d[m],v=p.toLowerCase();t.indexOf(v)!==-1&&!(u==="rel"&&c[u].toLowerCase()==="canonical")&&!(v==="rel"&&c[v].toLowerCase()==="stylesheet")&&(u=v),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(u=p)}if(!u||!c[u])return!1;const h=c[u].toLowerCase();return n[u]||(n[u]={}),a[u]||(a[u]={}),n[u][h]?!1:(a[u][h]=!0,!0)}).reverse().forEach(c=>s.push(c));const o=Object.keys(a);for(let c=0;c<o.length;c+=1){const u=o[c],d={...n[u],...a[u]};n[u]=d}return s},[]).reverse()},Ui=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},Bi=e=>({baseTag:ki(["href"],e),bodyAttributes:At("bodyAttributes",e),defer:Te(e,we.DEFER),encode:Te(e,we.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:At("htmlAttributes",e),linkTags:ke("link",["rel","href"],e),metaTags:ke("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:ke("noscript",["innerHTML"],e),onChangeClientState:Li(e),scriptTags:ke("script",["src","innerHTML"],e),styleTags:ke("style",["cssText"],e),title:Pi(e),titleAttributes:At("titleAttributes",e),prioritizeSeoTags:Ui(e,we.PRIORITIZE_SEO_TAGS)}),mn=e=>Array.isArray(e)?e.join(""):e,Fi=(e,t)=>{const r=Object.keys(e);for(let n=0;n<r.length;n+=1)if(t[r[n]]&&t[r[n]].includes(e[r[n]]))return!0;return!1},Mt=(e,t)=>Array.isArray(e)?e.reduce((r,n)=>(Fi(n,t)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:e,priority:[]},yr=(e,t)=>({...e,[t]:void 0}),zi=["noscript","script","style"],Ut=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),vn=e=>Object.keys(e).reduce((t,r)=>{const n=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${n}`:n},""),Hi=(e,t,r,n)=>{const s=vn(r),i=mn(t);return s?`<${e} ${Y}="true" ${s}>${Ut(i,n)}</${e}>`:`<${e} ${Y}="true">${Ut(i,n)}</${e}>`},$i=(e,t,r=!0)=>t.reduce((n,s)=>{const i=s,a=Object.keys(i).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,d)=>{const h=typeof i[d]>"u"?d:`${d}="${Ut(i[d],r)}"`;return u?`${u} ${h}`:h},""),o=i.innerHTML||i.cssText||"",c=zi.indexOf(e)===-1;return`${n}<${e} ${Y}="true" ${a}${c?"/>":`>${o}</${e}>`}`},""),gn=(e,t={})=>Object.keys(e).reduce((r,n)=>{const s=Kt[n];return r[s||n]=e[n],r},t),Gi=(e,t,r)=>{const n={key:t,[Y]:!0},s=gn(r,n);return[V.createElement("title",s,t)]},Je=(e,t)=>t.map((r,n)=>{const s={key:n,[Y]:!0};return Object.keys(r).forEach(i=>{const o=Kt[i]||i;if(o==="innerHTML"||o==="cssText"){const c=r.innerHTML||r.cssText;s.dangerouslySetInnerHTML={__html:c}}else s[o]=r[i]}),V.createElement(e,s)}),G=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>Gi(e,t.title,t.titleAttributes),toString:()=>Hi(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>gn(t),toString:()=>vn(t)};default:return{toComponent:()=>Je(e,t),toString:()=>$i(e,t,r)}}},Vi=({metaTags:e,linkTags:t,scriptTags:r,encode:n})=>{const s=Mt(e,Ct.meta),i=Mt(t,Ct.link),a=Mt(r,Ct.script);return{priorityMethods:{toComponent:()=>[...Je("meta",s.priority),...Je("link",i.priority),...Je("script",a.priority)],toString:()=>`${G("meta",s.priority,n)} ${G("link",i.priority,n)} ${G("script",a.priority,n)}`},metaTags:s.default,linkTags:i.default,scriptTags:a.default}},Wi=e=>{const{baseTag:t,bodyAttributes:r,encode:n=!0,htmlAttributes:s,noscriptTags:i,styleTags:a,title:o="",titleAttributes:c,prioritizeSeoTags:u}=e;let{linkTags:d,metaTags:h,scriptTags:m}=e,p={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:p,linkTags:d,metaTags:h,scriptTags:m}=Vi(e)),{priority:p,base:G("base",t,n),bodyAttributes:G("bodyAttributes",r,n),htmlAttributes:G("htmlAttributes",s,n),link:G("link",d,n),meta:G("meta",h,n),noscript:G("noscript",i,n),script:G("script",m,n),style:G("style",a,n),title:G("title",{title:o,titleAttributes:c},n)}},Bt=Wi,Ke=[],xn=!!(typeof window<"u"&&window.document&&window.document.createElement),Ft=class{instances=[];canUseDOM=xn;context;value={setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Ke:this.instances,add:e=>{(this.canUseDOM?Ke:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Ke:this.instances).indexOf(e);(this.canUseDOM?Ke:this.instances).splice(t,1)}}};constructor(e,t){this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Bt({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},qi={},bn=V.createContext(qi),yn=class wn extends g.Component{static canUseDOM=xn;helmetData;constructor(t){super(t),this.helmetData=new Ft(this.props.context||{},wn.canUseDOM)}render(){return V.createElement(bn.Provider,{value:this.helmetData.value},this.props.children)}},be=(e,t)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${e}[${Y}]`),s=[].slice.call(n),i=[];let a;return t&&t.length&&t.forEach(o=>{const c=document.createElement(e);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u))if(u==="innerHTML")c.innerHTML=o.innerHTML;else if(u==="cssText")c.styleSheet?c.styleSheet.cssText=o.cssText:c.appendChild(document.createTextNode(o.cssText));else{const d=u,h=typeof o[d]>"u"?"":o[d];c.setAttribute(u,h)}c.setAttribute(Y,"true"),s.some((u,d)=>(a=d,c.isEqualNode(u)))?s.splice(a,1):i.push(c)}),s.forEach(o=>o.parentNode?.removeChild(o)),i.forEach(o=>r.appendChild(o)),{oldTags:s,newTags:i}},zt=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const n=r.getAttribute(Y),s=n?n.split(","):[],i=[...s],a=Object.keys(t);for(const o of a){const c=t[o]||"";r.getAttribute(o)!==c&&r.setAttribute(o,c),s.indexOf(o)===-1&&s.push(o);const u=i.indexOf(o);u!==-1&&i.splice(u,1)}for(let o=i.length-1;o>=0;o-=1)r.removeAttribute(i[o]);s.length===i.length?r.removeAttribute(Y):r.getAttribute(Y)!==a.join(",")&&r.setAttribute(Y,a.join(","))},Xi=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=mn(e)),zt("title",t)},wr=(e,t)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:s,linkTags:i,metaTags:a,noscriptTags:o,onChangeClientState:c,scriptTags:u,styleTags:d,title:h,titleAttributes:m}=e;zt("body",n),zt("html",s),Xi(h,m);const p={baseTag:be("base",r),linkTags:be("link",i),metaTags:be("meta",a),noscriptTags:be("noscript",o),scriptTags:be("script",u),styleTags:be("style",d)},v={},f={};Object.keys(p).forEach(b=>{const{newTags:w,oldTags:y}=p[b];w.length&&(v[b]=w),y.length&&(f[b]=p[b].oldTags)}),t&&t(),c(e,v,f)},De=null,Yi=e=>{De&&cancelAnimationFrame(De),e.defer?De=requestAnimationFrame(()=>{wr(e,()=>{De=null})}):(wr(e),De=null)},Ki=Yi,Tr=class extends g.Component{rendered=!1;shouldComponentUpdate(e){return!Oi(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let r=null;const n=Bi(e.get().map(s=>{const i={...s.props};return delete i.context,i}));yn.canUseDOM?Ki(n):Bt&&(r=Bt(n)),t(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Qi=class extends g.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(e){return!Mi(yr(this.props,"helmetData"),yr(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,n){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,n)}]}}mapObjectTypeChildren(e,t,r,n){switch(e.type){case"title":return{...t,[e.type]:n,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(n=>{r={...r,[n]:e[n]}}),r}warnOnInvalidChildren(e,t){return gr(br.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${br.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),gr(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return V.Children.forEach(e,n=>{if(!n||!n.props)return;const{children:s,...i}=n.props,a=Object.keys(i).reduce((c,u)=>(c[ji[u]||u]=i[u],c),{});let{type:o}=n;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(n,s),o){case"Symbol(react.fragment)":t=this.mapChildrenToProps(s,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,a,s);break;default:t=this.mapObjectTypeChildren(n,t,a,s);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:n}=t;if(e&&(r=this.mapChildrenToProps(e,r)),n&&!(n instanceof Ft)){const s=n;n=new Ft(s.context,!0),delete r.helmetData}return n?V.createElement(Tr,{...r,context:n.value}):V.createElement(bn.Consumer,null,s=>V.createElement(Tr,{...r,context:s}))}};var It=1/1e3,Zi=1e3,Ji=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*It}get fixedDelta(){return this._fixedDelta*It}set fixedDelta(e){this._fixedDelta=e*Zi}get elapsed(){return this._elapsed*It}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(e!==void 0?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},ea=(()=>{const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),r=new ni;return r.setAttribute("position",new fr(e,3)),r.setAttribute("uv",new fr(t,2)),r})(),B=class Ht{static get fullscreenGeometry(){return ea}constructor(t="Pass",r=new hr,n=new ti){this.name=t,this.renderer=null,this.scene=r,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const r=this.fullscreenMaterial;r!==null&&(r.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let r=this.screen;r!==null?r.material=t:(r=new ri(Ht.fullscreenGeometry,t),r.frustumCulled=!1,this.scene===null&&(this.scene=new hr),this.scene.add(r),this.screen=r)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,r=je){}render(t,r,n,s,i){throw new Error("Render method not implemented!")}setSize(t,r){}initialize(t,r,n){}dispose(){for(const t of Object.keys(this)){const r=this[t];(r instanceof W||r instanceof dn||r instanceof hn||r instanceof Ht)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},ta=class extends B{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,n,s){const i=e.state.buffers.stencil;i.setLocked(!1),i.setTest(!1)}},ra=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,Qt="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Tn=class extends ne{constructor(){super({name:"CopyMaterial",defines:{DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new T(null),depthBuffer:new T(null),channelWeights:new T(null),opacity:new T(1)},blending:ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ra,vertexShader:Qt}),this.depthFunc=fi}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(e){const t=e!==null;this.colorWrite!==t&&(t?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=t,this.needsUpdate=!0),this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){const t=e!==null;this.depthWrite!==t&&(t?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=t,this.depthWrite=t,this.needsUpdate=!0),this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(e){e!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=e):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},En=class extends B{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new Tn,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new W(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,n,s){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==ve?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e!==null&&e.outputColorSpace===k&&(this.renderTarget.texture.colorSpace=k))}},Er=new fn,Sn=class extends B{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,n,s){const i=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),c=i!==null,u=a>=0;c?(e.getClearColor(Er),e.setClearColor(i,u?a:o)):u&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),c?e.setClearColor(Er,o):u&&e.setClearAlpha(o)}},na=class extends B{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new Sn(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,n,s){const i=e.getContext(),a=e.state.buffers,o=this.scene,c=this.camera,u=this.clearPass,d=this.inverted?0:1,h=1-d;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),a.stencil.setFunc(i.ALWAYS,d,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,c)):(e.setRenderTarget(t),e.render(o,c),e.setRenderTarget(r),e.render(o,c)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(i.EQUAL,1,4294967295),a.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),a.stencil.setLocked(!0)}},sa=class{constructor(t=null,{depthBuffer:r=!0,stencilBuffer:n=!1,multisampling:s=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(r,n,i,s),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new En,this.depthTexture=null,this.passes=[],this.timer=new Ji,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const r=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(r.depthBuffer,r.stencilBuffer,r.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const r=t.getSize(new L),n=t.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;s===ve&&t.outputColorSpace===k&&(this.inputBuffer.texture.colorSpace=k,this.outputBuffer.texture.colorSpace=k,this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(r.width,r.height);for(const i of this.passes)i.initialize(t,n,s)}}replaceRenderer(t,r=!0){const n=this.renderer,s=n.domElement.parentNode;return this.setRenderer(t),r&&s!==null&&(s.removeChild(n.domElement),s.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new si;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=ii,t.type=ai):t.type=oi,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,r,n,s){const i=this.renderer,a=i===null?new L:i.getDrawingBufferSize(new L),o={minFilter:tt,magFilter:tt,stencilBuffer:r,depthBuffer:t,type:n},c=new W(a.width,a.height,o);return s>0&&(c.samples=s),n===ve&&i!==null&&i.outputColorSpace===k&&(c.texture.colorSpace=k),c.texture.name="EffectComposer.Buffer",c.texture.generateMipmaps=!1,c}setMainScene(t){for(const r of this.passes)r.mainScene=t}setMainCamera(t){for(const r of this.passes)r.mainCamera=t}addPass(t,r){const n=this.passes,s=this.renderer,i=s.getDrawingBufferSize(new L),a=s.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(t.setRenderer(s),t.setSize(i.width,i.height),t.initialize(s,a,o),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),r!==void 0?n.splice(r,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const c=this.createDepthTexture();for(t of n)t.setDepthTexture(c)}else t.setDepthTexture(this.depthTexture)}removePass(t){const r=this.passes,n=r.indexOf(t);if(n!==-1&&r.splice(n,1).length>0){if(this.depthTexture!==null){const a=(c,u)=>c||u.needsDepthTexture;r.reduce(a,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===r.length&&(t.renderToScreen=!1,r.length>0&&(r[r.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const r=this.renderer,n=this.copyPass;let s=this.inputBuffer,i=this.outputBuffer,a=!1,o,c,u;t===void 0&&(this.timer.update(),t=this.timer.getDelta());for(const d of this.passes)d.enabled&&(d.render(r,s,i,t,a),d.needsSwap&&(a&&(n.renderToScreen=d.renderToScreen,o=r.getContext(),c=r.state.buffers.stencil,c.setFunc(o.NOTEQUAL,1,4294967295),n.render(r,s,i,t,a),c.setFunc(o.EQUAL,1,4294967295)),u=s,s=i,i=u),d instanceof na?a=!0:d instanceof ta&&(a=!1))}setSize(t,r,n){const s=this.renderer,i=s.getSize(new L);(t===void 0||r===void 0)&&(t=i.width,r=i.height),(i.width!==t||i.height!==r)&&s.setSize(t,r,n);const a=s.getDrawingBufferSize(new L);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const o of this.passes)o.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),B.fullscreenGeometry.dispose()}},K={NONE:0,DEPTH:1,CONVOLUTION:2},M={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},ia=class{constructor(){this.shaderParts=new Map([[M.FRAGMENT_HEAD,null],[M.FRAGMENT_MAIN_UV,null],[M.FRAGMENT_MAIN_IMAGE,null],[M.VERTEX_HEAD,null],[M.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=K.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=cn}},Rt=!1,Sr=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case Ye:r=this.materialsFlatShadedDoubleSide;break;case Xe:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case Ye:r=this.materialsDoubleSide;break;case Xe:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof ne))return e.clone();const t=e.uniforms,r=new Map;for(const s in t){const i=t[s].value;i.isRenderTargetTexture&&(t[s].value=null,r.set(s,i))}const n=e.clone();for(const s of r)t[s[0]].value=s[1],n.uniforms[s[0]].value=s[1];return n}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const r of t)r.uniforms=Object.assign({},e.uniforms),r.side=ui;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.side=Xe,n}),this.materialsDoubleSide=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.side=Ye,n}),this.materialsFlatShaded=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=Xe,n}),this.materialsFlatShadedDoubleSide=t.map(r=>{const n=this.cloneMaterial(r);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=Ye,n})}}render(e,t,r){const n=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,Rt){const s=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(const i of s)i[0].material=i[1];this.meshCount!==s.size&&s.clear()}else{const s=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=s}e.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Rt}static set workaroundEnabled(e){Rt=e}},ie=-1,D=class extends Wt{constructor(e,t=ie,r=ie,n=1){super(),this.resizable=e,this.baseSize=new L(1,1),this.preferredSize=new L(t,r),this.target=this.preferredSize,this.s=n,this.effectiveSize=new L,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,r=this.effectiveSize,n=this.scale;t.width!==ie?r.width=t.width:t.height!==ie?r.width=Math.round(t.height*(e.width/Math.max(e.height,1))):r.width=Math.round(e.width*n),t.height!==ie?r.height=t.height:t.width!==ie?r.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r.height=Math.round(e.height*n)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(ie),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.baseSize.width!==e||this.baseSize.height!==t)&&(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferredSize.width!==e||this.preferredSize.height!==t)&&(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return ie}},C={ADD:0,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},aa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),y.a*opacity);}",oa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),y.a*opacity);}",la="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",ca="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),y.a*opacity);}",ua="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),y.a*opacity);}",da="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),y.a*opacity);}",ha="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),y.a*opacity);}",fa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),y.a*opacity);}",pa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),y.a*opacity);}",ma="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),y.a*opacity);}",va="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),y.a*opacity);}",ga="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),y.a*opacity);}",xa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),y.a*opacity);}",ba="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),y.a*opacity);}",ya="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),y.a*opacity);}",wa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",Ta="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),y.a*opacity);}",Ea="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",Sa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",Ca="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),y.a*opacity);}",Aa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),y.a*opacity);}",Ma="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}",Ia="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",Ra="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),y.a*opacity);}",_a="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",Na="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",Oa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),y.a*opacity);}",ja="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),y.a*opacity);}",Pa="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",La="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),y.a*opacity);}",ka="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",Da=new Map([[C.ADD,aa],[C.AVERAGE,oa],[C.COLOR,la],[C.COLOR_BURN,ca],[C.COLOR_DODGE,ua],[C.DARKEN,da],[C.DIFFERENCE,ha],[C.DIVIDE,fa],[C.DST,null],[C.EXCLUSION,pa],[C.HARD_LIGHT,ma],[C.HARD_MIX,va],[C.HUE,ga],[C.INVERT,xa],[C.INVERT_RGB,ba],[C.LIGHTEN,ya],[C.LINEAR_BURN,wa],[C.LINEAR_DODGE,Ta],[C.LINEAR_LIGHT,Ea],[C.LUMINOSITY,Sa],[C.MULTIPLY,Ca],[C.NEGATION,Aa],[C.NORMAL,Ma],[C.OVERLAY,Ia],[C.PIN_LIGHT,Ra],[C.REFLECT,_a],[C.SATURATION,Na],[C.SCREEN,Oa],[C.SOFT_LIGHT,ja],[C.SRC,Pa],[C.SUBTRACT,La],[C.VIVID_LIGHT,ka]]),Ua=class extends Wt{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new T(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return Da.get(this.blendFunction)}},oe=class extends Wt{constructor(e,t,{attributes:r=K.NONE,blendFunction:n=C.NORMAL,defines:s=new Map,uniforms:i=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=o,this.defines=s,this.uniforms=i,this.extensions=a,this.blendMode=new Ua(n),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=cn,this._outputColorSpace=un}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=je){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof W||t instanceof dn||t instanceof hn||t instanceof B)&&this[e].dispose()}}},Zt={MEDIUM:2,LARGE:3},Ba=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Fa="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",za=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ha=class extends ne{constructor(e=new pr){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new T(null),texelSize:new T(new pr),scale:new T(1),kernel:new T(0)},blending:ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ba,vertexShader:Fa}),this.setTexelSize(e.x,e.y),this.kernelSize=Zt.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return za[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,e*.5,t*.5)}setSize(e,t){const r=1/e,n=1/t;this.uniforms.texelSize.value.set(r,n,r*.5,n*.5)}},$a=class extends B{constructor({kernelSize:e=Zt.MEDIUM,resolutionScale:t=.5,width:r=D.AUTO_SIZE,height:n=D.AUTO_SIZE,resolutionX:s=r,resolutionY:i=n}={}){super("KawaseBlurPass"),this.renderTargetA=new W(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new D(this,s,i,t);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new Ha,this._blurMaterial.kernelSize=e,this.copyMaterial=new Tn}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,n,s){const i=this.scene,a=this.camera,o=this.renderTargetA,c=this.renderTargetB,u=this.blurMaterial,d=u.kernelSequence;let h=t;this.fullscreenMaterial=u;for(let m=0,p=d.length;m<p;++m){const v=(m&1)===0?o:c;u.kernel=d[m],u.inputBuffer=h.texture,e.setRenderTarget(v),e.render(i,a),h=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(i,a)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t);const n=r.width,s=r.height;this.renderTargetA.setSize(n,s),this.renderTargetB.setSize(n,s),this.blurMaterial.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==ve?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e!==null&&e.outputColorSpace===k&&(this.renderTargetA.texture.colorSpace=k,this.renderTargetB.texture.colorSpace=k))}static get AUTO_SIZE(){return D.AUTO_SIZE}},Ga=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,Va=class extends ne{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:qt.replace(/\D+/g,"")},uniforms:{inputBuffer:new T(null),threshold:new T(0),smoothing:new T(1),range:new T(null)},blending:ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ga,vertexShader:Qt}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},Cn=class extends B{constructor({renderTarget:e,luminanceRange:t,colorOutput:r,resolutionScale:n=1,width:s=D.AUTO_SIZE,height:i=D.AUTO_SIZE,resolutionX:a=s,resolutionY:o=i}={}){super("LuminancePass"),this.fullscreenMaterial=new Va(r,t),this.needsSwap=!1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new W(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new D(this,a,o,n);c.addEventListener("change",u=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,n,s){const i=this.fullscreenMaterial;i.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==ve&&(this.renderTarget.texture.type=r,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Wa=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,qa="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Xa=class extends ne{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new T(null),texelSize:new T(new L)},blending:ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Wa,vertexShader:qa})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Ya=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Ka="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Qa=class extends ne{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new T(null),supportBuffer:new T(null),texelSize:new T(new L),radius:new T(.85)},blending:ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ya,vertexShader:Ka})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Za=class extends B{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new W(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Xa,this.upsamplingMaterial=new Qa,this.resolution=new L}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let r=0;r<e;++r){const n=t.clone();n.texture.name="Downsampling.Mipmap"+r,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(t);for(let r=1,n=e-1;r<n;++r){const s=t.clone();s.texture.name="Upsampling.Mipmap"+r,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,r,n,s){const{scene:i,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:c}=this,{downsamplingMipmaps:u,upsamplingMipmaps:d}=this;let h=t;this.fullscreenMaterial=o;for(let m=0,p=u.length;m<p;++m){const v=u[m];o.setSize(h.width,h.height),o.inputBuffer=h.texture,e.setRenderTarget(v),e.render(i,a),h=v}this.fullscreenMaterial=c;for(let m=d.length-1;m>=0;--m){const p=d[m];c.setSize(h.width,h.height),c.inputBuffer=h.texture,c.supportBuffer=u[m].texture,e.setRenderTarget(p),e.render(i,a),h=p}}setSize(e,t){const r=this.resolution;r.set(e,t);let n=r.width,s=r.height;for(let i=0,a=this.downsamplingMipmaps.length;i<a;++i)n=Math.round(n*.5),s=Math.round(s*.5),this.downsamplingMipmaps[i].setSize(n,s),i<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[i].setSize(n,s)}initialize(e,t,r){if(r!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of n)s.texture.type=r;if(r!==ve)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(e!==null&&e.outputColorSpace===k)for(const s of n)s.texture.colorSpace=k}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},Ja=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}`,Ch=class extends oe{constructor({blendFunction:e=C.SCREEN,luminanceThreshold:t=1,luminanceSmoothing:r=.03,mipmapBlur:n=!0,intensity:s=1,radius:i=.85,levels:a=8,kernelSize:o=Zt.LARGE,resolutionScale:c=.5,width:u=D.AUTO_SIZE,height:d=D.AUTO_SIZE,resolutionX:h=u,resolutionY:m=d}={}){super("BloomEffect",Ja,{blendFunction:e,uniforms:new Map([["map",new T(null)],["intensity",new T(s)]])}),this.renderTarget=new W(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new $a({kernelSize:o}),this.luminancePass=new Cn({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=r,this.mipmapBlurPass=new Za,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=i,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new D(this,h,m,c);p.addEventListener("change",v=>this.setSize(p.baseWidth,p.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){const n=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,s.renderTarget):this.blurPass.render(e,s.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,n)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.blurPass.resolution.copy(r),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,r){this.blurPass.initialize(e,t,r),this.luminancePass.initialize(e,t,r),this.mipmapBlurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e!==null&&e.outputColorSpace===k&&(this.renderTarget.texture.colorSpace=k))}},eo=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,to="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",Ah=class extends oe{constructor({offset:e=new L(.001,5e-4),radialModulation:t=!1,modulationOffset:r=.15}={}){super("ChromaticAberrationEffect",eo,{vertexShader:to,attributes:K.CONVOLUTION,uniforms:new Map([["offset",new T(e)],["modulationOffset",new T(r)]])}),this.radialModulation=t}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(e){e?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(e){this.uniforms.get("modulationOffset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},An=class extends B{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new Sn,this.overrideMaterialManager=r===null?null:new Sr(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new Sr(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,n,s){const i=this.scene,a=this.camera,o=this.selection,c=a.layers.mask,u=i.background,d=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(i.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,i,a):e.render(i,a),a.layers.mask=c,i.background=u,e.shadowMap.autoUpdate=d}},H={LINEAR:0,REINHARD:1,REINHARD2:2,REINHARD2_ADAPTIVE:3,OPTIMIZED_CINEON:5,CINEON:5,ACES_FILMIC:6,AGX:7,NEUTRAL:8},Ue={DEFAULT:0,ESKIL:1},ro=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,Mh=class extends oe{constructor({blendFunction:e=C.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",ro,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},no=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,so="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",io=class extends ne{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new T(null),normalBuffer:new T(null),texelSize:new T(new L)},blending:ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:no,vertexShader:so})}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=je){this.depthBuffer=e,this.depthPacking=t}set normalBuffer(e){this.uniforms.normalBuffer.value=e,e!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(e){this.normalBuffer=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},ao=class extends B{constructor({normalBuffer:e=null,resolutionScale:t=.5,width:r=D.AUTO_SIZE,height:n=D.AUTO_SIZE,resolutionX:s=r,resolutionY:i=n}={}){super("DepthDownsamplingPass");const a=new io;a.normalBuffer=e,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new W(1,1,{minFilter:Ae,magFilter:Ae,depthBuffer:!1,type:ci}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new D(this,s,i,t);o.addEventListener("change",c=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(e,t=je){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t}render(e,t,r,n,s){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.fullscreenMaterial.setSize(e,t)}initialize(e,t,r){const n=e.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},oo=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,lo=class extends ne{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new T(null),luminanceBuffer1:new T(null),minLuminance:new T(.01),deltaTime:new T(0),tau:new T(1)},extensions:{shaderTextureLOD:!0},blending:ce,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:oo,vertexShader:Qt})}set luminanceBuffer0(e){this.uniforms.luminanceBuffer0.value=e}setLuminanceBuffer0(e){this.uniforms.luminanceBuffer0.value=e}set luminanceBuffer1(e){this.uniforms.luminanceBuffer1.value=e}setLuminanceBuffer1(e){this.uniforms.luminanceBuffer1.value=e}set mipLevel1x1(e){this.defines.MIP_LEVEL_1X1=e.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(e){this.mipLevel1x1=e}set deltaTime(e){this.uniforms.deltaTime.value=e}setDeltaTime(e){this.uniforms.deltaTime.value=e}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(e){this.uniforms.minLuminance.value=e}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(e){this.uniforms.minLuminance.value=e}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(e){this.uniforms.tau.value=e}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(e){this.uniforms.tau.value=e}},co=class extends B{constructor(e,{minLuminance:t=.01,adaptationRate:r=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new lo,this.needsSwap=!1,this.renderTargetPrevious=new W(1,1,{minFilter:Ae,magFilter:Ae,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const n=this.fullscreenMaterial;n.luminanceBuffer0=this.renderTargetPrevious.texture,n.luminanceBuffer1=e,n.minLuminance=t,n.adaptationRate=r,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new En(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(e){this.fullscreenMaterial.mipLevel1x1=e}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(e){this.fullscreenMaterial.adaptationRate=e}render(e,t,r,n,s){this.fullscreenMaterial.deltaTime=n,e.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),e.render(this.scene,this.camera),this.copyPass.render(e,this.renderTargetAdapted)}},uo=`#include <tonemapping_pars_fragment>
uniform float whitePoint;
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
uniform float middleGrey;
#if TONE_MAPPING_MODE == 3
uniform lowp sampler2D luminanceBuffer;
#else
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 3
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}
#elif TONE_MAPPING_MODE == 4
#define A 0.15
#define B 0.50
#define C 0.10
#define D 0.20
#define E 0.02
#define F 0.30
vec3 Uncharted2Helper(const in vec3 x){return((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}vec3 Uncharted2ToneMapping(vec3 color){color*=toneMappingExposure;return clamp(Uncharted2Helper(color)/Uncharted2Helper(vec3(whitePoint)),0.0,1.0);}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#elif TONE_MAPPING_MODE == 4
outputColor=vec4(Uncharted2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,ho=class extends oe{constructor({blendFunction:e=C.SRC,adaptive:t=!1,mode:r=t?H.REINHARD2_ADAPTIVE:H.AGX,resolution:n=256,maxLuminance:s=4,whitePoint:i=s,middleGrey:a=.6,minLuminance:o=.01,averageLuminance:c=1,adaptationRate:u=1}={}){super("ToneMappingEffect",uo,{blendFunction:e,uniforms:new Map([["luminanceBuffer",new T(null)],["maxLuminance",new T(s)],["whitePoint",new T(i)],["middleGrey",new T(a)],["averageLuminance",new T(c)]])}),this.renderTargetLuminance=new W(1,1,{minFilter:hi,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new Cn({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new co(this.luminancePass.texture,{minLuminance:o,adaptationRate:u}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=n,this.mode=r}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(e){if(this.mode===e)return;const r=qt.replace(/\D+/g,"")>=168?"CineonToneMapping(texel)":"OptimizedCineonToneMapping(texel)";switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",e.toFixed(0)),e){case H.LINEAR:this.defines.set("toneMapping(texel)","LinearToneMapping(texel)");break;case H.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case H.CINEON:case H.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)",r);break;case H.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;case H.AGX:this.defines.set("toneMapping(texel)","AgXToneMapping(texel)");break;case H.NEUTRAL:this.defines.set("toneMapping(texel)","NeutralToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=e===H.REINHARD2_ADAPTIVE,this.setChanged()}getMode(){return this.mode}setMode(e){this.mode=e}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(e){this.uniforms.get("whitePoint").value=e}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(e){this.uniforms.get("middleGrey").value=e}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(e){this.uniforms.get("averageLuminance").value=e}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(e){const t=Math.max(0,Math.ceil(Math.log2(e))),r=Math.pow(2,t);this.luminancePass.resolution.setPreferredSize(r,r),this.adaptiveLuminanceMaterial.mipLevel1x1=t}getResolution(){return this.resolution}setResolution(e){this.resolution=e}get adaptive(){return this.mode===H.REINHARD2_ADAPTIVE}set adaptive(e){this.mode=e?H.REINHARD2_ADAPTIVE:H.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(e){this.adaptiveLuminanceMaterial.adaptationRate=e}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(e){console.warn(this.name,"distinction was removed.")}update(e,t,r){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(e,t),this.adaptiveLuminancePass.render(e,null,null,r))}initialize(e,t,r){this.adaptiveLuminancePass.initialize(e,t,r)}},fo=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,po=class extends oe{constructor({blendFunction:e,eskil:t=!1,technique:r=t?Ue.ESKIL:Ue.DEFAULT,offset:n=.5,darkness:s=.5}={}){super("VignetteEffect",fo,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",r.toFixed(0)]]),uniforms:new Map([["offset",new T(n)],["darkness",new T(s)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Ue.ESKIL}set eskil(e){this.technique=e?Ue.ESKIL:Ue.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},mo=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,vo="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",go=class extends ne{constructor(e,t,r,n,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:qt.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new T(null),depthBuffer:new T(null),resolution:new T(new L),texelSize:new T(new L),cameraNear:new T(.3),cameraFar:new T(1e3),aspect:new T(1),time:new T(0)},blending:ce,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.copyCameraSettings(n)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=je){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader=mo.replace(M.FRAGMENT_HEAD,e.get(M.FRAGMENT_HEAD)||"").replace(M.FRAGMENT_MAIN_UV,e.get(M.FRAGMENT_MAIN_UV)||"").replace(M.FRAGMENT_MAIN_IMAGE,e.get(M.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=vo.replace(M.VERTEX_HEAD,e.get(M.VERTEX_HEAD)||"").replace(M.VERTEX_MAIN_SUPPORT,e.get(M.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof di?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return M}};function Cr(e,t,r){for(const n of t){const s="$1"+e+n.charAt(0).toUpperCase()+n.slice(1),i=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const a of r.entries())a[1]!==null&&r.set(a[0],a[1].replace(i,s))}}function xo(e,t,r){let n=t.getFragmentShader(),s=t.getVertexShader();const i=n!==void 0&&/mainImage/.test(n),a=n!==void 0&&/mainUv/.test(n);if(r.attributes|=t.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(a&&(r.attributes&K.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!i&&!a)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=r.shaderParts;let u=c.get(M.FRAGMENT_HEAD)||"",d=c.get(M.FRAGMENT_MAIN_UV)||"",h=c.get(M.FRAGMENT_MAIN_IMAGE)||"",m=c.get(M.VERTEX_HEAD)||"",p=c.get(M.VERTEX_MAIN_SUPPORT)||"";const v=new Set,f=new Set;if(a&&(d+=`	${e}MainUv(UV);
`,r.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const y=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);p+=`	${e}MainSupport(`,p+=y?`vUv);
`:`);
`;for(const x of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const A of x[1].split(/\s*,\s*/))r.varyings.add(A),v.add(A),f.add(A);for(const x of s.matchAll(o))f.add(x[1])}for(const y of n.matchAll(o))f.add(y[1]);for(const y of t.defines.keys())f.add(y.replace(/\([\w\s,]*\)/g,""));for(const y of t.uniforms.keys())f.add(y);f.delete("while"),f.delete("for"),f.delete("if"),t.uniforms.forEach((y,x)=>r.uniforms.set(e+x.charAt(0).toUpperCase()+x.slice(1),y)),t.defines.forEach((y,x)=>r.defines.set(e+x.charAt(0).toUpperCase()+x.slice(1),y));const b=new Map([["fragment",n],["vertex",s]]);Cr(e,f,r.defines),Cr(e,f,b),n=b.get("fragment"),s=b.get("vertex");const w=t.blendMode;if(r.blendModes.set(w.blendFunction,w),i){t.inputColorSpace!==null&&t.inputColorSpace!==r.colorSpace&&(h+=t.inputColorSpace===k?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==un?r.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(r.colorSpace=t.inputColorSpace);const y=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${e}MainImage(color0, UV, `,(r.attributes&K.DEPTH)!==0&&y.test(n)&&(h+="depth, ",r.readDepth=!0),h+=`color1);
	`;const x=e+"BlendOpacity";r.uniforms.set(x,w.opacity),h+=`color0 = blend${w.blendFunction}(color0, color1, ${x});

	`,u+=`uniform float ${x};

`}if(u+=n+`
`,s!==null&&(m+=s+`
`),c.set(M.FRAGMENT_HEAD,u),c.set(M.FRAGMENT_MAIN_UV,d),c.set(M.FRAGMENT_MAIN_IMAGE,h),c.set(M.VERTEX_HEAD,m),c.set(M.VERTEX_MAIN_SUPPORT,p),t.extensions!==null)for(const y of t.extensions)r.extensions.add(y)}}var bo=class extends B{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new go(null,null,null,e),this.listener=r=>this.handleEvent(r),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort((t,r)=>r.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new ia;let t=0;for(const a of this.effects)if(a.blendMode.blendFunction===C.DST)e.attributes|=a.getAttributes()&K.DEPTH;else{if((e.attributes&a.getAttributes()&K.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);xo("e"+t++,a,e)}let r=e.shaderParts.get(M.FRAGMENT_HEAD),n=e.shaderParts.get(M.FRAGMENT_MAIN_IMAGE),s=e.shaderParts.get(M.FRAGMENT_MAIN_UV);const i=/\bblend\b/g;for(const a of e.blendModes.values())r+=a.getShaderCode().replace(i,`blend${a.blendFunction}`)+`
`;(e.attributes&K.DEPTH)!==0?(e.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,e.colorSpace===k&&(n+=`color0 = sRGBToLinear(color0);
	`),e.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(M.FRAGMENT_HEAD,r),e.shaderParts.set(M.FRAGMENT_MAIN_IMAGE,n),e.shaderParts.set(M.FRAGMENT_MAIN_UV,s);for(const[a,o]of e.shaderParts)o!==null&&e.shaderParts.set(a,o.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=je){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,n,s){for(const i of this.effects)i.update(e,t,n);if(!this.skipRendering||this.renderToScreen){const i=this.fullscreenMaterial;i.inputBuffer=t.texture,i.time+=n*this.timeScale,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(const n of this.effects)n.initialize(e,t,r);this.updateMaterial(),r!==void 0&&r!==ve&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},yo=class extends B{constructor(e,t,{renderTarget:r,resolutionScale:n=1,width:s=D.AUTO_SIZE,height:i=D.AUTO_SIZE,resolutionX:a=s,resolutionY:o=i}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new An(e,t,new li);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const u=c.getClearPass();u.overrideClearColor=new fn(7829503),u.overrideClearAlpha=1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new W(1,1,{minFilter:Ae,magFilter:Ae}),this.renderTarget.texture.name="NormalPass.Target");const d=this.resolution=new D(this,a,o,n);d.addEventListener("change",h=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,n,s){const i=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,i,i)}setSize(e,t){const r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}};const wo=g.createContext(null),Ar=e=>(e.getAttributes()&K.CONVOLUTION)===K.CONVOLUTION,To=V.memo(g.forwardRef(({children:e,camera:t,scene:r,resolutionScale:n,enabled:s=!0,renderPriority:i=1,autoClear:a=!0,depthBuffer:o,enableNormalPass:c,stencilBuffer:u,multisampling:d=8,frameBufferType:h=mi},m)=>{const{gl:p,scene:v,camera:f,size:b}=dt(),w=r||v,y=t||f,[x,A,N]=g.useMemo(()=>{const F=pi(),$=new sa(p,{depthBuffer:o,stencilBuffer:u,multisampling:d>0&&F?d:0,frameBufferType:h});$.addPass(new An(w,y));let z=null,X=null;return c&&(X=new yo(w,y),X.enabled=!1,$.addPass(X),n!==void 0&&F&&(z=new ao({normalBuffer:X.texture,resolutionScale:n}),z.enabled=!1,$.addPass(z))),[$,X,z]},[y,p,o,u,d,h,w,c,n]);g.useEffect(()=>x?.setSize(b.width,b.height),[x,b]),Xt((F,$)=>{if(s){const z=p.autoClear;p.autoClear=a,u&&!a&&p.clearStencil(),x.render($),p.autoClear=z}},s?i:0);const P=g.useRef(null),Le=vi(P);g.useLayoutEffect(()=>{const F=[];if(P.current&&Le.current&&x){const $=Le.current.objects;for(let z=0;z<$.length;z++){const X=$[z];if(X instanceof oe){const dr=[X];if(!Ar(X)){let wt=null;for(;(wt=$[z+1])instanceof oe&&!Ar(wt);)dr.push(wt),z++}const ei=new bo(y,...dr);F.push(ei)}else X instanceof B&&F.push(X)}for(const z of F)x?.addPass(z);A&&(A.enabled=!0),N&&(N.enabled=!0)}return()=>{for(const $ of F)x?.removePass($);A&&(A.enabled=!1),N&&(N.enabled=!1)}},[x,e,y,A,N,Le]),g.useEffect(()=>{const F=p.toneMapping;return p.toneMapping=gi,()=>{p.toneMapping=F}},[]);const yt=g.useMemo(()=>({composer:x,normalPass:A,downSamplingPass:N,resolutionScale:n,camera:y,scene:w}),[x,A,N,n,y,w]);return g.useImperativeHandle(m,()=>x,[x]),l.jsx(wo.Provider,{value:yt,children:l.jsx("group",{ref:P,children:e})})}));let Eo=0;const Mr=new WeakMap,So=(e,t)=>V.forwardRef(function({blendFunction:n=t?.blendFunction,opacity:s=t?.opacity,...i},a){let o=Mr.get(e);if(!o){const d=`@react-three/postprocessing/${e.name}-${Eo++}`;xi({[d]:e}),Mr.set(e,o=d)}const c=dt(d=>d.camera),u=V.useMemo(()=>{var d,h;return[...(d=t?.args)!=null?d:[],...(h=i.args)!=null?h:[{...t,...i}]]},[JSON.stringify(i)]);return l.jsx(o,{camera:c,"blendMode-blendFunction":n,"blendMode-opacity-value":s,...i,ref:a,args:u})}),Co=g.forwardRef(function({blendFunction:t,adaptive:r,mode:n,resolution:s,maxLuminance:i,whitePoint:a,middleGrey:o,minLuminance:c,averageLuminance:u,adaptationRate:d,...h},m){const p=g.useMemo(()=>new ho({blendFunction:t,adaptive:r,mode:n,resolution:s,maxLuminance:i,whitePoint:a,middleGrey:o,minLuminance:c,averageLuminance:u,adaptationRate:d}),[t,r,n,s,i,a,o,c,u,d]);return g.useEffect(()=>{p.dispose()},[p]),l.jsx("primitive",{...h,ref:m,object:p,attributes:K.CONVOLUTION})}),Ao=So(po),E=bi((e,t)=>({currentScene:"boot",prevScene:null,isTransitioning:!1,performanceMode:"high",isMuted:!1,systemLogs:[],addLog:r=>e(n=>({systemLogs:[{timestamp:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),message:r},...n.systemLogs].slice(0,100)})),hoverState:!1,setHoverState:r=>e({hoverState:r}),hoveredPlanet:null,setHoveredPlanet:r=>e({hoveredPlanet:r}),missionModalData:null,openMissionModal:r=>e({missionModalData:r}),closeMissionModal:()=>e({missionModalData:null}),blackBoxOpen:!1,currentLogId:null,openBlackBox:(r=null)=>e({blackBoxOpen:!0,currentLogId:r}),closeBlackBox:()=>e({blackBoxOpen:!1,currentLogId:null}),setCurrentLog:r=>e({currentLogId:r}),isWarping:!1,warpTarget:null,warpTargetPosition:null,warpTo:(r,n=null)=>{t().currentScene!==r&&(e({isWarping:!0,warpTarget:r,warpTargetPosition:n}),setTimeout(()=>{e(i=>({prevScene:i.currentScene,currentScene:r,isTransitioning:!0})),setTimeout(()=>{e({isWarping:!1,warpTarget:null,warpTargetPosition:null})},1500)},1500))},finishWarp:()=>e({isWarping:!1,warpTarget:null,warpTargetPosition:null}),setScene:r=>e(n=>n.currentScene===r?{}:{prevScene:n.currentScene,currentScene:r,isTransitioning:!0}),endTransition:()=>e({isTransitioning:!1}),setPerformanceMode:r=>e({performanceMode:r}),toggleMute:()=>e(r=>({isMuted:!r.isMuted})),orbitSpeed:.05,setOrbitSpeed:r=>e({orbitSpeed:r}),lab01Config:{distort:.4,speed:1.5,color:"#06b6d4"},setLab01Config:r=>e(n=>({lab01Config:{...n.lab01Config,...r}})),lab02Config:{zeroG:!1,gravity:[0,-.5,0]},setLab02Config:r=>e(n=>({lab02Config:{...n.lab02Config,...r}})),lab03Config:{mode:"demo"},setLab03Config:r=>e({lab03Config:{mode:r}})})),Mo=`
uniform float uStrength;
uniform vec2 uCenter;

void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {
    vec2 dir = uv - uCenter;
    float dist = length(dir);
    
    vec4 color = vec4(0.0);
    float total = 0.0;
    
    // Radial blur samples
    const int samples = 16;
    for (int i = 0; i < samples; i++) {
        float t = float(i) / float(samples - 1);
        float scale = 1.0 - uStrength * t * 0.3;
        vec2 sampleUv = uCenter + dir * scale;
        color += texture2D(inputBuffer, sampleUv);
        total += 1.0;
    }
    
    outputColor = color / total;
}
`;class Io extends oe{constructor({strength:t=0}={}){super("RadialBlurEffect",Mo,{uniforms:new Map([["uStrength",{value:t}],["uCenter",{value:[.5,.5]}]])})}set strength(t){this.uniforms.get("uStrength").value=t}get strength(){return this.uniforms.get("uStrength").value}}const Mn=g.forwardRef((e,t)=>{const r=g.useMemo(()=>new Io(e),[]);return l.jsx("primitive",{ref:t,object:r,dispose:null})});Mn.displayName="RadialBlurEffect";class Ro extends g.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t){console.log("[CinematicEffects] Bloom  :",t.message)}render(){return this.state.hasError?null:this.props.children}}const _o=()=>{const e=E(s=>s.isWarping),t=g.useRef(),r=g.useRef(),n=g.useRef(0);return Xt((s,i)=>{if(!(!t.current||!r.current))if(e){n.current+=i;const a=Math.min(n.current/1.5,1);t.current.strength=a*.7;const o=Math.max(0,(n.current-1)/.5);r.current.darkness=.4+o*10}else n.current=0,t.current.strength*=.95,r.current.darkness=yi.lerp(r.current.darkness,.4,i*3)}),l.jsx(Ro,{children:l.jsxs(To,{disableNormalPass:!0,children:[l.jsx(Mn,{ref:t,strength:0}),l.jsx(Ao,{ref:r,offset:.4,darkness:.4,eskil:!1}),l.jsx(Co,{adaptive:!0,resolution:256,middleGrey:.6,maxLuminance:16,averageLuminance:1,adaptationRate:1})]})})},No=g.lazy(()=>Z(()=>import("./BootScene-CDwk3svR.js"),__vite__mapDeps([0,1,2,3]))),Oo=g.lazy(()=>Z(()=>import("./HubScene-BJJTi2Va.js"),__vite__mapDeps([4,1,2,3]))),jo=g.lazy(()=>Z(()=>import("./ProfileScene-JleQi_p_.js"),__vite__mapDeps([5,1,2,3]))),Po=g.lazy(()=>Z(()=>import("./Lab01Scene-BXFC8ESm.js"),__vite__mapDeps([6,1,2,3]))),Lo=g.lazy(()=>Z(()=>import("./Lab02Scene-BbmAlRat.js"),__vite__mapDeps([7,1,2,3]))),ko=g.lazy(()=>Z(()=>import("./Lab03Scene-Cjj31m1a.js"),__vite__mapDeps([8,1,2,3]))),Do=g.lazy(()=>Z(()=>import("./Lab04Scene-BeirIH4A.js"),__vite__mapDeps([9,1,2,3]))),Uo=g.lazy(()=>Z(()=>import("./ContactScene-yK0fhi5o.js"),__vite__mapDeps([10,1,2,3]))),Bo=()=>{const e=E(t=>t.currentScene);return l.jsx(g.Suspense,{fallback:null,children:l.jsxs("group",{children:[e==="boot"&&l.jsx(No,{}),e==="hub"&&l.jsx(Oo,{}),e==="profile"&&l.jsx(jo,{}),e==="lab01"&&l.jsx(Po,{}),e==="contact"&&l.jsx(Uo,{}),e==="lab02"&&l.jsx(Lo,{}),e==="lab03"&&l.jsx(ko,{}),e==="lab04"&&l.jsx(Do,{})]})})},Jt={},Ih=(e,t)=>{Jt[e]=t},Rh=e=>{delete Jt[e]},Fo=(e,t)=>{const r=Jt[e];return r&&r.current?(r.current.getWorldPosition(t),t):null},zo=()=>{const{camera:e,controls:t}=dt(),r=E(o=>o.isWarping),n=E(o=>o.warpTargetPosition),s=E(o=>o.warpTarget),i=g.useRef(new de),a=g.useRef(null);return g.useEffect(()=>{if(r&&n){t&&(t.enabled=!1);const o=new de(...n);return i.current.copy(o),a.current&&a.current.kill(),a.current=Dt.timeline(),a.current.to(e.position,{x:o.x*.15,y:o.y*.15,z:o.z*.15,duration:1.5,ease:"power3.in",onUpdate:()=>{e.lookAt(i.current)}}),()=>{a.current&&a.current.kill(),t&&(t.enabled=!0)}}},[r,e,n,t]),Xt(()=>{r&&s&&Fo(s,i.current)&&e.lookAt(i.current)},100),null},Ho=()=>{const e=E(a=>a.currentScene),t=E(a=>a.prevScene),r=E(a=>a.isWarping),{camera:n,gl:s,controls:i}=dt();return g.useEffect(()=>{if(r){console.log("[CameraHandler] Warping active, skipping reset.");return}if(Dt.killTweensOf(n.position),e==="hub"){const a=new de(0,50,60),o={lab01:new de(4,2,10),lab02:new de(6,3,13),lab03:new de(8,4,16),lab04:new de(10,5,19)};t&&o[t]?(n.position.copy(o[t]),n.lookAt(0,0,0),Dt.to(n.position,{x:a.x,y:a.y,z:a.z,duration:3.5,ease:"power2.out",onUpdate:()=>n.lookAt(0,0,0)})):n.position.copy(a)}else e==="boot"?n.position.set(0,0,12):e.startsWith("lab")?n.position.set(0,0,14):e==="contact"?n.position.set(0,0,12):n.position.set(0,0,5);i&&(i.target.set(0,0,0),i.update()),(e!=="hub"||!t)&&n.lookAt(0,0,0),n.updateProjectionMatrix()},[e,t,n,s,i,r]),null},$o=()=>{const e=E(r=>r.currentScene),t=E(r=>r.isWarping);return l.jsx("div",{className:"w-full h-screen fixed inset-0 z-0 bg-black",children:l.jsxs(wi,{dpr:[1,2],gl:{antialias:!0,powerPreference:"high-performance",preserveDrawingBuffer:!0},style:{touchAction:"none"},onPointerMissed:()=>{},children:[l.jsx(Ho,{}),l.jsx(Ti,{makeDefault:!0,position:[0,0,18]}),e==="hub"&&!t&&l.jsx(Ei,{makeDefault:!0,minPolarAngle:0,maxPolarAngle:Math.PI-.1,minDistance:2,maxDistance:100,enablePan:!1,enableDamping:!0,dampingFactor:.08,rotateSpeed:1.2}),l.jsx("color",{attach:"background",args:["#000000"]}),l.jsx("ambientLight",{intensity:1}),l.jsx(Bo,{}),t&&l.jsx(zo,{}),l.jsx(_o,{})]})})},Go=[{version:"v2.0.0",date:"2025-12-23",title:"HYPERSPACE NAVIGATION & HUB UX OVERHAUL",changes:["Implemented Hyperspace Warp transition effect (HyperspaceTunnel + WarpController)","Added Welcome Overlay for first-time visitors with settings guide","Always-On Planet Labels (visible without hover)","LOW mode aggressive optimization (80%+ GPU load reduction)","Lab04 'Debugging Experience' interactive feature","Sanity CMS integration with Hybrid Fallback","Matrix rain effect tone-down and stabilization freeze on completion"]},{version:"v1.9.0",date:"2025-12-22",title:"BLACK BOX ARCHIVES & CMS INTEGRATION",changes:["Implemented DevLog 11 entries (Director's Insight + Architect's Blueprint)","Created Black Box Satellite entry point in Hub","Sanity Studio setup and schema design","Real-time CMS data reflection (useCdn: false)","Hybrid data merging (CMS + Local fallback)","Fixed dataset visibility issue (private  public)"]},{version:"v1.8.0",date:"2025-12-21",title:"PLANETARY ARCHIVES MODAL",changes:["Implemented Mission Modal with holographic interface","Planet click  Modal  Warp flow established","Added MissionModal.jsx with Lab details display","Integrated lore data into planet interactions","Navigation Dock hover sync with planet glow"]},{version:"v1.7.0",date:"2025-12-20",title:"CINEMATIC EFFECTS & SCENE POLISH",changes:["Lab01 Crystalline Echoes: 3-layer rotating icosahedron","Lab02 Terrarium: Organic particle ecosystem","Lab03 Resonance: Audio-reactive wave visualization","Lab04 Glitch: Matrix rain shader + wireframe chaos","Enhanced Bloom and Vignette post-processing","Camera Handler scene-specific positioning"]},{version:"v1.6.0",date:"2025-12-19",title:"AUDIO SYSTEM & BGM IMPLEMENTATION",changes:["Scene-specific BGM with crossfade transitions","Click-to-start audio unlock (browser policy compliance)","Custom procedural SFX (hover/click) via Web Audio API","Audio toggle UI in navbar","Fixed Lab02 audio filename encoding issue"]},{version:"v1.5.0",date:"2025-12-19",title:"FINAL POLISH & UX REFINEMENT",changes:["Implemented User Interaction requirement for Audio Autoplay","Added 'Planning Philosophy' section to Profile","Refined Navbar naming to match Content (Assignments -> Awards)","Optimized Boot Log visualization","Fixed History update synchronization"]},{version:"v1.4.0",date:"2025-12-19",title:"MULTIVERSE LABS EXPANSION",changes:["Implemented 3 Distinct Lab Concepts (Organic, Audio, Glitch)","Populated 'Work' universe with actual project data","Added dynamic Tech Stack visualization in Lab 02","Enhanced Audio Visualizer in Lab 03 with pulsating core","Created 'Glitch Moon' environment for Lab 04"]},{version:"v1.3.0",date:"2025-12-18",title:"CONTENT SYNCHRONIZATION",changes:["Updated Hero/Career/Achievements with actual award data","Integrated 2024 ICT Awards (Grand Prize) & Web Award Korea records","Fixed Korean text encoding issues across all sections","Re-encoded Profile sections to UTF-8","Created content archive from Gamma portfolio"]},{version:"v1.2.5",date:"2025-12-16",title:"CINEMATIC FX UPGRADE",changes:["Restored Cinematic Bloom post-processing effect","Added procedural Sound FX (Hover/Click) via Web Audio API","Lab03 visual overhaul: Particle Cloud + Wireframe Wave","Fixed Lab03/Lab04 routing swap","Deployed to heoyesol.kr custom domain"]},{version:"v1.2.0",date:"2025-12-12",title:"COSMIC UPDATE",changes:["Implemented Atomic Orbital Physics for Hub Scene","Added 3D Electron Cloud aesthetics","Enhanced camera stabilization system","Integrated Matrix Rain effect in Boot Sequence","Optimized performance with Delta-Time based animations"]},{version:"v1.1.5",date:"2025-12-11",title:"VISUAL OVERHAUL",changes:["Resolved WebGL Crash issues","Upgraded post-processing pipeline","Added custom cursor with interactive states","Implemented sound effects engine (Hover/Click)","Deployed to custom domain (heoyesol.kr)"]},{version:"v1.0.0",date:"2025-12-01",title:"SYSTEM INITIALIZATION",changes:["Initial Release","Core systems online","Lab01-04 modules loaded","Boot sequence established"]}],Vo=[{version:"Recent Dev Stream",date:"2025-12-24",title:"DEVELOPER LOG (LIVE)",changes:["  :    (Giscus,    )"," : Sanity CMS  (CORS  )"," : :   + Career  ","  :   ( ,  ,  )"," :  History : v1.6.0~v2.0.0 (12/19~12/23)   "," :  Phase 38: Dev  (Hyperspace + LOW ), Welcome Overlay   "," :  Phase 38: Hub UX , LOW  , Hyperspace  , Lab04  "," : : Expanded Black Box s with strategic depth and Director persona"," :  README and Docs for Phase 36 release"," : 35 & 36 Complete: Black Box Archives & Lab 01 Crystalline Redesign"]}],Ir=[...Vo,...Go],Wo=({onClose:e})=>{const[t,r]=g.useState("PATCH"),n=E(s=>s.systemLogs);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 pointer-events-auto",children:l.jsxs("div",{className:"w-full max-w-2xl h-[70vh] bg-black border border-[#00ff41] p-6 font-mono text-[#00ff41] shadow-[0_0_20px_rgba(0,255,65,0.2)] relative overflow-hidden flex flex-col",children:[l.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(transparent_50%,rgba(0,255,65,0.05)_50%)] bg-[length:100%_4px] pointer-events-none z-0"}),l.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-[#00ff41]/30 pb-4 z-10 relative",children:[l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>r("PATCH"),className:`text-lg font-bold transition-all ${t==="PATCH"?"text-white text-shadow-glow underline decoration-2 underline-offset-4":"opacity-50 hover:opacity-100"}`,children:"UPDATE_LOGS"}),l.jsx("button",{onClick:()=>r("SYSTEM"),className:`text-lg font-bold transition-all ${t==="SYSTEM"?"text-white text-shadow-glow underline decoration-2 underline-offset-4":"opacity-50 hover:opacity-100"}`,children:"SYSTEM_LOGS"})]})}),l.jsx("button",{onClick:e,className:"hover:bg-[#00ff41] hover:text-black px-2 py-1 transition-colors border border-[#00ff41]/50 text-xs",children:"[CLOSE_TERMINAL]"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar z-10 relative pr-2",children:[t==="PATCH"&&l.jsx("div",{className:"space-y-8",children:Ir.map((s,i)=>l.jsxs("div",{className:"border-l-2 border-[#00ff41]/50 pl-4 relative",children:[l.jsx("div",{className:"absolute -left-[5px] top-0 w-2 h-2 bg-[#00ff41]"}),l.jsxs("div",{className:"flex justify-between items-baseline mb-2 text-sm opacity-70",children:[l.jsx("span",{children:s.date}),l.jsx("span",{children:s.version})]}),l.jsx("h3",{className:"text-lg font-bold mb-3 text-white",children:s.title}),l.jsx("ul",{className:"space-y-1 text-sm text-[#00ff41]/80",children:s.changes.map((a,o)=>l.jsxs("li",{className:"flex",children:[l.jsx("span",{className:"mr-2",children:">"}),a]},o))})]},i))}),t==="SYSTEM"&&l.jsxs("div",{className:"font-mono text-xs space-y-1",children:[n.length===0&&l.jsx("div",{className:"text-center opacity-50 py-10",children:"NO_SYSTEM_LOGS_FOUND_LOCAL_MEMORY_EMPTY"}),n.map((s,i)=>l.jsxs("div",{className:"flex gap-4 hover:bg-[#00ff41]/10 px-2 py-0.5 rounded transition-colors",children:[l.jsx("span",{className:"opacity-50 min-w-[80px]",children:s.timestamp}),l.jsx("span",{className:`${s.message.includes("FATAL")||s.message.includes("ERROR")?"text-red-500 font-bold":s.message.includes("OK")?"text-white":"text-[#00ff41]/80"}`,children:s.message})]},i))]})]}),l.jsxs("div",{className:"mt-4 text-[10px] text-center opacity-50 border-t border-[#00ff41]/30 pt-4 z-10",children:["STATUS: ",t==="PATCH"?"ONLINE":"MONITORING"," // RECORDS: ",t==="PATCH"?Ir.length:n.length," // MEM_USAGE: ",Math.floor(Math.random()*30+10),"MB"]})]})})},qo=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(!1);g.useEffect(()=>{const d=()=>{n(window.scrollY>50)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const[s,i]=g.useState("");g.useEffect(()=>{const d=()=>{const h=["hero","about","work","expertise","achievements"],m=window.scrollY+100;for(const p of h){const v=document.getElementById(p);if(v&&v.offsetTop<=m&&v.offsetTop+v.offsetHeight>m){i(p==="achievements"?"awards":p),i(p);return}}i("")};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const a=E(d=>d.currentScene),o=E(d=>d.setScene),c=(d,h)=>{o(d),h&&setTimeout(()=>{const m=document.getElementById(h);m&&m.scrollIntoView({behavior:"smooth"})},100)},u=[{name:"",action:()=>c("hub"),id:"hub"},{name:"",action:()=>c("profile","about"),id:"about"},{name:"",action:()=>c("profile","work"),id:"work"},{name:"",action:()=>c("profile","expertise"),id:"expertise"},{name:"/",action:()=>c("profile","achievements"),id:"achievements"},{name:"",action:()=>c("contact"),id:"contact"},{name:"",action:()=>o("history"),id:"history"}];return l.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 pointer-events-none bg-black/60 backdrop-blur-md border-b border-white/10 ${r?"py-3":"py-4"}`,children:[l.jsxs("div",{className:"container mx-auto px-6 flex justify-between items-center",children:[l.jsx("button",{onClick:()=>o("hub"),className:"text-2xl font-black font-orbitron tracking-tighter bg-gradient-to-r from-cyan-400 via-primary to-accent bg-clip-text text-transparent pointer-events-auto hover:scale-105 transition-transform",children:"YESOL HEO"}),l.jsx("div",{className:"hidden md:flex space-x-8 pointer-events-auto",children:u.map(d=>l.jsxs("button",{onClick:d.action,className:`relative transition-all duration-300 text-[13px] font-bold tracking-widest px-2 py-1 uppercase font-sans ${a==="history"&&d.name==="History"||s===d.id?"text-cyan-400 font-black":"text-gray-400 hover:text-white"}`,children:[l.jsx("span",{className:"relative z-10",children:d.name}),(s===d.id||a==="history"&&d.id==="history")&&l.jsx(I.div,{layoutId:"nav-glow",className:"absolute inset-0 bg-cyan-500/10 blur-md rounded-lg pointer-events-none"}),(s===d.id||a==="history"&&d.id==="history")&&l.jsx(I.div,{layoutId:"nav-border",className:"absolute bottom-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-cyan-500 to-transparent"})]},d.name))}),l.jsx("button",{className:"md:hidden text-white pointer-events-auto p-2",onClick:()=>t(!e),children:e?l.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):l.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]}),l.jsx(ht,{children:e&&l.jsx(I.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-surface border-b border-gray-800 bg-black/90 backdrop-blur",children:l.jsx("div",{className:"flex flex-col px-6 py-4 space-y-4",children:u.map(d=>l.jsx("button",{className:"text-gray-300 hover:text-white block py-3 text-left",onClick:()=>{d.action(),t(!1)},children:d.name},d.name))})})})]})},ye={SYSTEM:{LOADING:"Synchronizing Dimensions..."},SECTORS:{LAB_01:{id:"LAB-01",name:"   (The Prism)",tech:"SHADER",type:"  (Crystalline)",description:"     .",mission:"     ",status:"STABLE",visual:{color:"#06b6d4",texture:"glass",effect:"transmission"}},LAB_02:{id:"LAB-02",name:"   (The Terrarium)",tech:"PHYSICS",type:"  (Living Planet)",description:"     .",mission:"     ",status:"ACTIVE",visual:{color:"#10b981",texture:"organic",effect:"pulse"}},LAB_03:{id:"LAB-03",name:"  (The Resonance)",tech:"AUDIO",type:"  (Gas Giant)",description:"    .",mission:"     ",status:"REACTIVE",visual:{color:"#facc15",texture:"gas",effect:"waves"}},LAB_04:{id:"LAB-04",name:"  (The Glitch)",tech:"DEBUG",type:"  (Fractured Moon)",description:"     .",mission:"    ",status:"UNSTABLE",visual:{color:"#ef4444",texture:"wireframe",effect:"glitch"}},PROFILE:{visual:{color:"#3b82f6"}}}},Me=()=>{const e=g.useRef(null),t=g.useCallback(()=>(e.current||(e.current=new(window.AudioContext||window.webkitAudioContext)),e.current.state==="suspended"&&e.current.resume(),e.current),[]),r=g.useCallback(()=>{if(!E.getState().isMuted)try{const a=t(),o=a.createOscillator(),c=a.createGain();o.frequency.setValueAtTime(800,a.currentTime),o.frequency.exponentialRampToValueAtTime(1200,a.currentTime+.1),o.type="sine",c.gain.setValueAtTime(.05,a.currentTime),c.gain.exponentialRampToValueAtTime(.001,a.currentTime+.1),o.connect(c),c.connect(a.destination),o.start(),o.stop(a.currentTime+.1)}catch(a){console.warn("Audio FX Error:",a)}},[t]),n=g.useCallback(()=>{if(!E.getState().isMuted)try{const a=t(),o=a.createOscillator(),c=a.createGain();o.frequency.setValueAtTime(400,a.currentTime),o.frequency.exponentialRampToValueAtTime(100,a.currentTime+.15),o.type="square",c.gain.setValueAtTime(.1,a.currentTime),c.gain.exponentialRampToValueAtTime(.001,a.currentTime+.15),o.connect(c),c.connect(a.destination),o.start(),o.stop(a.currentTime+.15)}catch(a){console.warn("Audio FX Error:",a)}},[t]),s=g.useCallback(()=>{if(!E.getState().isMuted)try{const a=t(),o=a.createOscillator(),c=a.createGain();o.frequency.setValueAtTime(100,a.currentTime),o.frequency.exponentialRampToValueAtTime(800,a.currentTime+.5),o.type="sawtooth",c.gain.setValueAtTime(.05,a.currentTime),c.gain.linearRampToValueAtTime(0,a.currentTime+.5);const u=a.createBiquadFilter();u.type="lowpass",u.frequency.setValueAtTime(200,a.currentTime),u.frequency.linearRampToValueAtTime(2e3,a.currentTime+.5),o.connect(u),u.connect(c),c.connect(a.destination),o.start(),o.stop(a.currentTime+.5)}catch(a){console.warn("Audio FX Error:",a)}},[t]),i=g.useCallback(()=>{if(!E.getState().isMuted)try{const a=t(),o=a.createOscillator(),c=a.createGain();o.frequency.setValueAtTime(100,a.currentTime),o.frequency.exponentialRampToValueAtTime(2e3,a.currentTime+1.5),o.type="sawtooth",c.gain.setValueAtTime(0,a.currentTime),c.gain.linearRampToValueAtTime(.1,a.currentTime+.5),c.gain.linearRampToValueAtTime(0,a.currentTime+1.5);const u=a.createBiquadFilter();u.type="lowpass",u.frequency.setValueAtTime(200,a.currentTime),u.frequency.exponentialRampToValueAtTime(5e3,a.currentTime+1),o.connect(u),u.connect(c),c.connect(a.destination),o.start(),o.stop(a.currentTime+1.5)}catch(a){console.warn("Audio FX Error:",a)}},[t]);return{playHover:r,playClick:n,playTransition:s,playWarp:i}},Xo=()=>{const e=E(u=>u.warpTo),t=E(u=>u.setHoveredPlanet),r=E(u=>u.openBlackBox),n=Me().playHover,s=Me().playClick,i=[{id:"profile",label:"",icon:"",color:ye.SECTORS.PROFILE.visual.color,target:"profile"},{id:"lab01",label:"",icon:"",color:ye.SECTORS.LAB_01.visual.color,target:"lab01"},{id:"lab02",label:"",icon:"",color:ye.SECTORS.LAB_02.visual.color,target:"lab02"},{id:"lab03",label:"",icon:"",color:ye.SECTORS.LAB_03.visual.color,target:"lab03"},{id:"lab04",label:"",icon:"",color:ye.SECTORS.LAB_04.visual.color,target:"lab04"},{id:"blackbox",label:"",icon:"",color:"#06b6d4",target:"blackbox",isModal:!0}],a=u=>{t(u),n()},o=()=>{t(null)},c=u=>{if(s(),u.isModal&&u.target==="blackbox"){r();return}e(u.target)};return l.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 pointer-events-auto",children:l.jsx("div",{className:"flex items-end gap-4 px-6 py-2 rounded-full transition-all",children:i.map(u=>l.jsx(Yo,{item:u,onHover:a,onLeave:o,onClick:c},u.id))})})},Yo=({item:e,onHover:t,onLeave:r,onClick:n})=>l.jsxs(I.button,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.1,y:-10},whileTap:{scale:.9},onClick:()=>n(e),onMouseEnter:()=>t(e.id),onMouseLeave:r,className:"group relative flex flex-col items-center justify-center w-12 h-12 md:w-16 md:h-16 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 hover:bg-white/10 hover:border-white/40 transition-all shadow-lg overflow-visible",style:{boxShadow:`0 4px 20px ${e.color}20`},children:[l.jsx("div",{className:"absolute inset-0 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{boxShadow:`0 0 25px ${e.color}60`,border:`1px solid ${e.color}`}}),l.jsx("span",{className:"text-xl md:text-2xl filter drop-shadow-md z-10 transition-colors group-hover:text-white",style:{color:e.color},children:e.icon}),l.jsx("div",{className:"absolute -top-14 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0 pointer-events-none",children:l.jsx("div",{className:"px-4 py-1.5 text-[12px] font-bold font-sans tracking-[0.2em] bg-black/90 backdrop-blur-xl text-white border-l-4 shadow-[0_10px_30px_rgba(0,0,0,0.5)] whitespace-nowrap rounded-sm",style:{borderLeftColor:e.color},children:e.label})})]}),Ko=()=>{const e=E(h=>h.currentScene),t=E(h=>h.startWarp),{playClick:r,playHover:n}=Me(),s=E(h=>h.lab01Config),i=E(h=>h.setLab01Config),a=E(h=>h.lab02Config),o=E(h=>h.setLab02Config),c=E(h=>h.lab03Config),u=E(h=>h.setLab03Config);if(!e.startsWith("lab"))return null;const d=()=>{r(),t("hub")};return l.jsxs("div",{className:"fixed top-1/2 left-8 -translate-y-1/2 z-30 pointer-events-auto",children:[e==="lab01"&&l.jsxs("div",{className:"w-72 bg-black/80 border border-cyan-500/50 p-6 rounded-lg backdrop-blur-md text-cyan-400 font-mono text-xs shadow-[0_0_30px_rgba(6,182,212,0.2)]",children:[l.jsxs("div",{className:"mb-6 border-b border-cyan-500/30 pb-2 font-bold flex justify-between tracking-widest",children:[l.jsx("span",{children:"PRISM_CONTROLLER"}),l.jsx("span",{className:"animate-pulse text-white",children:" STABLE"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-cyan-400 font-bold tracking-widest text-[10px]",children:"DISPERSION"}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:s.distort,onChange:h=>i({distort:parseFloat(h.target.value)}),onPointerDown:h=>h.stopPropagation(),className:"w-32 h-1 bg-cyan-900/50 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-cyan-400 hover:[&::-webkit-slider-thumb]:bg-cyan-300 transition-all border border-cyan-500/30"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-purple-400 font-bold tracking-widest text-[10px]",children:"DATA FLOW"}),l.jsx("input",{type:"range",min:"0",max:"10",step:"0.1",value:s.speed,onChange:h=>i({speed:parseFloat(h.target.value)}),onPointerDown:h=>h.stopPropagation(),className:"w-32 h-1 bg-purple-900/50 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-400 hover:[&::-webkit-slider-thumb]:bg-purple-300 transition-all border border-purple-500/30"})]})]}),l.jsx("div",{className:"mt-6 text-[10px] opacity-50 text-center border-t border-cyan-500/20 pt-2 text-white",children:"CRYSTALLINE_OPTICS_V2.0"}),l.jsx("button",{onClick:d,onMouseEnter:n,className:"w-full mt-4 py-2 border border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/20 rounded transition-all font-mono text-xs tracking-widest bg-black/50",children:"[ WARP TO NEXUS ]"})]}),e==="lab02"&&l.jsxs("div",{className:"w-72 bg-black/80 border border-emerald-500/50 p-6 rounded-lg backdrop-blur-md text-emerald-400 font-mono text-xs shadow-[0_0_30px_rgba(16,185,129,0.2)]",children:[l.jsxs("div",{className:"mb-6 border-b border-emerald-500/30 pb-2 font-bold flex justify-between tracking-widest",children:[l.jsx("span",{children:"ECOSYSTEM_ENGINE"}),l.jsx("span",{className:"animate-pulse text-white",children:" ACTIVE"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center bg-emerald-500/10 p-3 rounded",children:[l.jsx("span",{className:"text-white opacity-80",children:"GRAVITY_FIELD"}),l.jsx("span",{className:a.zeroG?"text-cyan-400 font-bold":"text-emerald-500 opacity-50",children:a.zeroG?"[ZERO-G]":"[NORMAL]"})]}),l.jsx("button",{onClick:()=>{r(),a.zeroG?o({zeroG:!1,gravity:[0,-.5,0]}):o({zeroG:!0,gravity:[0,.2,0]})},onMouseEnter:n,className:`w-full py-3 border transition-all font-bold tracking-widest hover:scale-105 active:scale-95 ${a.zeroG?"bg-cyan-500 text-black border-cyan-400 shadow-[0_0_15px_rgba(6,182,212,0.5)]":"bg-transparent text-emerald-500 border-emerald-500 hover:bg-emerald-500 hover:text-black"}`,children:a.zeroG?"RESTORE GRAVITY":"INITIATE ZERO-G"}),l.jsx("div",{className:"text-[10px] opacity-70 mt-2 text-center text-white",children:"> INTERACT WITH ORGANIC MATTER"}),l.jsx("button",{onClick:d,onMouseEnter:n,className:"w-full mt-4 py-2 border border-emerald-500/50 text-emerald-400 hover:bg-emerald-500/20 rounded transition-all font-mono text-xs tracking-widest bg-black/50",children:"[ WARP TO NEXUS ]"})]})]}),e==="lab03"&&l.jsxs("div",{className:"w-72 bg-black/80 border border-purple-500/30 p-4 rounded-xl backdrop-blur-md shadow-[0_0_30px_rgba(139,92,246,0.3)]",children:[l.jsx("div",{className:"mb-4 border-b border-purple-500/30 pb-2 font-bold flex justify-between tracking-widest",children:l.jsx("span",{className:"text-purple-400",children:"SONIC_CONTROLS"})}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("button",{onClick:()=>{r(),u("demo")},onMouseEnter:n,className:`flex-1 py-2 rounded font-mono text-xs transition-all cursor-pointer border ${c.mode==="demo"?"bg-purple-600 border-purple-500 text-white shadow-[0_0_15px_#7c3aed]":"border-purple-500/30 text-purple-500 hover:bg-purple-900/30"}`,children:"DEMO_MODE"}),l.jsx("button",{onClick:()=>{r(),u("mic")},onMouseEnter:n,className:`flex-1 py-2 rounded font-mono text-xs transition-all cursor-pointer border ${c.mode==="mic"?"bg-cyan-600 border-cyan-500 text-white shadow-[0_0_15px_#0891b2]":"border-cyan-500/30 text-cyan-500 hover:bg-cyan-900/30"}`,children:"MIC_INPUT"})]}),l.jsx("button",{onClick:d,onMouseEnter:n,className:"w-full py-2 border border-white/30 text-white/70 hover:bg-white/10 hover:border-white/50 hover:text-white transition-all rounded shadow-lg cursor-pointer bg-black/50 text-xs font-mono tracking-widest",children:"[ WARP TO NEXUS ]"})]}),e==="lab04"&&l.jsx("div",{className:"absolute top-[80vh] left-[50vw] -translate-x-1/2 -translate-y-1/2 w-auto",children:l.jsx("button",{onClick:d,onMouseEnter:n,className:"px-6 py-2 bg-red-900/80 border border-red-500 rounded font-mono text-sm text-red-200 hover:bg-red-700 hover:text-white transition-all cursor-pointer shadow-[0_0_20px_rgba(239,68,68,0.8)] animate-pulse",children:"[ EMERGENCY EXIT ]"})})]})},Qo=({onDismiss:e})=>l.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},onClick:e,className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm pointer-events-auto cursor-pointer",children:l.jsxs(I.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:-20},transition:{delay:.2,type:"spring",damping:20},className:"text-center max-w-lg px-8 py-10 border border-white/10 bg-black/80 rounded-2xl shadow-2xl",onClick:t=>t.stopPropagation(),children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white mb-2 font-sans tracking-wide",children:"[      ]"}),l.jsxs("p",{className:"text-white/70 text-sm md:text-base mb-2 leading-relaxed font-sans",children:["     ",l.jsx("strong",{children:" "}),"."]}),l.jsxs("p",{className:"text-white/60 text-xs md:text-sm mb-6 leading-relaxed font-sans",children:[" ",l.jsx("span",{className:"text-cyan-400 font-bold",children:""}),"    ,",l.jsx("br",{})," ",l.jsx("span",{className:"text-yellow-400 font-bold",children:"()"}),"    ."]}),l.jsxs("div",{className:"mb-6 p-3 bg-white/5 rounded-lg border border-white/10",children:[l.jsx("p",{className:"text-white/50 text-xs mb-2 font-bold tracking-wider",children:"  "}),l.jsxs("div",{className:"flex justify-center gap-4 text-[11px] text-white/60",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 rounded-full border border-green-500/30",children:"AUDIO"}),l.jsx("span",{children:" ON/OFF"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"px-2 py-0.5 bg-cyan-500/20 text-cyan-400 rounded-full border border-cyan-500/30",children:"PERF"}),l.jsx("span",{children:"  "})]})]}),l.jsx("p",{className:"text-white/40 text-[10px] mt-2",children:"*      "})]}),l.jsx("button",{onClick:e,className:"px-6 py-2 bg-cyan-500/20 border border-cyan-500/50 text-cyan-400 rounded-full text-sm font-bold tracking-wider hover:bg-cyan-500/30 transition-all",children:" "}),l.jsx("p",{className:"text-white/30 text-[10px] mt-4 animate-pulse",children:"   "})]})}),Zo=()=>{const e=E(c=>c.currentScene),t=E(c=>c.setScene),r=E(c=>c.isMuted),n=E(c=>c.toggleMute),s=E(c=>c.performanceMode),[i,a]=g.useState(!1);g.useEffect(()=>{e==="hub"?localStorage.getItem("hub_visited")||a(!0):a(!1)},[e]);const o=()=>{a(!1),localStorage.setItem("hub_visited","true")};return g.useEffect(()=>{const c=u=>{u.key==="Escape"&&e!=="boot"&&e!=="hub"&&t("hub")};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,t]),l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-40 text-xs font-mono select-none",children:[l.jsx(ht,{children:i&&l.jsx(Qo,{onDismiss:o})}),e==="history"&&l.jsx(Wo,{onClose:()=>t("hub")}),e!=="boot"&&e!=="hub"&&e!=="history"&&l.jsxs("button",{onClick:()=>t("hub"),className:"fixed top-24 left-6 pointer-events-auto flex items-center gap-2 group text-white/70 hover:text-white transition-colors",children:[l.jsx("span",{className:"w-8 h-px bg-white/30 group-hover:bg-accent transition-colors"}),"< RETURN TO SYSTEM [ESC]"]}),l.jsx(qo,{}),l.jsx(Ko,{}),l.jsxs("div",{className:"fixed top-20 right-6 md:top-24 md:right-10 flex flex-col gap-3 pointer-events-auto z-50 items-end",children:[l.jsxs("button",{onClick:n,className:"px-4 py-3 md:px-4 md:py-2 bg-black/50 backdrop-blur-md rounded-full border border-white/10 hover:border-accent text-white transition-colors flex items-center gap-3 justify-between min-w-[120px] md:min-w-[140px] shadow-lg focus:ring-2 focus:ring-accent/50 active:scale-95","aria-label":"Toggle Audio",children:[l.jsx("span",{className:"text-[10px] md:text-xs font-bold tracking-wider",children:"AUDIO"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] text-white/50",children:r?"OFF":"ON"}),l.jsx("div",{className:`w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${r?"bg-red-500":"bg-green-500 animate-pulse"}`})]})]}),l.jsxs("button",{onClick:()=>{const c=s==="high"?"low":"high";E.getState().setPerformanceMode(c)},className:"px-4 py-3 md:px-4 md:py-2 bg-black/50 backdrop-blur-md rounded-full border border-white/10 hover:border-accent text-white transition-colors flex items-center gap-3 justify-between min-w-[120px] md:min-w-[140px] shadow-lg focus:ring-2 focus:ring-accent/50 active:scale-95","aria-label":"Toggle Performance Mode",children:[l.jsx("span",{className:"text-[10px] md:text-xs font-bold tracking-wider",children:"PERF"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] text-white/50",children:s==="high"?"HIGH":"LOW"}),l.jsx("div",{className:`w-1.5 h-1.5 md:w-2 md:h-2 rounded-full ${s==="low"?"bg-yellow-500":"bg-cyan-500 animate-pulse"}`})]})]})]}),e==="hub"&&l.jsx(Xo,{}),l.jsxs("div",{className:"hidden md:block fixed bottom-10 left-10 text-xs text-muted font-mono mix-blend-difference",children:["SYSTEM: ONLINE ",l.jsx("br",{}),"FPS: 60 ",l.jsx("br",{}),"COORD: [34.5, 127.0]"]})]})},Jo=()=>{const e=E(c=>c.hoverState),[t,r]=g.useState({x:0,y:0}),[n,s]=g.useState(!1),[i,a]=g.useState(!1),o=n||e;return g.useEffect(()=>{const c=d=>{r({x:d.clientX,y:d.clientY}),i||a(!0)};window.addEventListener("mousemove",c);const u=d=>{d.target.tagName==="A"||d.target.tagName==="BUTTON"||d.target.closest("a")||d.target.closest("button")?s(!0):s(!1)};return window.addEventListener("mouseover",u),()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseover",u)}},[i]),i?l.jsx(I.div,{className:"fixed top-0 left-0 pointer-events-none z-[9999] hidden md:flex items-center justify-center mix-blend-difference",animate:{x:t.x,y:t.y,translateX:"-50%",translateY:"-50%",width:o?48:32,height:o?48:32,backgroundColor:o?"rgba(6, 182, 212, 0.1)":"rgba(0, 0, 0, 0)",borderColor:o?"#06b6d4":"#e5e5e5",borderRadius:o?"8px":"50%"},style:{borderWidth:"1px",borderStyle:"solid"},transition:{type:"spring",stiffness:500,damping:28,mass:.5},children:l.jsx(I.div,{className:"w-1 h-1 bg-white rounded-full",animate:{scale:o?0:1,opacity:o?0:1}})}):null},el=()=>{const e=E(a=>a.currentScene),t=E(a=>a.isMuted),r=g.useRef(null),n=g.useRef(null),s={boot:"/sounds/hub_theme.mp3",hub:"/sounds/hub_theme.mp3",profile:"/sounds/hub_theme.mp3",lab01:"/sounds/lab01_theme.mp3",lab02:"/sounds/lab02_theme.mp3",lab03:"/sounds/lab03_theme.mp3",lab04:"/sounds/lab04_theme.mp3",contact:"/sounds/hub_theme.mp3"},i=async a=>{let o=s[a]||s.hub;if(a.startsWith("lab01")?o=s.lab01:a.startsWith("lab02")?o=s.lab02:a.startsWith("lab03")?o=s.lab03:a.startsWith("lab04")&&(o=s.lab04),n.current===o)return;r.current&&r.current.pause(),n.current=o;const c=new Audio(o);c.loop=!0,c.volume=t?0:.4;try{await c.play(),r.current=c}catch(u){console.warn("Audio Autoplay blocked, waiting for interaction",u)}};return g.useEffect(()=>{i(e)},[e]),g.useEffect(()=>{r.current&&(r.current.volume=t?0:.4,!t&&r.current.paused&&r.current.play().catch(a=>console.warn("Play failed",a)))},[t]),g.useEffect(()=>{const a=()=>{r.current&&r.current.paused&&!t&&r.current.play().catch(o=>console.log("Audio resume failed",o))};return window.addEventListener("click",a),()=>window.removeEventListener("click",a)},[t]),null},tl=()=>{const e=E(t=>t.setScene);return l.jsx("section",{className:"min-h-screen flex items-center justify-center relative z-10 pointer-events-none pt-20",children:l.jsx("div",{className:"container mx-auto px-6 text-center pointer-events-auto",children:l.jsxs(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white/5 border border-cyan-500/30 rounded-full mb-6",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-xs text-cyan-400 font-mono",children:"5 PM   CTS"})]}),l.jsx("h2",{className:"text-xl md:text-2xl font-mono text-cyan-400 mb-4 tracking-widest",children:", "}),l.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-6 leading-tight",children:["Metaverse & XR ",l.jsx("br",{}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-500 to-pink-500",children:"Project Manager"})]}),l.jsxs("p",{className:"text-gray-400 text-lg md:text-xl max-w-2xl mx-auto mb-8 leading-relaxed",children:[", XR,        .",l.jsx("br",{}),"  UI/UX      ."]}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-10",children:[l.jsx("span",{className:"px-3 py-1 bg-yellow-500/10 border border-yellow-500/30 rounded-full text-xs text-yellow-400 font-mono",children:" 2024 ICT Award Grand Prize"}),l.jsx("span",{className:"px-3 py-1 bg-purple-500/10 border border-purple-500/30 rounded-full text-xs text-purple-400 font-mono",children:" 2024  "})]}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[l.jsx("button",{onClick:()=>document.getElementById("work")?.scrollIntoView({behavior:"smooth"}),className:"px-8 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all transform hover:scale-105",children:" "}),l.jsx("button",{onClick:()=>e("contact"),className:"px-8 py-3 border border-white/30 text-white font-bold rounded-full hover:bg-white/10 transition-all backdrop-blur-sm",children:""})]})]})})})},rl=()=>l.jsx("section",{className:"py-20 relative z-10 text-white",children:l.jsxs("div",{className:"container mx-auto px-6 max-w-4xl",children:[l.jsxs(I.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[l.jsx("h2",{className:"text-sm font-mono text-cyan-400 mb-2 tracking-widest",children:"ABOUT ME"}),l.jsxs("h3",{className:"text-3xl md:text-4xl font-bold leading-tight",children:["   ",l.jsx("br",{}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"  PM"})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-12 text-gray-300 leading-relaxed text-lg",children:[l.jsxs(I.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.2},children:[l.jsxs("h4",{className:"text-white font-bold text-xl mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 bg-cyan-500 rounded-full"}),"  "]}),l.jsx("p",{className:"mb-6",children:"       ,         ."}),l.jsx("p",{children:"  , ,            ."})]}),l.jsxs(I.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.4},children:[l.jsxs("h4",{className:"text-white font-bold text-xl mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"  "]}),l.jsx("p",{className:"mb-6",children:'"    "  ,       .'}),l.jsx("p",{children:"          ,       ."})]})]}),l.jsxs(I.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.6},className:"mt-16 p-8 bg-white/5 border border-white/10 rounded-2xl text-center backdrop-blur-sm",children:[l.jsx("p",{className:"text-xl font-medium text-white mb-2",children:'"      ,"'}),l.jsx("p",{className:"text-cyan-400",children:"      ."}),l.jsxs(I.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.2},className:"mt-8 bg-white/5 p-8 rounded-2xl border border-white/10 backdrop-blur-sm text-left",children:[l.jsxs("h4",{className:"text-white font-bold text-xl mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Multiverse Architect:  "]}),l.jsx("p",{className:"mb-6 leading-relaxed",children:"     , **  (Universe)**  .  ,        (Project) ,        ."}),l.jsx("p",{className:"text-gray-300 leading-relaxed",children:"       , **[Boot - Hub - Lab]**     .             .     **  **,   ."})]})]})]})});const nl=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sl=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Rr=e=>{const t=sl(e);return t.charAt(0).toUpperCase()+t.slice(1)},In=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),il=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var al={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ol=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...o},c)=>g.createElement("svg",{ref:c,...al,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:In("lucide",s),...!i&&!il(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,d])=>g.createElement(u,d)),...Array.isArray(i)?i:[i]]));const Q=(e,t)=>{const r=g.forwardRef(({className:n,...s},i)=>g.createElement(ol,{ref:i,iconNode:t,className:In(`lucide-${nl(Rr(e))}`,`lucide-${e}`,n),...s}));return r.displayName=Rr(e),r};const ll=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],cl=Q("award",ll);const ul=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Rn=Q("briefcase",ul);const dl=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hl=Q("calendar",dl);const fl=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pl=Q("chevron-right",fl);const ml=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],vl=Q("crown",ml);const gl=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],xl=Q("lightbulb",gl);const bl=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],yl=Q("medal",bl);const wl=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Tl=Q("star",wl);const El=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Sl=Q("target",El);const Cl=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Al=Q("trophy",Cl);const Ml=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Il=Q("users",Ml),Rl=()=>{const e=[{icon:l.jsx(Rn,{className:"w-8 h-8 text-cyan-400"}),title:"Project Management",desc:", (RFP)   ,  ,    , Agile/Waterfall  "},{icon:l.jsx(Sl,{className:"w-8 h-8 text-purple-400"}),title:"Metaverse & XR Planning",desc:"    ,  (IA/SB) ,     "},{icon:l.jsx(Il,{className:"w-8 h-8 text-pink-400"}),title:"Communication & Tools",desc:"Jira/Redmine/Slack  , GA/SQL  , /  "},{icon:l.jsx(xl,{className:"w-8 h-8 text-emerald-400"}),title:"Technical Understanding",desc:"Three.js/WebGL  , (Token/NFT)  , UI/UX   "}];return l.jsx("section",{className:"py-20 relative z-10 text-white",children:l.jsxs("div",{className:"container mx-auto px-6",children:[l.jsx(I.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-4xl font-bold mb-16 text-center",children:l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-500",children:"Core Expertise"})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,r)=>l.jsxs(I.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.1},className:"bg-white/5 backdrop-blur-sm border border-white/10 p-8 rounded-xl hover:bg-white/10 transition-all hover:scale-105",children:[l.jsx("div",{className:"mb-6 p-4 bg-black/30 rounded-full w-fit mx-auto border border-white/5",children:t.icon}),l.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:t.title}),l.jsx("p",{className:"text-gray-400 text-sm text-center leading-relaxed break-keep",children:t.desc})]},r))})]})})},_l=()=>{const e=[{company:"",team:"CTS(Culture Technology Squad)  PM",period:"2023.08 - ",description:"/XR       (Project Leader)",achievements:["KOCCA R&D 'Hanok-meta'  PL:      ( A, 3.75)","TIPA R&D     PM: //    (7.5)","    PM: VR360        (1.37)","     PM:     4  (1.42)","KISTi  XR   : -       ","   ZEP  Z-World  PM: 31 /    "]},{company:"",team:"  ",period:"2021.06 - 2023.06",description:"/        ",achievements:["1o1.GG     PM:         (5)","  'Holiday'  PM: (Token/NFT)    (Whitepaper) ","NFT 'Cyber-holic'  PM:      ,  ","        "]},{company:" ",team:"",period:"2018.03 - 2019.02",description:"    ,   ",achievements:["        ","        "]}];return l.jsx("section",{className:"py-20 relative z-10 text-white",children:l.jsxs("div",{className:"container mx-auto px-6 max-w-5xl",children:[l.jsxs(I.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex flex-col md:flex-row items-end gap-6 mb-16 border-b border-white/10 pb-8",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-300",children:"Experience"}),l.jsx("span",{className:"text-gray-400 font-mono text-sm mb-2",children:"// TOTAL EXPERIENCE: 5 YEARS"})]}),l.jsx("div",{className:"space-y-12",children:e.map((t,r)=>l.jsxs(I.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:r*.1},className:"relative pl-8 md:pl-0",children:[l.jsx("div",{className:"hidden md:block absolute left-0 top-0 bottom-0 w-px bg-white/10 -ml-8 md:ml-0 md:left-[200px]"}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[l.jsxs("div",{className:"md:w-fit flex-shrink-0 md:text-right pt-2",children:[l.jsxs("div",{className:"flex items-center gap-2 md:justify-end text-cyan-400 font-mono font-bold mb-1",children:[l.jsx(hl,{className:"w-4 h-4"}),l.jsx("span",{children:t.period})]}),l.jsx("h3",{className:"text-xl font-bold text-white mb-1 whitespace-nowrap",children:t.company}),l.jsx("p",{className:"text-sm text-gray-400 mb-2",children:t.team})]}),l.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8 backdrop-blur-sm hover:bg-white/10 transition-colors",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg text-blue-400",children:l.jsx(Rn,{className:"w-6 h-6"})}),l.jsx("div",{children:l.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:t.description})})]}),l.jsx("ul",{className:"space-y-3",children:t.achievements.map((n,s)=>l.jsxs("li",{className:"flex items-start gap-3 text-gray-300 text-sm leading-relaxed",children:[l.jsx(pl,{className:"w-4 h-4 text-cyan-500 mt-1 flex-shrink-0"}),l.jsxs("span",{children:[l.jsxs("strong",{className:"text-white/80 mr-1",children:[n.split(":")[0],":"]}),n.split(":")[1]]})]},s))})]})]})]},r))})]})})},Nl=()=>{const e=[{icon:l.jsx(vl,{className:"w-8 h-8 text-yellow-400"}),title:"Grand Prize: Digital Comm.",project:"   ",org:"2024 ICT Awards",desc:"   Grand Prize "},{icon:l.jsx(Al,{className:"w-8 h-8 text-orange-400"}),title:"Best Experience Design",project:"   ",org:"2024 Web Award Korea",desc:"   (  )"},{icon:l.jsx(Tl,{className:"w-8 h-8 text-purple-400"}),title:"Metaverse Sector Grand Prize",project:"  ",org:"2024 Web Award Korea",desc:"  (    )"},{icon:l.jsx(yl,{className:"w-8 h-8 text-pink-400"}),title:"Cultural Sector Integrated Grand Prize",project:" : ",org:"2024 Web Award Korea",desc:"  (   )"},{icon:l.jsx(cl,{className:"w-8 h-8 text-blue-400"}),title:"Digital Tech Innovation Bronze",project:" : ",org:"2024 ICT Award Korea",desc:"  Bronze Prize "}];return l.jsx("section",{className:"py-20 relative z-10 text-white",children:l.jsxs("div",{className:"container mx-auto px-6",children:[l.jsx(I.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-4xl font-bold mb-16 text-center",children:l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-red-500",children:"Honors & Awards"})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:e.map((t,r)=>l.jsxs(I.div,{initial:{opacity:0,x:r%2===0?-20:20},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"bg-zinc-900/50 border border-white/10 p-8 rounded-2xl flex items-start gap-6 hover:border-yellow-500/50 transition-colors group",children:[l.jsx("div",{className:"bg-white/10 p-3 rounded-lg group-hover:bg-yellow-500/20 transition-colors",children:t.icon}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:t.title}),l.jsx("p",{className:"text-sm text-cyan-400 font-mono mb-1",children:t.project}),l.jsx("p",{className:"text-sm text-yellow-600 font-bold mb-3",children:t.org}),l.jsx("p",{className:"text-gray-400 leading-relaxed text-sm",children:t.desc})]})]},r))})]})})},Ol=({className:e=""})=>{const t=g.useRef(null),r=g.useRef(!1);return g.useEffect(()=>{if(!(r.current||!t.current))try{typeof window<"u"&&window.adsbygoogle&&((window.adsbygoogle=window.adsbygoogle||[]).push({}),r.current=!0)}catch(n){console.log("[AdSense]    :",n)}},[]),l.jsx("div",{className:`ad-container flex justify-center items-center py-6 ${e}`,children:l.jsx("ins",{ref:t,className:"adsbygoogle",style:{display:"block",minHeight:"90px",width:"100%",maxWidth:"728px"},"data-ad-client":"ca-pub-5874227298630347","data-ad-slot":"auto","data-ad-format":"auto","data-full-width-responsive":"true"})})},jl=()=>{const e=E(n=>n.setScene),{playClick:t,playHover:r}=Me();return l.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-30 overflow-y-auto overflow-x-hidden bg-black/30 backdrop-blur-sm pointer-events-auto",children:l.jsx("div",{className:"w-full min-h-screen text-white selection:bg-primary/30 pb-32",children:l.jsxs("div",{className:"pt-0",children:[l.jsx("section",{id:"hero",children:l.jsx(tl,{})}),l.jsx("section",{id:"about",children:l.jsx(rl,{})}),l.jsx("section",{id:"work",children:l.jsx(_l,{})}),l.jsx("section",{id:"expertise",children:l.jsx(Rl,{})}),l.jsx("section",{id:"achievements",children:l.jsx(Nl,{})}),l.jsx(Ol,{className:"bg-black/20 border-y border-white/5"}),l.jsxs("div",{className:"py-20 text-center border-t border-white/5 bg-black",children:[l.jsx("h2",{className:"text-3xl font-bold mb-6 text-white",children:"Ready to Collaborate?"}),l.jsx("p",{className:"text-gray-400 mb-8 mb-12",children:"     ."}),l.jsx("button",{onClick:()=>{t(),e("contact")},onPointerEnter:r,className:"px-8 py-4 bg-primary text-black font-bold rounded-full hover:bg-primary/80 transition-all transform hover:scale-105",children:"Contact Me (Portal)"}),l.jsx("div",{className:"mt-12 text-xs text-gray-600 font-mono",children:"SYSTEM STATUS: OPTIMAL | LOGIN: GUEST"})]})]})})})},Pl=()=>{const e=E(d=>d.missionModalData),t=E(d=>d.closeMissionModal),r=E(d=>d.warpTo),{playHover:n,playClick:s}=Me();if(g.useEffect(()=>{const d=h=>{h.key==="Escape"&&t()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t]),!e)return null;const{lab:i,config:a,warpPos:o}=e,c=i.details||{},u=()=>{s(),t(),r(a.target,o)};return l.jsx(ht,{children:e&&l.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm pointer-events-auto",onClick:t,children:l.jsxs(I.div,{initial:{scale:.85,opacity:0,y:30},animate:{scale:1,opacity:1,y:0},exit:{scale:.85,opacity:0,y:30},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-[90vw] max-w-4xl max-h-[85vh] flex flex-col md:flex-row overflow-hidden rounded-2xl border border-white/10 bg-black/95 shadow-2xl",onClick:d=>d.stopPropagation(),style:{boxShadow:`0 0 60px ${a.color}30, inset 0 0 30px ${a.color}10`},children:[l.jsxs("div",{className:"w-full md:w-1/3 border-b md:border-b-0 md:border-r border-white/10 p-6 md:p-8 flex flex-col relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`radial-gradient(circle at center, ${a.color}, transparent)`}}),l.jsx("div",{className:"text-3xl md:text-4xl font-black font-orbitron mb-1 tracking-tighter",style:{color:a.color},children:i.id}),l.jsxs("div",{className:"text-xs font-mono text-white/50 mb-6 tracking-widest uppercase",children:["STATUS: ",l.jsx("span",{className:"text-emerald-400",children:" (ACTIVE)"})]}),l.jsx("div",{className:"flex-1 min-h-[150px] rounded-xl border border-white/10 bg-black/50 relative overflow-hidden mb-4 group",children:c.media&&c.media.length>0?l.jsx("img",{src:c.media[0],alt:i.name,className:"w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity duration-500"}):l.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-white/20 font-mono text-xs text-center p-4",children:["[    ]",l.jsx("br",{}),"..."]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs font-mono",children:[l.jsxs("div",{className:"p-2 border border-white/10 rounded bg-white/5",children:[l.jsx("div",{className:"text-white/40 mb-1",children:""}),l.jsx("div",{className:"text-white font-bold",children:i.tech})]}),l.jsxs("div",{className:"p-2 border border-white/10 rounded bg-white/5",children:[l.jsx("div",{className:"text-white/40 mb-1",children:""}),l.jsx("div",{className:"text-white font-bold text-[10px]",children:i.type})]})]})]}),l.jsxs("div",{className:"flex-1 p-6 md:p-8 flex flex-col relative z-10 overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl md:text-3xl font-bold font-orbitron text-white mb-1",children:i.name}),l.jsx("h3",{className:"text-sm md:text-base text-white/60 font-rajdhani",children:i.description})]}),l.jsx("button",{onClick:()=>{s(),t()},onMouseEnter:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/50 hover:text-white",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.longDescription&&l.jsx("div",{className:"text-sm text-white/70 leading-relaxed mb-6",children:l.jsx("p",{children:c.longDescription})}),c.features&&c.features.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("h4",{className:"text-xs font-bold font-sans text-white/80 mb-3 border-b border-white/10 pb-2 uppercase flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-3 bg-emerald-500 rounded-full"}),"  (Mission Objectives)"]}),l.jsx("ul",{className:"grid grid-cols-1 gap-2",children:c.features.map((d,h)=>l.jsxs("li",{className:"flex items-center text-xs text-white/70 bg-white/5 px-3 py-2 rounded border border-white/5",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-2 flex-shrink-0"}),d]},h))})]}),c.techStack&&c.techStack.length>0&&l.jsxs("div",{className:"mb-auto",children:[l.jsxs("h4",{className:"text-xs font-bold font-sans text-white/80 mb-3 border-b border-white/10 pb-2 uppercase flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-3 bg-blue-500 rounded-full"}),"  (Technical Schematics)"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:c.techStack.map((d,h)=>l.jsx("span",{className:"px-2 py-1 text-[10px] font-mono rounded-full border border-blue-500/30 bg-blue-500/10 text-blue-300",children:d},h))})]}),l.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3 border-t border-white/10 pt-4",children:[l.jsx("button",{onClick:t,onMouseEnter:n,className:"px-4 py-2 rounded text-xs font-bold text-white/50 hover:text-white transition-colors uppercase font-sans tracking-wider",children:""}),l.jsxs("button",{onClick:u,onMouseEnter:n,className:"px-6 py-2 rounded text-xs font-bold tracking-widest uppercase font-sans flex items-center gap-2 transition-all hover:scale-105",style:{background:a.color,color:"#000",boxShadow:`0 0 20px ${a.color}50`},children:[l.jsx("span",{children:" "}),l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]})]},"mission-modal-content")},"mission-modal-backdrop")})},Ll=[{id:"log-001",title:" ''  ''",date:"2025-12-01",tags:["","",""],summary:"    '    '    .",content:`## 1. Problem Definition ( )

       **"  "** .
- (Notion)  ,  '' .
- PDF   , '' .

 .
**"  (Identity)      ?"**

## 2. Strategic Solution ( )

    **'  '**  .

> **"Experience is the new Resume."**
> (  .)

     (UX Strategy) .
1.  **Exploration ()**:    ,       .
2.  **Immersion ()**:   ,       .
3.  **Narrative ()**:     ,         .

## 3. The Core Concept: Solar System

  (Solar System) .
- **Central Star (Core)**:    .
- **Orbiting Planets (Skills)**:      .
- **Gravity (Influence)**:     (Reference).

      **'  '** **'  '**    .`},{id:"log-002",title:" :   ",date:"2025-12-03",tags:["UX","",""],summary:"  ,    'Form Follows Function' .",content:`## Design Philosophy: Form Follows Function

  3D   .
       ** **   .

## 1. Lab-01: The Prism (Capability)
- **Metaphor**: **"  "**
- **Design Intent**:  (White Light)    (Skills)   .
- **Visual logic**:  (Icosahedron) .     '' '' ,      ' ' .

## 2. Lab-02: The Terrarium (Projects)
- **Metaphor**: **" "**
- **Design Intent**:      .    **''**.
- **Visual Logic**:     .      (Gamification)  , **" "**  .

## 3. Lab-03: The Resonance (Audio/Sense)
- **Metaphor**: **" "**
- **Design Intent**:  (Logic)  (Sense) .       .
- **Visual Logic**:     .  (Frequency)      .   (Trend/User Feedback)     .

## Conclusion
      .
   **, , **  .`},{id:"log-003",title:"React Three Fiber:    ",date:"2025-12-06",tags:["","R3F","Three.js"],summary:"       .",content:`## Decision Matrix ( )

   , 3D        .

|   |  (Pros) |  (Cons) |  |
| :--- | :--- | :--- | :---: |
| **Pure Three.js** |  ,      |  , React     |  |
| **Spline / Vectary** |    3D   |        | X |
| **R3F (React Three Fiber)** | React   State     | Three.js       | **O** |

## Why R3F? ( )

### 1. "Declarative ()"  
 Three.js  (\`scene.add(mesh)\`)      .
R3F \`<Mesh />\`    , **UI  3D  **   .   **' '**     .

### 2. Ecosystem Integration ( )
- **Zustand**:  ,  ,      2D/3D    .
- **Drei**: \`Float\`, \`Environment\`, \`OrbitControls\`      '  '  .
- **Post-Processing**:  (Bloom, Glitch)    .

 R3F **" React  3D  "**,         .`},{id:"log-004",title:"  : High vs Low ",date:"2025-12-10",tags:["","",""],summary:"  RTX 4090.        .",content:`## The Bottleneck ( )

 (Bloom, Volumetric Light)    .
    (Intel Iris)  15FPS   ''  .

  .
1.     ? ()
2.    ? ()

 **"  (Adaptive Performance)"** 3  .

## Optimization Strategy ( )

### Tier 1: High Quality (Desktop/GPU)
- **Post-Processing ON**: Bloom( ), Vignette( ), Chromatic Aberration( ) .
- **Full Particle System**: 20,000   (Nebula) .
- **High-Res Textures**: 4K   .
- ** **:    "Wow Point".

### Tier 2: Performance Mode (Mobile/Low-Spec)
- **Post-Processing OFF**:      GPU  80% .
- **Lightweight Particles**:   5,000 ,    .
- **Resource Management**:         \`dispose()\`   .
- ** **:   60FPS    .

## Lesson Learned
  ,     ** **.
**"    "**    ,        .`},{id:"log-005",title:" :  ",date:"2025-12-14",tags:["UX","",""],summary:" (Latence) ''  ''  UX .",content:`## User Psychology ( )

  3   40% . 3D      .
 ' (Valley of Death)'    ?

 **" (Loading Bar)  "**  .
 **" (Boot Sequence)"** .

## Narrative Loading ( )

 "Loading... 45%"  ,  <> <>     .

1.  **System Initialization**:     " "  .
2.  **Random Themes**:     (Quantum, Genesis, Neural, Matrix)  .    "  ?"   .
3.  **Seamless Transition**:   ,       . (Fade-out & Zoom-in)

## Result
  '  '  **' '**  .
    UX  .`},{id:"log-007",title:"The Silicon Synapse: AI '(Resonance)'",date:"2025-12-17",tags:["AI","Co-Reasoning",""],summary:"AI  ' '  .   ' '.",content:`## Paradigm Shift in Development

  AI(ChatGPT, Claude)  "  " .
   **" (Senior Engineer)"** **" (Debate Partner)"** .
      **'Co-Reasoning ( )'**  .

## The Workflow: How We Worked

1.  **Director () **: **"(What)"** **"(Why)"** .
    - *"   .   ,       .       ."* (   )

2.  **AI () **: **"(How)"**  .
    - *" Icosahedron Geometry 3 (Clone),    Material(Wireframe, Points) .  \`useFrame\`  \`config.distort\`   \`scale\`  '(Exploded View)'  ."*

3.  **Iteration ()**:
    - Director: *" .    ,        ."*
    - AI: *"Matrix4          ."*

## Insight
AI   **'(Prompting)'**  **'(Communication)'** .
      , AI     .
   **'-AI  '**  .`},{id:"log-010",title:"Lab-02: '' '' (Identity Crisis)",date:"2025-12-20",tags:["","",""],summary:"[PROJECT] The Terrarium   '(Fun)' '(Proof)'  .",content:`## The Dilemma ()

Lab-02 'The Terrarium'     .
 ,    .

**"    ?    ?"**

    ' ',       .
   ''   .

## Resolution: Gamification as a Skill ()

   **'  (Complex State Management) '** .

- **(Surface)**:    .
- **(Under the hood)**: 
    - \`Zustand\`   (Gold/Diamond)  .
    -   (Gacha)  .
    -  (LocalStorage)   (Persistence).

## Conclusion
  ,  **'(Rule)'** **'(Economy)'**     .
 '' (Sugar-coating)  ' '  .
  . **   **.`},{id:"log-008",title:"The Prism Paradox:   ",date:"2025-12-23",tags:["","",""],summary:" 3 ,    . '' .",content:`## The Journey to "Crystalline Echoes"

Lab-01(Prism)    3  () .
    ,       .

### Phase 1: The Literal Beam ( )
- ****:  'Skill'      .
- ****: **[]**.  1 . 2000   . " "  .

### Phase 2: The Quantum Nebula ( )
- ****:      (Nebula)   .
- ****: **[]**.  , **"  ?"**    .         . **(Probabilty) **.

### Phase 3: Crystalline Echoes ()
- ****: **"  ,  ."**
-  (Icosahedron) **   **  3  .
-    (Counter-Rotation)      .
- ****: **[]**.         .

## Review
  ' '   .
**"  ?"**      .
3      .`},{id:"log-011",title:"Lab-04:    (Embracing Glitch)",date:"2025-12-25",tags:["","",""],summary:"[PROJECT] The Glitch:    '' ?",content:`## The Fear of Imperfection (  )

Lab-04  ,  ,   ' (Glitch)' .
     .
**"    ?"**  .

## Concept: Debugging is creating

 (Development) 80% (Debugging).
      .
 **'   '**     .

- **Visual Concept**:     '  ' .
- **Sound Design**:    '  ' .

## The Message
    .
**"  .      ,     ."**
    (Attitude).`},{id:"log-006",title:"Cinematic Multiverse:  ",date:"2025-12-28",tags:["","",""],summary:"   .   '(Beta)' .",content:`## Future Roadmap

   **Phase 36** .    .
         .

### 1. Hyperspace Navigation ( )
-     Fade-in/out.
-    ,       **(Seamless) **  .

### 2. Multi-User Connection ( )
-   , WebSocket       '(Ghost)'  .
- "     " (Presence)  .

### 3. Integrated CMS
- (DevLog)  JSON  , Headless CMS(Strapi )        .

## The Director's Vision
 **' '**   .
       ,      .
**"    ."** 
      .`},{id:"log-009",title:"The Director:  ",date:"2025-12-30",tags:["","",""],summary:"AI  ,  '(Architect)' '(Conductor)'  .",content:`## The Changing Landscape ( )

 AI  " " .
        .
 " " ,   **" "** .

## The New Role: Cinematic Director

   (SB)  ' ',
    **' '**.

1.  **Scenario (User Story)**:       .
2.  **Directing (Prompting)**: AI , AI      .
3.  **Editing (Curating)**:        .

## My Definition
      ' ' 'PM'  .
 **(Space), (Time), (Narrative)**  
**'Cinematic Metaverse Director'**.

    ,    .

**"Reality is just a suggestion. Welcome to my version of it."**`},{id:"log-012",title:"Hyperspace Navigation:    ",date:"2025-12-31",tags:["UX","",""],summary:"     , '  '  .",content:`## The Problem:  

    Fade-in/out.
  , **' '**   .
 SF         .

## The Solution: Hyperspace Warp

    .

### 1. Visual Layer (HyperspaceTunnel)
- 600 \\\`InstancedMesh\\\`     .
-   \\\`stretch\\\`    **(Line)** .
-  \\\`#a5f3fc\\\`()     .

### 2. Camera Layer (WarpController)  
- GSAP      ****.
- \\\`lookAt()\\\`    .

### 3. Timing Control
- 1.2:   (  )
-  :     
- +1:   (  )

## Lesson Learned

**"(Transition)"   ,  .**
       ,
   **  **  .`},{id:"log-013",title:"LOW  :   ",date:"2025-12-31",tags:["","",""],summary:"   ' '    .",content:`## The Feedback

> "  ."

       .
 RTX 4090  , **  **  .

## The Metrics

 LOW  :
- Stars: 5,000
- Sparkles: 300
- StarField: 800 ( )
- TechConstellation:  
- : spotLight x2 + pointLight

## The Optimization

|  |   |   |  |
|------|---------|---------|-------|
| Stars | 5,000 | 1,500 | 70% |
| Sparkles | 300 | 50 | 83% |
| StarField | 800 |  | 100% |
|  | 3 | 2 |  |

 **\\\`speed: 0\\\`**     .

## Philosophical Takeaway

(Accessibility)   .
**        .**
   (Inclusive Design).`}],Be={:"#a855f7",:"#d8b4fe",:"#6366f1",:"#ec4899",:"#db2777",:"#be185d",PM:"#a855f7",:"#9333ea",:"#4f46e5",:"#c026d3",:"#f59e0b",:"#d97706",:"#b45309",:"#ef4444",AI:"#06b6d4","Co-Reasoning":"#22d3ee",:"#67e8f9","R&R":"#0891b2",:"#0eaa9f","Tech Art":"#f472b6",Shader:"#fb7185","Three.js":"#ffffff",:"#94a3b8",UX:"#22c55e",:"#16a34a",:"#15803d",:"#3b82f6",:"#eab308",:"#ca8a04",:"#2563eb",:"#f59e0b",:"#d97706",:"#b45309",:"#f43f5e",:"#fda4af",:"#be123c",:"#881337"},_n=!(typeof navigator>"u")&&navigator.product==="ReactNative",Nn={timeout:_n?6e4:12e4},kl=function(e){const t={...Nn,...typeof e=="string"?{url:e}:e};if(t.timeout=On(t.timeout),t.query){const{url:r,searchParams:n}=(function(s){const i=s.indexOf("?");if(i===-1)return{url:s,searchParams:new URLSearchParams};const a=s.slice(0,i),o=s.slice(i+1);if(!_n)return{url:a,searchParams:new URLSearchParams(o)};if(typeof decodeURIComponent!="function")throw new Error("Broken `URLSearchParams` implementation, and `decodeURIComponent` is not defined");const c=new URLSearchParams;for(const u of o.split("&")){const[d,h]=u.split("=");d&&c.append(_r(d),_r(h||""))}return{url:a,searchParams:c}})(t.url);for(const[s,i]of Object.entries(t.query)){if(i!==void 0)if(Array.isArray(i))for(const o of i)n.append(s,o);else n.append(s,i);const a=n.toString();a&&(t.url=`${r}?${a}`)}}return t.method=t.body&&!t.method?"POST":(t.method||"GET").toUpperCase(),t};function _r(e){return decodeURIComponent(e.replace(/\+/g," "))}function On(e){if(e===!1||e===0)return!1;if(e.connect||e.socket)return e;const t=Number(e);return isNaN(t)?On(Nn.timeout):{connect:t,socket:t}}const Dl=/^https?:\/\//i,Ul=function(e){if(!Dl.test(e.url))throw new Error(`"${e.url}" is not a valid URL`)};function jn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const Bl=["request","response","progress","error","abort"],Nr=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function Pn(e,t){const r=[],n=Nr.reduce((i,a)=>(i[a]=i[a]||[],i),{processOptions:[kl],validateOptions:[Ul]});function s(i){const a=Bl.reduce((p,v)=>(p[v]=(function(){const f=Object.create(null);let b=0;return{publish:function(w){for(const y in f)f[y](w)},subscribe:function(w){const y=b++;return f[y]=w,function(){delete f[y]}}}})(),p),{}),o=(p=>function(v,f,...b){const w=v==="onError";let y=f;for(let x=0;x<p[v].length&&(y=(0,p[v][x])(y,...b),!w||y);x++);return y})(n),c=o("processOptions",i);o("validateOptions",c);const u={options:c,channels:a,applyMiddleware:o};let d;const h=a.request.subscribe(p=>{d=t(p,(v,f)=>((b,w,y)=>{let x=b,A=w;if(!x)try{A=o("onResponse",w,y)}catch(N){A=null,x=N}x=x&&o("onError",x,y),x?a.error.publish(x):A&&a.response.publish(A)})(v,f,p))});a.abort.subscribe(()=>{h(),d&&d.abort()});const m=o("onReturn",a,u);return m===a&&a.request.publish(u),m}return s.use=function(i){if(!i)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof i=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(i.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return Nr.forEach(a=>{i[a]&&n[a].push(i[a])}),r.push(i),s},s.clone=()=>Pn(r,t),e.forEach(s.use),s}var Or,jr,Fl=jn((function(){if(jr)return Or;jr=1;var e=function(r){return r.replace(/^\s+|\s+$/g,"")},t=function(r){return Object.prototype.toString.call(r)==="[object Array]"};return Or=function(r){if(!r)return{};for(var n=Object.create(null),s=e(r).split(`
`),i=0;i<s.length;i++){var a=s[i],o=a.indexOf(":"),c=e(a.slice(0,o)).toLowerCase(),u=e(a.slice(o+1));typeof n[c]>"u"?n[c]=u:t(n[c])?n[c].push(u):n[c]=[n[c],u]}return n}})());let $t=class{onabort;onerror;onreadystatechange;ontimeout;readyState=0;response;responseText="";responseType="";status;statusText;withCredentials;#t;#e;#n;#s={};#r;#i={};#a;open(t,r,n){this.#t=t,this.#e=r,this.#n="",this.readyState=1,this.onreadystatechange?.(),this.#r=void 0}abort(){this.#r&&this.#r.abort()}getAllResponseHeaders(){return this.#n}setRequestHeader(t,r){this.#s[t]=r}setInit(t,r=!0){this.#i=t,this.#a=r}send(t){const r=this.responseType!=="arraybuffer",n={...this.#i,method:this.#t,headers:this.#s,body:t};typeof AbortController=="function"&&this.#a&&(this.#r=new AbortController,typeof EventTarget<"u"&&this.#r.signal instanceof EventTarget&&(n.signal=this.#r.signal)),typeof document<"u"&&(n.credentials=this.withCredentials?"include":"omit"),fetch(this.#e,n).then(s=>(s.headers.forEach((i,a)=>{this.#n+=`${a}: ${i}\r
`}),this.status=s.status,this.statusText=s.statusText,this.readyState=3,this.onreadystatechange?.(),r?s.text():s.arrayBuffer())).then(s=>{typeof s=="string"?this.responseText=s:this.response=s,this.readyState=4,this.onreadystatechange?.()}).catch(s=>{s.name!=="AbortError"?this.onerror?.(s):this.onabort?.()})}};const Gt=typeof XMLHttpRequest=="function"?"xhr":"fetch",zl=Gt==="xhr"?XMLHttpRequest:$t,Hl=(e,t)=>{const r=e.options,n=e.applyMiddleware("finalizeOptions",r),s={},i=e.applyMiddleware("interceptRequest",void 0,{adapter:Gt,context:e});if(i){const f=setTimeout(t,0,null,i);return{abort:()=>clearTimeout(f)}}let a=new zl;a instanceof $t&&typeof n.fetch=="object"&&a.setInit(n.fetch,n.useAbortSignal??!0);const o=n.headers,c=n.timeout;let u=!1,d=!1,h=!1;if(a.onerror=f=>{v(a instanceof $t?f instanceof Error?f:new Error(`Request error while attempting to reach is ${n.url}`,{cause:f}):new Error(`Request error while attempting to reach is ${n.url}${f.lengthComputable?`(${f.loaded} of ${f.total} bytes transferred)`:""}`))},a.ontimeout=f=>{v(new Error(`Request timeout while attempting to reach ${n.url}${f.lengthComputable?`(${f.loaded} of ${f.total} bytes transferred)`:""}`))},a.onabort=()=>{p(!0),u=!0},a.onreadystatechange=function(){c&&(p(),s.socket=setTimeout(()=>m("ESOCKETTIMEDOUT"),c.socket)),!u&&a&&a.readyState===4&&a.status!==0&&(function(){if(!(u||d||h)){if(a.status===0)return void v(new Error("Unknown XHR error"));p(),d=!0,t(null,{body:a.response||(a.responseType===""||a.responseType==="text"?a.responseText:""),url:n.url,method:n.method,headers:Fl(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText})}})()},a.open(n.method,n.url,!0),a.withCredentials=!!n.withCredentials,o&&a.setRequestHeader)for(const f in o)o.hasOwnProperty(f)&&a.setRequestHeader(f,o[f]);return n.rawBody&&(a.responseType="arraybuffer"),e.applyMiddleware("onRequest",{options:n,adapter:Gt,request:a,context:e}),a.send(n.body||null),c&&(s.connect=setTimeout(()=>m("ETIMEDOUT"),c.connect)),{abort:function(){u=!0,a&&a.abort()}};function m(f){h=!0,a.abort();const b=new Error(f==="ESOCKETTIMEDOUT"?`Socket timed out on request to ${n.url}`:`Connection timed out on request to ${n.url}`);b.code=f,e.channels.error.publish(b)}function p(f){(f||u||a&&a.readyState>=2&&s.connect)&&clearTimeout(s.connect),s.socket&&clearTimeout(s.socket)}function v(f){if(d)return;p(!0),d=!0,a=null;const b=f||new Error(`Network error while attempting to reach ${n.url}`);b.isNetworkError=!0,b.request=n,t(b)}},$l=(e=[],t=Hl)=>Pn(e,t);var Gl={},Pr,Lr,kr,Dr,Ur,_t={exports:{}};Ur||(Ur=1,(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,a=0;n[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(i++,o==="%c"&&(a=i))}),n.splice(a,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=Gl.DEBUG),n},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let n;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(n=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(n[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=(Dr?kr:(Dr=1,kr=function(n){function s(o){let c,u,d,h=null;function m(...p){if(!m.enabled)return;const v=m,f=Number(new Date),b=f-(c||f);v.diff=b,v.prev=c,v.curr=f,c=f,p[0]=s.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let w=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(y,x)=>{if(y==="%%")return"%";w++;const A=s.formatters[x];if(typeof A=="function"){const N=p[w];y=A.call(v,N),p.splice(w,1),w--}return y}),s.formatArgs.call(v,p),(v.log||s.log).apply(v,p)}return m.namespace=o,m.useColors=s.useColors(),m.color=s.selectColor(o),m.extend=i,m.destroy=s.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(u!==s.namespaces&&(u=s.namespaces,d=s.enabled(o)),d),set:p=>{h=p}}),typeof s.init=="function"&&s.init(m),m}function i(o,c){const u=s(this.namespace+(typeof c>"u"?":":c)+o);return u.log=this.log,u}function a(o,c){let u=0,d=0,h=-1,m=0;for(;u<o.length;)if(d<c.length&&(c[d]===o[u]||c[d]==="*"))c[d]==="*"?(h=d,m=u,d++):(u++,d++);else{if(h===-1)return!1;d=h+1,m++,u=m}for(;d<c.length&&c[d]==="*";)d++;return d===c.length}return s.debug=s,s.default=s,s.coerce=function(o){return o instanceof Error?o.stack||o.message:o},s.disable=function(){const o=[...s.names,...s.skips.map(c=>"-"+c)].join(",");return s.enable(""),o},s.enable=function(o){s.save(o),s.namespaces=o,s.names=[],s.skips=[];const c=(typeof o=="string"?o:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const u of c)u[0]==="-"?s.skips.push(u.slice(1)):s.names.push(u)},s.enabled=function(o){for(const c of s.skips)if(a(o,c))return!1;for(const c of s.names)if(a(o,c))return!0;return!1},s.humanize=(function(){if(Lr)return Pr;Lr=1;var o=1e3,c=60*o,u=60*c,d=24*u,h=7*d;function m(p,v,f,b){var w=v>=1.5*f;return Math.round(p/f)+" "+b+(w?"s":"")}return Pr=function(p,v){v=v||{};var f,b,w=typeof p;if(w==="string"&&p.length>0)return(function(y){if(!((y=String(y)).length>100)){var x=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(x){var A=parseFloat(x[1]);switch((x[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*A;case"weeks":case"week":case"w":return A*h;case"days":case"day":case"d":return A*d;case"hours":case"hour":case"hrs":case"hr":case"h":return A*u;case"minutes":case"minute":case"mins":case"min":case"m":return A*c;case"seconds":case"second":case"secs":case"sec":case"s":return A*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return A;default:return}}}})(p);if(w==="number"&&isFinite(p))return v.long?(f=p,(b=Math.abs(f))>=d?m(f,b,d,"day"):b>=u?m(f,b,u,"hour"):b>=c?m(f,b,c,"minute"):b>=o?m(f,b,o,"second"):f+" ms"):(function(y){var x=Math.abs(y);return x>=d?Math.round(y/d)+"d":x>=u?Math.round(y/u)+"h":x>=c?Math.round(y/c)+"m":x>=o?Math.round(y/o)+"s":y+"ms"})(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))}})(),s.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach(o=>{s[o]=n[o]}),s.names=[],s.skips=[],s.formatters={},s.selectColor=function(o){let c=0;for(let u=0;u<o.length;u++)c=(c<<5)-c+o.charCodeAt(u),c|=0;return s.colors[Math.abs(c)%s.colors.length]},s.enable(s.load()),s}))(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(_t,_t.exports)),_t.exports;const Vl=typeof Buffer>"u"?()=>!1:e=>Buffer.isBuffer(e);function Br(e){return Object.prototype.toString.call(e)==="[object Object]"}function Wl(e){if(Br(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Br(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)}const ql=["boolean","string","number"];function Xl(){return{processOptions:e=>{const t=e.body;return!t||typeof t.pipe=="function"||Vl(t)||ql.indexOf(typeof t)===-1&&!Array.isArray(t)&&!Wl(t)?e:Object.assign({},e,{body:JSON.stringify(e.body),headers:Object.assign({},e.headers,{"Content-Type":"application/json"})})}}}function Yl(e){return{onResponse:r=>{const n=r.headers["content-type"]||"",s=e&&e.force||n.indexOf("application/json")!==-1;return r.body&&n&&s?Object.assign({},r,{body:t(r.body)}):r},processOptions:r=>Object.assign({},r,{headers:Object.assign({Accept:"application/json"},r.headers)})};function t(r){try{return JSON.parse(r)}catch(n){throw n.message=`Failed to parsed response body as JSON: ${n.message}`,n}}}let Fe={};typeof globalThis<"u"?Fe=globalThis:typeof window<"u"?Fe=window:typeof global<"u"?Fe=global:typeof self<"u"&&(Fe=self);var Kl=Fe;function Ql(e={}){const t=e.implementation||Kl.Observable;if(!t)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(r,n)=>new t(s=>(r.error.subscribe(i=>s.error(i)),r.progress.subscribe(i=>s.next(Object.assign({type:"progress"},i))),r.response.subscribe(i=>{s.next(Object.assign({type:"response"},i)),s.complete()}),r.request.publish(n),()=>r.abort.publish()))}}function Zl(){return{onRequest:e=>{if(e.adapter!=="xhr")return;const t=e.request,r=e.context;function n(s){return i=>{const a=i.lengthComputable?i.loaded/i.total*100:-1;r.channels.progress.publish({stage:s,percent:a,total:i.total,loaded:i.loaded,lengthComputable:i.lengthComputable})}}"upload"in t&&"onprogress"in t.upload&&(t.upload.onprogress=n("upload")),"onprogress"in t&&(t.onprogress=n("download"))}}}var Ln=(e,t,r)=>(r.method==="GET"||r.method==="HEAD")&&(e.isNetworkError||!1);function Jl(e){return 100*Math.pow(2,e)+100*Math.random()}const er=(e={})=>(t=>{const r=t.maxRetries||5,n=t.retryDelay||Jl,s=t.shouldRetry;return{onError:(i,a)=>{const o=a.options,c=o.maxRetries||r,u=o.retryDelay||n,d=o.shouldRetry||s,h=o.attemptNumber||0;if((m=o.body)!==null&&typeof m=="object"&&typeof m.pipe=="function"||!d(i,h,o)||h>=c)return i;var m;const p=Object.assign({},a,{options:Object.assign({},o,{attemptNumber:h+1})});return setTimeout(()=>a.channels.request.publish(p),u(h)),null}}})({shouldRetry:Ln,...e});er.shouldRetry=Ln;var Vt=function(e,t){return Vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Vt(e,t)};function se(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Vt(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function ec(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}function kn(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ie(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],a;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function re(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Ee(e){return this instanceof Ee?(this.v=e,this):new Ee(e)}function tc(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(p){return function(v){return Promise.resolve(v).then(p,h)}}function o(p,v){n[p]&&(s[p]=function(f){return new Promise(function(b,w){i.push([p,f,b,w])>1||c(p,f)})},v&&(s[p]=v(s[p])))}function c(p,v){try{u(n[p](v))}catch(f){m(i[0][3],f)}}function u(p){p.value instanceof Ee?Promise.resolve(p.value.v).then(d,h):m(i[0][2],p)}function d(p){c("next",p)}function h(p){c("throw",p)}function m(p,v){p(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function rc(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Ie=="function"?Ie(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(o,c){a=e[i](a),s(o,c,a.done,a.value)})}}function s(i,a,o,c){Promise.resolve(c).then(function(u){i({value:u,done:o})},a)}}function R(e){return typeof e=="function"}function tr(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Nt=tr(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,s){return s+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function rt(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var $e=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,s,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=Ie(a),c=o.next();!c.done;c=o.next()){var u=c.value;u.remove(this)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}else a.remove(this);var d=this.initialTeardown;if(R(d))try{d()}catch(f){i=f instanceof Nt?f.errors:[f]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var m=Ie(h),p=m.next();!p.done;p=m.next()){var v=p.value;try{Fr(v)}catch(f){i=i??[],f instanceof Nt?i=re(re([],te(i)),te(f.errors)):i.push(f)}}}catch(f){n={error:f}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}}if(i)throw new Nt(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Fr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&rt(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&rt(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})(),Dn=$e.EMPTY;function Un(e){return e instanceof $e||e&&"closed"in e&&R(e.remove)&&R(e.add)&&R(e.unsubscribe)}function Fr(e){R(e)?e():e.unsubscribe()}var nc={Promise:void 0},sc={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,re([e,t],te(r)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Bn(e){sc.setTimeout(function(){throw e})}function zr(){}function et(e){e()}var rr=(function(e){se(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Un(r)&&r.add(n)):n.destination=oc,n}return t.create=function(r,n,s){return new Re(r,n,s)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})($e),ic=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){Qe(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){Qe(n)}else Qe(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){Qe(r)}},e})(),Re=(function(e){se(t,e);function t(r,n,s){var i=e.call(this)||this,a;return R(r)||!r?a={next:r??void 0,error:n??void 0,complete:s??void 0}:a=r,i.destination=new ic(a),i}return t})(rr);function Qe(e){Bn(e)}function ac(e){throw e}var oc={closed:!0,next:zr,error:ac,complete:zr},nr=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function ft(e){return e}function lc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fn(e)}function Fn(e){return e.length===0?ft:e.length===1?e[0]:function(r){return e.reduce(function(n,s){return s(n)},r)}}var O=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var s=this,i=uc(t)?t:new Re(t,r,n);return et(function(){var a=s,o=a.operator,c=a.source;i.add(o?o.call(i,c):c?s._subscribe(i):s._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=Hr(r),new r(function(s,i){var a=new Re({next:function(o){try{t(o)}catch(c){i(c),a.unsubscribe()}},error:i,complete:s});n.subscribe(a)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[nr]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Fn(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=Hr(t),new t(function(n,s){var i;r.subscribe(function(a){return i=a},function(a){return s(a)},function(){return n(i)})})},e.create=function(t){return new e(t)},e})();function Hr(e){var t;return(t=e??nc.Promise)!==null&&t!==void 0?t:Promise}function cc(e){return e&&R(e.next)&&R(e.error)&&R(e.complete)}function uc(e){return e&&e instanceof rr||cc(e)&&Un(e)}function dc(e){return R(e?.lift)}function J(e){return function(t){if(dc(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(e,t,r,n,s){return new hc(e,t,r,n,s)}var hc=(function(e){se(t,e);function t(r,n,s,i,a,o){var c=e.call(this,r)||this;return c.onFinalize=a,c.shouldUnsubscribe=o,c._next=n?function(u){try{n(u)}catch(d){r.error(d)}}:e.prototype._next,c._error=i?function(u){try{i(u)}catch(d){r.error(d)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=s?function(){try{s()}catch(u){r.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t})(rr),fc=tr(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),sr=(function(e){se(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new $r(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new fc},t.prototype.next=function(r){var n=this;et(function(){var s,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=Ie(n.currentObservers),o=a.next();!o.done;o=a.next()){var c=o.value;c.next(r)}}catch(u){s={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}}})},t.prototype.error=function(r){var n=this;et(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var s=n.observers;s.length;)s.shift().error(r)}})},t.prototype.complete=function(){var r=this;et(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,s=this,i=s.hasError,a=s.isStopped,o=s.observers;return i||a?Dn:(this.currentObservers=null,o.push(r),new $e(function(){n.currentObservers=null,rt(o,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,s=n.hasError,i=n.thrownError,a=n.isStopped;s?r.error(i):a&&r.complete()},t.prototype.asObservable=function(){var r=new O;return r.source=this,r},t.create=function(r,n){return new $r(r,n)},t})(O),$r=(function(e){se(t,e);function t(r,n){var s=e.call(this)||this;return s.destination=r,s.source=n,s}return t.prototype.next=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.next)===null||s===void 0||s.call(n,r)},t.prototype.error=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.error)===null||s===void 0||s.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,s;return(s=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&s!==void 0?s:Dn},t})(sr),ir={now:function(){return(ir.delegate||Date).now()},delegate:void 0},pc=(function(e){se(t,e);function t(r,n,s){r===void 0&&(r=1/0),n===void 0&&(n=1/0),s===void 0&&(s=ir);var i=e.call(this)||this;return i._bufferSize=r,i._windowTime=n,i._timestampProvider=s,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,r),i._windowTime=Math.max(1,n),i}return t.prototype.next=function(r){var n=this,s=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,o=n._timestampProvider,c=n._windowTime;s||(i.push(r),!a&&i.push(o.now()+c)),this._trimBuffer(),e.prototype.next.call(this,r)},t.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),s=this,i=s._infiniteTimeWindow,a=s._buffer,o=a.slice(),c=0;c<o.length&&!r.closed;c+=i?1:2)r.next(o[c]);return this._checkFinalizedStatuses(r),n},t.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,s=r._timestampProvider,i=r._buffer,a=r._infiniteTimeWindow,o=(a?1:2)*n;if(n<1/0&&o<i.length&&i.splice(0,i.length-o),!a){for(var c=s.now(),u=0,d=1;d<i.length&&i[d]<=c;d+=2)u=d;u&&i.splice(0,u+1)}},t})(sr),mc=(function(e){se(t,e);function t(r,n){return e.call(this)||this}return t.prototype.schedule=function(r,n){return this},t})($e),Gr={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setInterval.apply(void 0,re([e,t],te(r)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},vc=(function(e){se(t,e);function t(r,n){var s=e.call(this,r,n)||this;return s.scheduler=r,s.work=n,s.pending=!1,s}return t.prototype.schedule=function(r,n){var s;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,n)),this.pending=!0,this.delay=n,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(a,this.id,n),this},t.prototype.requestAsyncId=function(r,n,s){return s===void 0&&(s=0),Gr.setInterval(r.flush.bind(r,this),s)},t.prototype.recycleAsyncId=function(r,n,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return n;n!=null&&Gr.clearInterval(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(r,n);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var s=!1,i;try{this.work(r)}catch(a){s=!0,i=a||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,s=r.scheduler,i=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,rt(i,this),n!=null&&(this.id=this.recycleAsyncId(s,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t})(mc),Vr=(function(){function e(t,r){r===void 0&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(n,r)},e.now=ir.now,e})(),gc=(function(e){se(t,e);function t(r,n){n===void 0&&(n=Vr.now);var s=e.call(this,r,n)||this;return s.actions=[],s._active=!1,s}return t.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var s;this._active=!0;do if(s=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,s){for(;r=n.shift();)r.unsubscribe();throw s}},t})(Vr),xc=new gc(vc),bc=xc,yc=new O(function(e){return e.complete()});function wc(e){return e&&R(e.schedule)}function ar(e){return e[e.length-1]}function Tc(e){return R(ar(e))?e.pop():void 0}function or(e){return wc(ar(e))?e.pop():void 0}function Ec(e,t){return typeof ar(e)=="number"?e.pop():t}var zn=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function Hn(e){return R(e?.then)}function $n(e){return R(e[nr])}function Gn(e){return Symbol.asyncIterator&&R(e?.[Symbol.asyncIterator])}function Vn(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Sc(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wn=Sc();function qn(e){return R(e?.[Wn])}function Xn(e){return tc(this,arguments,function(){var r,n,s,i;return kn(this,function(a){switch(a.label){case 0:r=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Ee(r.read())];case 3:return n=a.sent(),s=n.value,i=n.done,i?[4,Ee(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Ee(s)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Yn(e){return R(e?.getReader)}function ee(e){if(e instanceof O)return e;if(e!=null){if($n(e))return Cc(e);if(zn(e))return Ac(e);if(Hn(e))return Mc(e);if(Gn(e))return Kn(e);if(qn(e))return Ic(e);if(Yn(e))return Rc(e)}throw Vn(e)}function Cc(e){return new O(function(t){var r=e[nr]();if(R(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ac(e){return new O(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function Mc(e){return new O(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,Bn)})}function Ic(e){return new O(function(t){var r,n;try{for(var s=Ie(e),i=s.next();!i.done;i=s.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}t.complete()})}function Kn(e){return new O(function(t){_c(e,t).catch(function(r){return t.error(r)})})}function Rc(e){return Kn(Xn(e))}function _c(e,t){var r,n,s,i;return ec(this,void 0,void 0,function(){var a,o;return kn(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),r=rc(e),c.label=1;case 1:return[4,r.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=c.sent(),s={error:o},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function fe(e,t,r,n,s){n===void 0&&(n=0),s===void 0&&(s=!1);var i=t.schedule(function(){r(),s?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!s)return i}function Qn(e,t){return t===void 0&&(t=0),J(function(r,n){r.subscribe(le(n,function(s){return fe(n,e,function(){return n.next(s)},t)},function(){return fe(n,e,function(){return n.complete()},t)},function(s){return fe(n,e,function(){return n.error(s)},t)}))})}function Zn(e,t){return t===void 0&&(t=0),J(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function Nc(e,t){return ee(e).pipe(Zn(t),Qn(t))}function Oc(e,t){return ee(e).pipe(Zn(t),Qn(t))}function jc(e,t){return new O(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}function Pc(e,t){return new O(function(r){var n;return fe(r,t,function(){n=e[Wn](),fe(r,t,function(){var s,i,a;try{s=n.next(),i=s.value,a=s.done}catch(o){r.error(o);return}a?r.complete():r.next(i)},0,!0)}),function(){return R(n?.return)&&n.return()}})}function Jn(e,t){if(!e)throw new Error("Iterable cannot be null");return new O(function(r){fe(r,t,function(){var n=e[Symbol.asyncIterator]();fe(r,t,function(){n.next().then(function(s){s.done?r.complete():r.next(s.value)})},0,!0)})})}function Lc(e,t){return Jn(Xn(e),t)}function kc(e,t){if(e!=null){if($n(e))return Nc(e,t);if(zn(e))return jc(e,t);if(Hn(e))return Oc(e,t);if(Gn(e))return Jn(e,t);if(qn(e))return Pc(e,t);if(Yn(e))return Lc(e,t)}throw Vn(e)}function Ge(e,t){return t?kc(e,t):ee(e)}function Se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=or(e);return Ge(e,r)}function es(e,t){var r=R(e)?e:function(){return e},n=function(s){return s.error(r())};return new O(n)}function Dc(e){return!!e&&(e instanceof O||R(e.lift)&&R(e.subscribe))}var ts=tr(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function S(e,t){return new Promise(function(r,n){var s=!1,i;e.subscribe({next:function(a){i=a,s=!0},error:n,complete:function(){s?r(i):n(new ts)}})})}function Ot(e,t){return new Promise(function(r,n){var s=new Re({next:function(i){r(i),s.unsubscribe()},error:n,complete:function(){n(new ts)}});e.subscribe(s)})}function Uc(e){return e instanceof Date&&!isNaN(e)}function U(e,t){return J(function(r,n){var s=0;r.subscribe(le(n,function(i){n.next(e.call(t,i,s++))}))})}var Bc=Array.isArray;function Fc(e,t){return Bc(t)?e.apply(void 0,re([],te(t))):e(t)}function zc(e){return U(function(t){return Fc(e,t)})}function Hc(e,t,r){return r===void 0&&(r=ft),function(n){Wr(t,function(){for(var s=e.length,i=new Array(s),a=s,o=s,c=function(d){Wr(t,function(){var h=Ge(e[d],t),m=!1;h.subscribe(le(n,function(p){i[d]=p,m||(m=!0,o--),o||n.next(r(i.slice()))},function(){--a||n.complete()}))},n)},u=0;u<s;u++)c(u)})}}function Wr(e,t,r){t()}function $c(e,t,r,n,s,i,a,o){var c=[],u=0,d=0,h=!1,m=function(){h&&!c.length&&!u&&t.complete()},p=function(f){return u<n?v(f):c.push(f)},v=function(f){u++;var b=!1;ee(r(f,d++)).subscribe(le(t,function(w){t.next(w)},function(){b=!0},void 0,function(){if(b)try{u--;for(var w=function(){var y=c.shift();a||v(y)};c.length&&u<n;)w();m()}catch(y){t.error(y)}}))};return e.subscribe(le(t,p,function(){h=!0,m()})),function(){}}function pe(e,t,r){return r===void 0&&(r=1/0),R(t)?pe(function(n,s){return U(function(i,a){return t(n,i,s,a)})(ee(e(n,s)))},r):(typeof t=="number"&&(r=t),J(function(n,s){return $c(n,s,e,r)}))}function rs(e){return e===void 0&&(e=1/0),pe(ft,e)}function Gc(){return rs(1)}function Vc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Gc()(Ge(e,or(e)))}function ns(e){return new O(function(t){ee(e()).subscribe(t)})}function Wc(e,t,r){return r===void 0&&(r=bc),new O(function(n){var s=Uc(e)?+e-r.now():e;s<0&&(s=0);var i=0;return r.schedule(function(){n.closed||(n.next(i++),n.complete())},s)})}function qc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=or(e),n=Ec(e,1/0),s=e;return s.length?s.length===1?ee(s[0]):rs(n)(Ge(s,r)):yc}var Xc=Array.isArray;function Yc(e){return e.length===1&&Xc(e[0])?e[0]:e}function Pe(e,t){return J(function(r,n){var s=0;r.subscribe(le(n,function(i){return e.call(t,i,s++)&&n.next(i)}))})}function nt(e){return J(function(t,r){var n=null,s=!1,i;n=t.subscribe(le(r,void 0,void 0,function(a){i=ee(e(a,nt(e)(t))),n?(n.unsubscribe(),n=null,i.subscribe(r)):s=!0})),s&&(n.unsubscribe(),n=null,i.subscribe(r))})}function ss(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Tc(e);return r?lc(ss.apply(void 0,re([],te(e))),zc(r)):J(function(n,s){Hc(re([n],te(Yc(e))))(s)})}function Kc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ss.apply(void 0,re([],te(e)))}function is(e){return J(function(t,r){try{t.subscribe(r)}finally{r.add(e)}})}function as(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new sr}:t,n=e.resetOnError,s=n===void 0?!0:n,i=e.resetOnComplete,a=i===void 0?!0:i,o=e.resetOnRefCountZero,c=o===void 0?!0:o;return function(u){var d,h,m,p=0,v=!1,f=!1,b=function(){h?.unsubscribe(),h=void 0},w=function(){b(),d=m=void 0,v=f=!1},y=function(){var x=d;w(),x?.unsubscribe()};return J(function(x,A){p++,!f&&!v&&b();var N=m=m??r();A.add(function(){p--,p===0&&!f&&!v&&(h=jt(y,c))}),N.subscribe(A),!d&&p>0&&(d=new Re({next:function(P){return N.next(P)},error:function(P){f=!0,b(),h=jt(w,s,P),N.error(P)},complete:function(){v=!0,b(),h=jt(w,a),N.complete()}}),ee(x).subscribe(d))})(u)}}function jt(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var s=new Re({next:function(){s.unsubscribe(),e()}});return ee(t.apply(void 0,re([],te(r)))).subscribe(s)}}function Qc(e,t,r){var n,s=!1;return n=e,as({connector:function(){return new pc(n,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Zc(e,t,r){var n=R(e)||t||r?{next:e,error:t,complete:r}:e;return n?J(function(s,i){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var o=!0;s.subscribe(le(i,function(c){var u;(u=n.next)===null||u===void 0||u.call(n,c),i.next(c)},function(){var c;o=!1,(c=n.complete)===null||c===void 0||c.call(n),i.complete()},function(c){var u;o=!1,(u=n.error)===null||u===void 0||u.call(n,c),i.error(c)},function(){var c,u;o&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):ft}function os(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}var ls={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},cs={0:8203,1:8204,2:8205,3:65279};new Array(4).fill(String.fromCodePoint(cs[0])).join("");Object.fromEntries(Object.entries(cs).map(e=>e.reverse()));Object.fromEntries(Object.entries(ls).map(e=>e.reverse()));var Jc=`${Object.values(ls).map(e=>`\\u{${e.toString(16)}}`).join("")}`,qr=new RegExp(`[${Jc}]{4,}`,"gu");function eu(e){var t;return{cleaned:e.replace(qr,""),encoded:((t=e.match(qr))==null?void 0:t[0])||""}}function tu(e){return e&&JSON.parse(eu(JSON.stringify(e)).cleaned)}function ru(e){return tu(e)}const nu="drafts",su="versions",_e=".",st=`${nu}${_e}`,us=`${su}${_e}`;function pt(e){return e.startsWith(st)}function mt(e){return e.startsWith(us)}function ds(e){if(mt(e)){const t=vt(e);return st+t}return pt(e)?e:st+e}function Ve(e,t){if(t==="drafts"||t==="published")throw new Error('Version can not be "published" or "drafts"');return`${us}${t}${_e}${vt(e)}`}function hs(e){if(!mt(e))return;const[t,r,...n]=e.split(_e);return r}function vt(e){return mt(e)?e.split(_e).slice(2).join(_e):pt(e)?e.slice(st.length):e}let iu=e=>crypto.getRandomValues(new Uint8Array(e)),au=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*n*t/e.length);return(i=t)=>{let a="";for(;;){let o=r(s),c=s|0;for(;c--;)if(a+=e[o[c]&n]||"",a.length===i)return a}}},ou=(e,t=21)=>au(e,t,iu);const Xr=/\r\n|[\n\r\u2028\u2029]/;function lu(e,t,r){const n=e.split(Xr),s={start:Yr(t.start,n),end:t.end?Yr(t.end,n):void 0},{start:i,end:a,markerLines:o}=cu(s,n),c=`${a}`.length;return e.split(Xr,a).slice(i,a).map((u,d)=>{const h=i+1+d,m=` ${` ${h}`.slice(-c)} |`,p=o[h],v=!o[h+1];if(!p)return` ${m}${u.length>0?` ${u}`:""}`;let f="";if(Array.isArray(p)){const b=u.slice(0,Math.max(p[0]-1,0)).replace(/[^\t]/g," "),w=p[1]||1;f=[`
 `,m.replace(/\d/g," ")," ",b,"^".repeat(w)].join(""),v&&r&&(f+=" "+r)}return[">",m,u.length>0?` ${u}`:"",f].join("")}).join(`
`)}function cu(e,t){const r={...e.start},n={...r,...e.end},s=2,i=3,a=r.line??-1,o=r.column??0,c=n.line,u=n.column;let d=Math.max(a-(s+1),0),h=Math.min(t.length,c+i);a===-1&&(d=0),c===-1&&(h=t.length);const m=c-a,p={};if(m)for(let v=0;v<=m;v++){const f=v+a;if(!o)p[f]=!0;else if(v===0){const b=t[f-1].length;p[f]=[o,b-o+1]}else if(v===m)p[f]=[0,u];else{const b=t[f-v].length;p[f]=[0,b]}}else o===u?o?p[a]=[o,0]:p[a]=!0:p[a]=[o,u-o];return{start:d,end:h,markerLines:p}}function Yr(e,t){let r=0;for(let n=0;n<t.length;n++){const s=t[n].length+1;if(r+s>e)return{line:n+1,column:e-r};r+=s}return{line:t.length,column:t[t.length-1]?.length??0}}const Pt=5;class uu extends Error{response;statusCode=400;responseBody;details;constructor(t,r){const n=fs(t,r);super(n.message),Object.assign(this,n)}}class du extends Error{response;statusCode=500;responseBody;details;constructor(t){const r=fs(t);super(r.message),Object.assign(this,r)}}function fs(e,t){const r=e.body,n={response:e,statusCode:e.statusCode,responseBody:pu(r,e),message:"",details:void 0};if(!os(r))return n.message=Lt(e,r),n;const s=r.error;if(typeof s=="string"&&typeof r.message=="string")return n.message=`${s} - ${r.message}`,n;if(typeof s!="object"||s===null)return typeof s=="string"?n.message=s:typeof r.message=="string"?n.message=r.message:n.message=Lt(e,r),n;if(hu(s)||fu(s)){const i=s.items||[],a=i.slice(0,Pt).map(c=>c.error?.description).filter(Boolean);let o=a.length?`:
- ${a.join(`
- `)}`:"";return i.length>Pt&&(o+=`
...and ${i.length-Pt} more`),n.message=`${s.description}${o}`,n.details=r.error,n}if(ps(s)){const i=t?.options?.query?.tag;return n.message=ms(s,i),n.details=r.error,n}return"description"in s&&typeof s.description=="string"?(n.message=s.description,n.details=s,n):(n.message=Lt(e,r),n)}function hu(e){return"type"in e&&e.type==="mutationError"&&"description"in e&&typeof e.description=="string"}function fu(e){return"type"in e&&e.type==="actionError"&&"description"in e&&typeof e.description=="string"}function ps(e){return os(e)&&e.type==="queryParseError"&&typeof e.query=="string"&&typeof e.start=="number"&&typeof e.end=="number"}function ms(e,t){const{query:r,start:n,end:s,description:i}=e;if(!r||typeof n>"u")return`GROQ query parse error: ${i}`;const a=t?`

Tag: ${t}`:"";return`GROQ query parse error:
${lu(r,{start:n,end:s},i)}${a}`}function Lt(e,t){const r=typeof t=="string"?` (${mu(t,100)})`:"",n=e.statusMessage?` ${e.statusMessage}`:"";return`${e.method}-request to ${e.url} resulted in HTTP ${e.statusCode}${n}${r}`}function pu(e,t){return(t.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(e,null,2):e}function mu(e,t){return e.length>t?`${e.slice(0,t)}`:e}class vu extends Error{projectId;addOriginUrl;constructor({projectId:t}){super("CorsOriginError"),this.name="CorsOriginError",this.projectId=t;const r=new URL(`https://sanity.io/manage/project/${t}/api`);if(typeof location<"u"){const{origin:n}=location;r.searchParams.set("cors","add"),r.searchParams.set("origin",n),this.addOriginUrl=r,this.message=`The current origin is not allowed to connect to the Live Content API. Add it here: ${r}`}else this.message=`The current origin is not allowed to connect to the Live Content API. Change your configuration here: ${r}`}}const gu={onResponse:(e,t)=>{if(e.statusCode>=500)throw new du(e);if(e.statusCode>=400)throw new uu(e,t);return e}};function xu(e={}){const t={},r=n=>e.ignoreWarnings===void 0?!1:(Array.isArray(e.ignoreWarnings)?e.ignoreWarnings:[e.ignoreWarnings]).some(s=>typeof s=="string"?n.includes(s):s instanceof RegExp?s.test(n):!1);return{onResponse:n=>{const s=n.headers["x-sanity-warning"],i=Array.isArray(s)?s:[s];for(const a of i)!a||t[a]||r(a)||(t[a]=!0,console.warn(a));return n}}}function Kr(e,t={}){return $l([er({shouldRetry:bu}),...e,xu(t),Xl(),Yl(),Zl(),gu,Ql({implementation:O})])}function bu(e,t,r){if(r.maxRetries===0)return!1;const n=r.method==="GET"||r.method==="HEAD",s=(r.uri||r.url).startsWith("/data/query"),i=e.response&&(e.response.statusCode===429||e.response.statusCode===502||e.response.statusCode===503);return(n||s)&&i?!0:er.shouldRetry(e,t,r)}const yu="https://www.sanity.io/help/";function lr(e){return yu+e}const Qr=["image","file"],Zr=["before","after","replace"],vs=e=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(e))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},wu=e=>{if(!/^[-a-z0-9]+$/i.test(e))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},Tu=e=>{if(Qr.indexOf(e)===-1)throw new Error(`Invalid asset type: ${e}. Must be one of ${Qr.join(", ")}`)},ze=(e,t)=>{if(t===null||typeof t!="object"||Array.isArray(t))throw new Error(`${e}() takes an object of properties`)},it=(e,t)=>{if(typeof t!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(t)||t.includes(".."))throw new Error(`${e}(): "${t}" is not a valid document ID`)},Ne=(e,t)=>{if(!t._id)throw new Error(`${e}() requires that the document contains an ID ("_id" property)`);it(e,t._id)},Eu=(e,t)=>{if(typeof t!="string")throw new Error(`\`${e}()\`: \`${t}\` is not a valid document type`)},gs=(e,t)=>{if(!t._type)throw new Error(`\`${e}()\` requires that the document contains a type (\`_type\` property)`);Eu(e,t._type)},Su=(e,t)=>{if(t._id&&t._id!==e)throw new Error(`The provided document ID (\`${t._id}\`) does not match the generated version ID (\`${e}\`)`)},Cu=(e,t,r)=>{const n="insert(at, selector, items)";if(Zr.indexOf(e)===-1){const s=Zr.map(i=>`"${i}"`).join(", ");throw new Error(`${n} takes an "at"-argument which is one of: ${s}`)}if(typeof t!="string")throw new Error(`${n} takes a "selector"-argument which must be a string`);if(!Array.isArray(r))throw new Error(`${n} takes an "items"-argument which must be an array`)},ge=e=>{if(!e.dataset)throw new Error("`dataset` must be provided to perform queries");return e.dataset||""},xs=e=>{if(typeof e!="string"||!/^[a-z0-9._-]{1,75}$/i.test(e))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return e},bs=e=>{if(!e["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");const{type:t,id:r}=e["~experimental_resource"];switch(t){case"dataset":{if(r.split(".").length!==2)throw new Error('Dataset resource ID must be in the format "project.dataset"');return}case"dashboard":case"media-library":case"canvas":return;default:throw new Error(`Unsupported resource type: ${t.toString()}`)}},he=(e,t)=>{if(t["~experimental_resource"])throw new Error(`\`${e}\` does not support resource-based operations`)};function Au(e){let t=!1,r;return(...n)=>(t||(r=e(...n),t=!0),r)}const ue=e=>Au((...t)=>console.warn(e.join(" "),...t)),Mu=ue(["Because you set `withCredentials` to true, we will override your `useCdn`","setting to be false since (cookie-based) credentials are never set on the CDN"]),Iu=ue(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),Ru=ue(["The Sanity client is configured with the `perspective` set to `drafts` or `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),_u=ue(["The `previewDrafts` perspective has been renamed to  `drafts` and will be removed in a future API version"]),Nu=ue(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.",`See ${lr("js-client-browser-token")} for more information and how to hide this warning.`]),Ou=ue(["You have configured Sanity client to use a token, but also provided `withCredentials: true`.","This is no longer supported - only token will be used - remove `withCredentials: true`."]),ju=ue(["Using the Sanity client without specifying an API version is deprecated.",`See ${lr("js-client-api-version")}`]),Pu=ue(["You have called `createVersion()` with a defined `document`. The recommended approach is to provide a `baseId` and `releaseId` instead."]),Lu="apicdn.sanity.io",He={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,stega:{enabled:!1}},ku=["localhost","127.0.0.1","0.0.0.0"],Du=e=>ku.indexOf(e)!==-1;function Uu(e){if(e==="1"||e==="X")return;const t=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&t instanceof Date&&t.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}function ys(e){if(Array.isArray(e)&&e.length>1&&e.includes("raw"))throw new TypeError('Invalid API perspective value: "raw". The raw-perspective can not be combined with other perspectives')}const ws=(e,t)=>{const r={...t,...e,stega:{...typeof t.stega=="boolean"?{enabled:t.stega}:t.stega||He.stega,...typeof e.stega=="boolean"?{enabled:e.stega}:e.stega||{}}};r.apiVersion||ju();const n={...He,...r},s=n.useProjectHostname&&!n["~experimental_resource"];if(typeof Promise>"u"){const m=lr("js-client-promise-polyfill");throw new Error(`No native Promise-implementation found, polyfill needed - see ${m}`)}if(s&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(n["~experimental_resource"]&&bs(n),typeof n.perspective<"u"&&ys(n.perspective),"encodeSourceMap"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMap' is not supported in '@sanity/client'. Did you mean 'stega.enabled'?");if("encodeSourceMapAtPath"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMapAtPath' is not supported in '@sanity/client'. Did you mean 'stega.filter'?");if(typeof n.stega.enabled!="boolean")throw new Error(`stega.enabled must be a boolean, received ${n.stega.enabled}`);if(n.stega.enabled&&n.stega.studioUrl===void 0)throw new Error("stega.studioUrl must be defined when stega.enabled is true");if(n.stega.enabled&&typeof n.stega.studioUrl!="string"&&typeof n.stega.studioUrl!="function")throw new Error(`stega.studioUrl must be a string or a function, received ${n.stega.studioUrl}`);const i=typeof window<"u"&&window.location&&window.location.hostname,a=i&&Du(window.location.hostname),o=!!n.token;n.withCredentials&&o&&(Ou(),n.withCredentials=!1),i&&a&&o&&n.ignoreBrowserTokenWarning!==!0?Nu():typeof n.useCdn>"u"&&Iu(),s&&wu(n.projectId),n.dataset&&vs(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?xs(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion=`${n.apiVersion}`.replace(/^v/,""),n.isDefaultApi=n.apiHost===He.apiHost,n.useCdn===!0&&n.withCredentials&&Mu(),n.useCdn=n.useCdn!==!1&&!n.withCredentials,Uu(n.apiVersion);const c=n.apiHost.split("://",2),u=c[0],d=c[1],h=n.isDefaultApi?Lu:d;return s?(n.url=`${u}://${n.projectId}.${d}/v${n.apiVersion}`,n.cdnUrl=`${u}://${n.projectId}.${h}/v${n.apiVersion}`):(n.url=`${n.apiHost}/v${n.apiVersion}`,n.cdnUrl=n.url),n};class Ts extends Error{name="ConnectionFailedError"}class Bu extends Error{name="DisconnectError";reason;constructor(t,r,n={}){super(t,n),this.reason=r}}class Fu extends Error{name="ChannelError";data;constructor(t,r){super(t),this.data=r}}class zu extends Error{name="MessageError";data;constructor(t,r,n={}){super(t,n),this.data=r}}class Jr extends Error{name="MessageParseError"}const Hu=["channelError","disconnect"];function Es(e,t){return ns(()=>{const r=e();return Dc(r)?r:Se(r)}).pipe(pe(r=>$u(r,t)))}function $u(e,t){return new O(r=>{const n=t.includes("open"),s=t.includes("reconnect");function i(u){if("data"in u){const[d,h]=en(u);r.error(d?new Jr("Unable to parse EventSource error message",{cause:h}):new zu((h?.data).message,h));return}e.readyState===e.CLOSED?r.error(new Ts("EventSource connection failed")):s&&r.next({type:"reconnect"})}function a(){r.next({type:"open"})}function o(u){const[d,h]=en(u);if(d){r.error(new Jr("Unable to parse EventSource message",{cause:d}));return}if(u.type==="channelError"){const m=new URL(e.url).searchParams.get("tag");r.error(new Fu(Gu(h?.data,m),h.data));return}if(u.type==="disconnect"){r.error(new Bu(`Server disconnected client: ${h.data?.reason||"unknown error"}`));return}r.next({type:u.type,id:u.lastEventId,...h.data?{data:h.data}:{}})}e.addEventListener("error",i),n&&e.addEventListener("open",a);const c=[...new Set([...Hu,...t])].filter(u=>u!=="error"&&u!=="open"&&u!=="reconnect");return c.forEach(u=>e.addEventListener(u,o)),()=>{e.removeEventListener("error",i),n&&e.removeEventListener("open",a),c.forEach(u=>e.removeEventListener(u,o)),e.close()}})}function en(e){try{const t=typeof e.data=="string"&&JSON.parse(e.data);return[null,{type:e.type,id:e.lastEventId,...Vu(t)?{}:{data:t}}]}catch(t){return[t,null]}}function Gu(e,t){const r=e.error;return r?ps(r)?ms(r,t):r.description?r.description:typeof r=="string"?r:JSON.stringify(r,null,2):e.message||"Unknown listener error"}function Vu(e){for(const t in e)return!1;return!0}function Ss(e){if(typeof e=="string")return{id:e};if(Array.isArray(e))return{query:"*[_id in $ids]",params:{ids:e}};if(typeof e=="object"&&e!==null&&"query"in e&&typeof e.query=="string")return"params"in e&&typeof e.params=="object"&&e.params!==null?{query:e.query,params:e.params}:{query:e.query};const t=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

${t}`)}class Cs{selection;operations;constructor(t,r={}){this.selection=t,this.operations=r}set(t){return this._assign("set",t)}setIfMissing(t){return this._assign("setIfMissing",t)}diffMatchPatch(t){return ze("diffMatchPatch",t),this._assign("diffMatchPatch",t)}unset(t){if(!Array.isArray(t))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:t}),this}inc(t){return this._assign("inc",t)}dec(t){return this._assign("dec",t)}insert(t,r,n){return Cu(t,r,n),this._assign("insert",{[t]:r,items:n})}append(t,r){return this.insert("after",`${t}[-1]`,r)}prepend(t,r){return this.insert("before",`${t}[0]`,r)}splice(t,r,n,s){const i=typeof n>"u"||n===-1,a=r<0?r-1:r,o=i?-1:Math.max(0,r+n),c=a<0&&o>=0?"":o,u=`${t}[${a}:${c}]`;return this.insert("replace",u,s||[])}ifRevisionId(t){return this.operations.ifRevisionID=t,this}serialize(){return{...Ss(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(t,r,n=!0){return ze(t,r),this.operations=Object.assign({},this.operations,{[t]:Object.assign({},n&&this.operations[t]||{},r)}),this}_set(t,r){return this._assign(t,r,!1)}}class me extends Cs{#t;constructor(t,r,n){super(t,r),this.#t=n}clone(){return new me(this.selection,{...this.operations},this.#t)}commit(t){if(!this.#t)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},t);return this.#t.mutate({patch:this.serialize()},n)}}class ae extends Cs{#t;constructor(t,r,n){super(t,r),this.#t=n}clone(){return new ae(this.selection,{...this.operations},this.#t)}commit(t){if(!this.#t)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},t);return this.#t.mutate({patch:this.serialize()},n)}}const As={returnDocuments:!1};class Ms{operations;trxId;constructor(t=[],r){this.operations=t,this.trxId=r}create(t){return ze("create",t),this._add({create:t})}createIfNotExists(t){const r="createIfNotExists";return ze(r,t),Ne(r,t),this._add({[r]:t})}createOrReplace(t){const r="createOrReplace";return ze(r,t),Ne(r,t),this._add({[r]:t})}delete(t){return it("delete",t),this._add({delete:{id:t}})}transactionId(t){return t?(this.trxId=t,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(t){return this.operations.push(t),this}}class gt extends Ms{#t;constructor(t,r,n){super(t,n),this.#t=r}clone(){return new gt([...this.operations],this.#t,this.trxId)}commit(t){if(!this.#t)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#t.mutate(this.serialize(),Object.assign({transactionId:this.trxId},As,t||{}))}patch(t,r){const n=typeof r=="function",s=typeof t!="string"&&t instanceof ae,i=typeof t=="object"&&("query"in t||"id"in t);if(s)return this._add({patch:t.serialize()});if(n){const a=r(new ae(t,{},this.#t));if(!(a instanceof ae))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:a.serialize()})}if(i){const a=new ae(t,r||{},this.#t);return this._add({patch:a.serialize()})}return this._add({patch:{id:t,...r}})}}class xt extends Ms{#t;constructor(t,r,n){super(t,n),this.#t=r}clone(){return new xt([...this.operations],this.#t,this.trxId)}commit(t){if(!this.#t)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#t.mutate(this.serialize(),Object.assign({transactionId:this.trxId},As,t||{}))}patch(t,r){const n=typeof r=="function";if(typeof t!="string"&&t instanceof me)return this._add({patch:t.serialize()});if(n){const s=r(new me(t,{},this.#t));if(!(s instanceof me))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:s.serialize()})}return this._add({patch:{id:t,...r}})}}const Wu="X-Sanity-Project-ID";function qu(e,t={}){const r={};e.headers&&Object.assign(r,e.headers);const n=t.token||e.token;n&&(r.Authorization=`Bearer ${n}`),!t.useGlobalApi&&!e.useProjectHostname&&e.projectId&&(r[Wu]=e.projectId);const s=!!(typeof t.withCredentials>"u"?e.withCredentials:t.withCredentials),i=typeof t.timeout>"u"?e.timeout:t.timeout;return Object.assign({},t,{headers:Object.assign({},r,t.headers||{}),timeout:typeof i>"u"?300*1e3:i,proxy:t.proxy||e.proxy,json:!0,withCredentials:s,fetch:typeof t.fetch=="object"&&typeof e.fetch=="object"?{...e.fetch,...t.fetch}:t.fetch||e.fetch})}const Is=({query:e,params:t={},options:r={}})=>{const n=new URLSearchParams,{tag:s,includeMutations:i,returnQuery:a,...o}=r;s&&n.append("tag",s),n.append("query",e);for(const[c,u]of Object.entries(t))u!==void 0&&n.append(`$${c}`,JSON.stringify(u));for(const[c,u]of Object.entries(o))u&&n.append(c,`${u}`);return a===!1&&n.append("returnQuery","false"),i===!1&&n.append("includeMutations","false"),`?${n}`},Xu=(e,t)=>e===!1?void 0:typeof e>"u"?t:e,Yu=(e={})=>({dryRun:e.dryRun,returnIds:!0,returnDocuments:Xu(e.returnDocuments,!0),visibility:e.visibility||"sync",autoGenerateArrayKeys:e.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:e.skipCrossDatasetReferenceValidation}),cr=e=>e.type==="response",Ku=e=>e.body,Qu=(e,t)=>e.reduce((r,n)=>(r[t(n)]=n,r),Object.create(null)),Zu=11264;function Rs(e,t,r,n,s={},i={}){const a="stega"in i?{...r||{},...typeof i.stega=="boolean"?{enabled:i.stega}:i.stega||{}}:r,o=a.enabled?ru(s):s,c=i.filterResponse===!1?v=>v:v=>v.result,{cache:u,next:d,...h}={useAbortSignal:typeof i.signal<"u",resultSourceMap:a.enabled?"withKeyArraySelector":i.resultSourceMap,...i,returnQuery:i.filterResponse===!1&&i.returnQuery!==!1},m=typeof u<"u"||typeof d<"u"?{...h,fetch:{cache:u,next:d}}:h,p=xe(e,t,"query",{query:n,params:o},m);return a.enabled?p.pipe(Kc(Ge(Z(()=>import("./stegaEncodeSourceMap-m7huXZae.js"),__vite__mapDeps([11,1,2,3])).then(function(v){return v.stegaEncodeSourceMap$1}).then(({stegaEncodeSourceMap:v})=>v))),U(([v,f])=>{const b=f(v.result,v.resultSourceMap,a);return c({...v,result:b})})):p.pipe(U(c))}function Oe(e,t,r,n={}){const s=(()=>{if(!n.releaseId)return r;const a=hs(r);if(!a){if(pt(r))throw new Error(`The document ID (\`${r}\`) is a draft, but \`options.releaseId\` is set as \`${n.releaseId}\``);return Ve(r,n.releaseId)}if(a!==n.releaseId)throw new Error(`The document ID (\`${r}\`) is already a version of \`${a}\` release, but this does not match the provided \`options.releaseId\` (\`${n.releaseId}\`)`);return r})(),i={uri:q(e,"doc",s),json:!0,tag:n.tag,signal:n.signal,query:n.includeAllVersions!==void 0?{includeAllVersions:n.includeAllVersions}:void 0};return qe(e,t,i).pipe(Pe(cr),U(a=>{const o=a.body.documents;return o?n.includeAllVersions?o:o[0]:n.includeAllVersions?[]:void 0}))}function _s(e,t,r,n={}){const s={uri:q(e,"doc",r.join(",")),json:!0,tag:n.tag,signal:n.signal};return qe(e,t,s).pipe(Pe(cr),U(i=>{const a=Qu(i.body.documents||[],o=>o._id);return r.map(o=>a[o]||null)}))}function Ns(e,t,r,n={}){return xe(e,t,"query",{query:"*[sanity::partOfRelease($releaseId)]",params:{releaseId:r}},n)}function Os(e,t,r,n){return Ne("createIfNotExists",r),bt(e,t,r,"createIfNotExists",n)}function js(e,t,r,n){return Ne("createOrReplace",r),bt(e,t,r,"createOrReplace",n)}function Ps(e,t,r,n,s){return Ne("createVersion",r),gs("createVersion",r),Pu(),_(e,t,{actionType:"sanity.action.document.version.create",publishedId:n,document:r},s)}function Ls(e,t,r,n,s,i,a){if(!n)throw new Error("`createVersion()` requires `baseId` when no `document` is provided");if(!r)throw new Error("`createVersion()` requires `publishedId` when `baseId` is provided");it("createVersion",n),it("createVersion",r);const o={actionType:"sanity.action.document.version.create",publishedId:r,baseId:n,versionId:s?Ve(r,s):ds(r),ifBaseRevisionId:i};return _(e,t,o,a)}function ks(e,t,r,n){return xe(e,t,"mutate",{mutations:[{delete:Ss(r)}]},n)}function Ds(e,t,r,n=!1,s){return _(e,t,{actionType:"sanity.action.document.version.discard",versionId:r,purge:n},s)}function Us(e,t,r,n){return Ne("replaceVersion",r),gs("replaceVersion",r),_(e,t,{actionType:"sanity.action.document.version.replace",document:r},n)}function Bs(e,t,r,n,s){return _(e,t,{actionType:"sanity.action.document.version.unpublish",versionId:r,publishedId:n},s)}function Fs(e,t,r,n){let s;r instanceof ae||r instanceof me?s={patch:r.serialize()}:r instanceof gt||r instanceof xt?s=r.serialize():s=r;const i=Array.isArray(s)?s:[s],a=n&&n.transactionId||void 0;return xe(e,t,"mutate",{mutations:i,transactionId:a},n)}function _(e,t,r,n){const s=Array.isArray(r)?r:[r],i=n&&n.transactionId||void 0,a=n&&n.skipCrossDatasetReferenceValidation||void 0,o=n&&n.dryRun||void 0;return xe(e,t,"actions",{actions:s,transactionId:i,skipCrossDatasetReferenceValidation:a,dryRun:o},n)}function xe(e,t,r,n,s={}){const i=r==="mutate",a=r==="actions",o=r==="query",c=i||a?"":Is(n),u=!i&&!a&&c.length<Zu,d=u?c:"",h=s.returnFirst,{timeout:m,token:p,tag:v,headers:f,returnQuery:b,lastLiveEventId:w,cacheMode:y}=s,x=q(e,r,d),A={method:u?"GET":"POST",uri:x,json:!0,body:u?void 0:n,query:i&&Yu(s),timeout:m,headers:f,token:p,tag:v,returnQuery:b,perspective:s.perspective,resultSourceMap:s.resultSourceMap,lastLiveEventId:Array.isArray(w)?w[0]:w,cacheMode:y,canUseCdn:o,signal:s.signal,fetch:s.fetch,useAbortSignal:s.useAbortSignal,useCdn:s.useCdn};return qe(e,t,A).pipe(Pe(cr),U(Ku),U(N=>{if(!i)return N;const P=N.results||[];if(s.returnDocuments)return h?P[0]&&P[0].document:P.map(F=>F.document);const Le=h?"documentId":"documentIds",yt=h?P[0]&&P[0].id:P.map(F=>F.id);return{transactionId:N.transactionId,results:P,[Le]:yt}}))}function bt(e,t,r,n,s={}){const i={[n]:r},a=Object.assign({returnFirst:!0,returnDocuments:!0},s);return xe(e,t,"mutate",{mutations:[i]},a)}const We=e=>e.config().dataset!==void 0&&e.config().projectId!==void 0||e.config()["~experimental_resource"]!==void 0,zs=(e,t)=>We(e)&&t.startsWith(q(e,"query")),Ju=(e,t)=>We(e)&&t.startsWith(q(e,"mutate")),ed=(e,t)=>We(e)&&t.startsWith(q(e,"doc","")),td=(e,t)=>We(e)&&t.startsWith(q(e,"listen")),rd=(e,t)=>We(e)&&t.startsWith(q(e,"history","")),nd=(e,t)=>t.startsWith("/data/")||zs(e,t)||Ju(e,t)||ed(e,t)||td(e,t)||rd(e,t);function qe(e,t,r){const n=r.url||r.uri,s=e.config(),i=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&nd(e,n):r.canUseCdn;let a=(r.useCdn??s.useCdn)&&i;const o=r.tag&&s.requestTagPrefix?[s.requestTagPrefix,r.tag].join("."):r.tag||s.requestTagPrefix;if(o&&r.tag!==null&&(r.query={tag:xs(o),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&zs(e,n)){const d=r.resultSourceMap??s.resultSourceMap;d!==void 0&&d!==!1&&(r.query={resultSourceMap:d,...r.query});const h=r.perspective||s.perspective;typeof h<"u"&&(h==="previewDrafts"&&_u(),ys(h),r.query={perspective:Array.isArray(h)?h.join(","):h,...r.query},(Array.isArray(h)&&h.length>0||h==="previewDrafts"||h==="drafts")&&a&&(a=!1,Ru())),r.lastLiveEventId&&(r.query={...r.query,lastLiveEventId:r.lastLiveEventId}),r.returnQuery===!1&&(r.query={returnQuery:"false",...r.query}),a&&r.cacheMode=="noStale"&&(r.query={cacheMode:"noStale",...r.query})}const c=qu(s,Object.assign({},r,{url:ur(e,n,a)})),u=new O(d=>t(c,s.requester).subscribe(d));return r.signal?u.pipe(sd(r.signal)):u}function j(e,t,r){return qe(e,t,r).pipe(Pe(n=>n.type==="response"),U(n=>n.body))}function q(e,t,r){const n=e.config();if(n["~experimental_resource"]){bs(n);const a=od(n),o=r!==void 0?`${t}/${r}`:t;return`${a}/${o}`.replace(/\/($|\?)/,"$1")}const s=ge(n),i=`/${t}/${s}`;return`/data${r!==void 0?`${i}/${r}`:i}`.replace(/\/($|\?)/,"$1")}function ur(e,t,r=!1){const{url:n,cdnUrl:s}=e.config();return`${r?s:n}/${t.replace(/^\//,"")}`}function sd(e){return t=>new O(r=>{const n=()=>r.error(ad(e));if(e&&e.aborted){n();return}const s=t.subscribe(r);return e.addEventListener("abort",n),()=>{e.removeEventListener("abort",n),s.unsubscribe()}})}const id=!!globalThis.DOMException;function ad(e){if(id)return new DOMException(e?.reason??"The operation was aborted.","AbortError");const t=new Error(e?.reason??"The operation was aborted.");return t.name="AbortError",t}const od=e=>{if(!e["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");const{type:t,id:r}=e["~experimental_resource"];switch(t){case"dataset":{const n=r.split(".");if(n.length!==2)throw new Error('Dataset ID must be in the format "project.dataset"');return`/projects/${n[0]}/datasets/${n[1]}`}case"canvas":return`/canvases/${r}`;case"media-library":return`/media-libraries/${r}`;case"dashboard":return`/dashboards/${r}`;default:throw new Error(`Unsupported resource type: ${t.toString()}`)}};function Hs(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/generate/${n}`,body:r})}function ld(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/patch/${n}`,body:r})}function cd(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/prompt/${n}`,body:r})}function $s(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/transform/${n}`,body:r})}function Gs(e,t,r){const n=ge(e.config());return j(e,t,{method:"POST",uri:`/agent/action/translate/${n}`,body:r})}class ud{#t;#e;constructor(t,r){this.#t=t,this.#e=r}generate(t){return Hs(this.#t,this.#e,t)}transform(t){return $s(this.#t,this.#e,t)}translate(t){return Gs(this.#t,this.#e,t)}}class dd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}generate(t){return S(Hs(this.#t,this.#e,t))}transform(t){return S($s(this.#t,this.#e,t))}translate(t){return S(Gs(this.#t,this.#e,t))}prompt(t){return S(cd(this.#t,this.#e,t))}patch(t){return S(ld(this.#t,this.#e,t))}}class hd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}upload(t,r,n){return Vs(this.#t,this.#e,t,r,n)}}class fd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}upload(t,r,n){const s=Vs(this.#t,this.#e,t,r,n);return S(s.pipe(Pe(i=>i.type==="response"),U(i=>i.body.document)))}}function Vs(e,t,r,n,s={}){Tu(r);let i=s.extract||void 0;i&&!i.length&&(i=["none"]);const a=e.config(),o=md(s,n),{tag:c,label:u,title:d,description:h,creditLine:m,filename:p,source:v}=o,f={label:u,title:d,description:h,filename:p,meta:i,creditLine:m};return v&&(f.sourceId=v.id,f.sourceName=v.name,f.sourceUrl=v.url),qe(e,t,{tag:c,method:"POST",timeout:o.timeout||0,uri:pd(a,r),headers:o.contentType?{"Content-Type":o.contentType}:{},query:f,body:n})}function pd(e,t){const r=t==="image"?"images":"files";if(e["~experimental_resource"]){const{type:s,id:i}=e["~experimental_resource"];switch(s){case"dataset":throw new Error("Assets are not supported for dataset resources, yet. Configure the client with `{projectId: <projectId>, dataset: <datasetId>}` instead.");case"canvas":return`/canvases/${i}/assets/${r}`;case"media-library":return`/media-libraries/${i}/upload`;case"dashboard":return`/dashboards/${i}/assets/${r}`;default:throw new Error(`Unsupported resource type: ${s.toString()}`)}}const n=ge(e);return`assets/${r}/${n}`}function md(e,t){return typeof File>"u"||!(t instanceof File)?e:Object.assign({filename:e.preserveFilename===!1?void 0:t.name,contentType:t.type},e)}var vd=(e,t)=>Object.keys(t).concat(Object.keys(e)).reduce((r,n)=>(r[n]=typeof e[n]>"u"?t[n]:e[n],r),{});const gd=(e,t)=>t.reduce((r,n)=>(typeof e[n]>"u"||(r[n]=e[n]),r),{}),Ws=ns(()=>Z(()=>import("./browser-8gYOhkFu.js").then(e=>e.b),__vite__mapDeps([12,2]))).pipe(U(({default:e})=>e),Qc(1));function qs(){return function(e){return e.pipe(nt((t,r)=>t instanceof Ts?Vc(Se({type:"reconnect"}),Wc(1e3).pipe(pe(()=>r))):es(()=>t)))}}const xd=14800,bd=["includePreviousRevision","includeResult","includeMutations","includeAllVersions","visibility","effectFormat","tag"],yd={includeResult:!0};function Xs(e,t,r={}){const{url:n,token:s,withCredentials:i,requestTagPrefix:a,headers:o}=this.config(),c=r.tag&&a?[a,r.tag].join("."):r.tag,u={...vd(r,yd),tag:c},d=gd(u,bd),h=Is({query:e,params:t,options:{tag:c,...d}}),m=`${n}${q(this,"listen",h)}`;if(m.length>xd)return es(()=>new Error("Query too large for listener"));const p=u.events?u.events:["mutation"],v={};return i&&(v.withCredentials=!0),(s||o)&&(v.headers={},s&&(v.headers.Authorization=`Bearer ${s}`),o&&Object.assign(v.headers,o)),Es(()=>(typeof EventSource>"u"||v.headers?Ws:Se(EventSource)).pipe(U(f=>new f(m,v))),p).pipe(qs(),Pe(f=>p.includes(f.type)),U(f=>({type:f.type,..."data"in f?f.data:{}})))}function wd(e,t){return Td(typeof e=="function"?{predicate:e,...t}:e)}function Td(e){return t=>{let r,n=!1;const{predicate:s,...i}=e,a=t.pipe(Zc(c=>{e.predicate(c)&&(n=!0,r=c)}),is(()=>{n=!1,r=void 0}),as(i)),o=new O(c=>{n&&c.next(r),c.complete()});return qc(a,o)}}const tn="2021-03-25";class Ys{#t;constructor(t){this.#t=t}events({includeDrafts:t=!1,tag:r}={}){he("live",this.#t.config());const{projectId:n,apiVersion:s,token:i,withCredentials:a,requestTagPrefix:o,headers:c}=this.#t.config(),u=s.replace(/^v/,"");if(u!=="X"&&u<tn)throw new Error(`The live events API requires API version ${tn} or later. The current API version is ${u}. Please update your API version to use this feature.`);if(t&&!i&&!a)throw new Error("The live events API requires a token or withCredentials when 'includeDrafts: true'. Please update your client configuration. The token should have the lowest possible access role.");const d=q(this.#t,"live/events"),h=new URL(this.#t.getUrl(d,!1)),m=r&&o?[o,r].join("."):r;m&&h.searchParams.set("tag",m),t&&h.searchParams.set("includeDrafts","true");const p={};t&&a&&(p.withCredentials=!0),(t&&i||c)&&(p.headers={},t&&i&&(p.headers.Authorization=`Bearer ${i}`),c&&Object.assign(p.headers,c));const v=`${h.href}::${JSON.stringify(p)}`,f=kt.get(v);if(f)return f;const b=Es(()=>(typeof EventSource>"u"||p.headers?Ws:Se(EventSource)).pipe(U(x=>new x(h.href,p))),["message","restart","welcome","reconnect","goaway"]),w=Ed(h,{method:"OPTIONS",mode:"cors",credentials:p.withCredentials?"include":"omit",headers:p.headers}).pipe(nt(()=>{throw new vu({projectId:n})})),y=b.pipe(qs(),pe(x=>x.type==="reconnect"?w.pipe(pe(()=>Se(x))):Se(x)),nt(x=>w.pipe(pe(()=>{throw x}))),U(x=>{if(x.type==="message"){const{data:A,...N}=x;return{...N,tags:A.tags}}return x})).pipe(is(()=>kt.delete(v)),wd({predicate:x=>x.type==="welcome"}));return kt.set(v,y),y}}function Ed(e,t){return new O(r=>{const n=new AbortController,s=n.signal;return fetch(e,{...t,signal:n.signal}).then(i=>{r.next(i),r.complete()},i=>{s.aborted||r.error(i)}),()=>n.abort()})}const kt=new Map;class Sd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}create(t,r){return Ce(this.#t,this.#e,"PUT",t,r)}edit(t,r){return Ce(this.#t,this.#e,"PATCH",t,r)}delete(t){return Ce(this.#t,this.#e,"DELETE",t)}list(){he("dataset",this.#t.config());const t=this.#t.config(),r=t.projectId;let n="/datasets";return t.useProjectHostname===!1&&(n=`/projects/${r}/datasets`),j(this.#t,this.#e,{uri:n,tag:null})}}class Cd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}create(t,r){return he("dataset",this.#t.config()),S(Ce(this.#t,this.#e,"PUT",t,r))}edit(t,r){return he("dataset",this.#t.config()),S(Ce(this.#t,this.#e,"PATCH",t,r))}delete(t){return he("dataset",this.#t.config()),S(Ce(this.#t,this.#e,"DELETE",t))}list(){he("dataset",this.#t.config());const t=this.#t.config(),r=t.projectId;let n="/datasets";return t.useProjectHostname===!1&&(n=`/projects/${r}/datasets`),S(j(this.#t,this.#e,{uri:n,tag:null}))}}function Ce(e,t,r,n,s){return he("dataset",e.config()),vs(n),j(e,t,{method:r,uri:`/datasets/${n}`,body:s,tag:null})}class Ks{#t;#e;constructor(t,r){this.#t=t,this.#e=r}getPlaybackInfo(t,r={}){const n=this.#t.config()["~experimental_resource"]?.id,{instanceId:s,libraryId:i}=Rd(t),a=i||n;if(!a)throw new Error("Could not determine Media Library ID - you need to provide a valid Media Library ID in the client config or a Media Library GDR");const o=_d(s,a),c=Nd(r);return j(this.#t,this.#e,{method:"GET",uri:o,query:c})}}class Ad{#t;#e;constructor(t,r){this.#t=t,this.#e=r}getPlaybackInfo(t,r={}){return S(new Ks(this.#t.observable,this.#e).getPlaybackInfo(t,r))}}const Md=/^media-library:(ml[^:]+):([^:]+)$/;function Id(e){return typeof e=="object"&&"_ref"in e}function Rd(e){const t=Id(e)?e._ref:e,r=Md.exec(t);if(r){const[,n,s]=r;return{libraryId:n,instanceId:s}}if(typeof e=="string"&&e.startsWith("video-"))return{instanceId:e};throw new Error(`Invalid video asset instance identifier "${t}": must be a valid video instance id or a Global Dataset Reference (GDR) to the video asset in the Media Library`)}function _d(e,t){return`/media-libraries/${t}/video/${e}/playback-info`}function Nd(e){const t={};if(e.transformations){const{thumbnail:r,animated:n,storyboard:s}=e.transformations;r&&(r.width&&(t.thumbnailWidth=r.width),r.height&&(t.thumbnailHeight=r.height),r.time!==void 0&&(t.thumbnailTime=r.time),r.fit&&(t.thumbnailFit=r.fit),r.format&&(t.thumbnailFormat=r.format)),n&&(n.width&&(t.animatedWidth=n.width),n.height&&(t.animatedHeight=n.height),n.start!==void 0&&(t.animatedStart=n.start),n.end!==void 0&&(t.animatedEnd=n.end),n.fps&&(t.animatedFps=n.fps),n.format&&(t.animatedFormat=n.format)),s&&s.format&&(t.storyboardFormat=s.format)}return e.expiration&&(t.expiration=e.expiration),t}class Od{#t;#e;constructor(t,r){this.#t=t,this.#e=r}list(t){const r={},n="/projects";return t?.includeMembers===!1&&(r.includeMembers="false"),t?.organizationId&&(r.organizationId=t.organizationId),j(this.#t,this.#e,{uri:n,query:r})}getById(t){return j(this.#t,this.#e,{uri:`/projects/${t}`})}}class jd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}list(t){const r={},n="/projects";return t?.includeMembers===!1&&(r.includeMembers="false"),t?.organizationId&&(r.organizationId=t.organizationId),S(j(this.#t,this.#e,{uri:n,query:r}))}getById(t){return S(j(this.#t,this.#e,{uri:`/projects/${t}`}))}}const rn=ou("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",8),at=(e,t)=>t?Ve(e,t):ds(e);function ot(e,{releaseId:t,publishedId:r,document:n}){if(r&&n._id){const s=at(r,t);return Su(s,n),s}if(n._id){const s=pt(n._id),i=mt(n._id);if(!s&&!i)throw new Error(`\`${e}()\` requires a document with an \`_id\` that is a version or draft ID`);if(t){if(s)throw new Error(`\`${e}()\` was called with a document ID (\`${n._id}\`) that is a draft ID, but a release ID (\`${t}\`) was also provided.`);const a=hs(n._id);if(a!==t)throw new Error(`\`${e}()\` was called with a document ID (\`${n._id}\`) that is a version ID, but the release ID (\`${t}\`) does not match the document's version ID (\`${a}\`).`)}return n._id}if(r)return at(r,t);throw new Error(`\`${e}()\` requires either a publishedId or a document with an \`_id\``)}const Pd=(e,t)=>{if(typeof e=="object"&&e!==null&&("releaseId"in e||"metadata"in e)){const{releaseId:r=rn(),metadata:n={}}=e;return[r,n,t]}return[rn(),{},e]},Qs=(e,t)=>{const[r,n,s]=Pd(e,t),i={...n,releaseType:n.releaseType||"undecided"};return{action:{actionType:"sanity.action.release.create",releaseId:r,metadata:i},options:s}};class Ld{#t;#e;constructor(t,r){this.#t=t,this.#e=r}get({releaseId:t},r){return Oe(this.#t,this.#e,`_.releases.${t}`,r)}create(t,r){const{action:n,options:s}=Qs(t,r),{releaseId:i,metadata:a}=n;return _(this.#t,this.#e,n,s).pipe(U(o=>({...o,releaseId:i,metadata:a})))}edit({releaseId:t,patch:r},n){const s={actionType:"sanity.action.release.edit",releaseId:t,patch:r};return _(this.#t,this.#e,s,n)}publish({releaseId:t},r){const n={actionType:"sanity.action.release.publish",releaseId:t};return _(this.#t,this.#e,n,r)}archive({releaseId:t},r){const n={actionType:"sanity.action.release.archive",releaseId:t};return _(this.#t,this.#e,n,r)}unarchive({releaseId:t},r){const n={actionType:"sanity.action.release.unarchive",releaseId:t};return _(this.#t,this.#e,n,r)}schedule({releaseId:t,publishAt:r},n){const s={actionType:"sanity.action.release.schedule",releaseId:t,publishAt:r};return _(this.#t,this.#e,s,n)}unschedule({releaseId:t},r){const n={actionType:"sanity.action.release.unschedule",releaseId:t};return _(this.#t,this.#e,n,r)}delete({releaseId:t},r){const n={actionType:"sanity.action.release.delete",releaseId:t};return _(this.#t,this.#e,n,r)}fetchDocuments({releaseId:t},r){return Ns(this.#t,this.#e,t,r)}}class kd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}get({releaseId:t},r){return S(Oe(this.#t,this.#e,`_.releases.${t}`,r))}async create(t,r){const{action:n,options:s}=Qs(t,r),{releaseId:i,metadata:a}=n;return{...await S(_(this.#t,this.#e,n,s)),releaseId:i,metadata:a}}edit({releaseId:t,patch:r},n){const s={actionType:"sanity.action.release.edit",releaseId:t,patch:r};return S(_(this.#t,this.#e,s,n))}publish({releaseId:t},r){const n={actionType:"sanity.action.release.publish",releaseId:t};return S(_(this.#t,this.#e,n,r))}archive({releaseId:t},r){const n={actionType:"sanity.action.release.archive",releaseId:t};return S(_(this.#t,this.#e,n,r))}unarchive({releaseId:t},r){const n={actionType:"sanity.action.release.unarchive",releaseId:t};return S(_(this.#t,this.#e,n,r))}schedule({releaseId:t,publishAt:r},n){const s={actionType:"sanity.action.release.schedule",releaseId:t,publishAt:r};return S(_(this.#t,this.#e,s,n))}unschedule({releaseId:t},r){const n={actionType:"sanity.action.release.unschedule",releaseId:t};return S(_(this.#t,this.#e,n,r))}delete({releaseId:t},r){const n={actionType:"sanity.action.release.delete",releaseId:t};return S(_(this.#t,this.#e,n,r))}fetchDocuments({releaseId:t},r){return S(Ns(this.#t,this.#e,t,r))}}class Dd{#t;#e;constructor(t,r){this.#t=t,this.#e=r}getById(t){return j(this.#t,this.#e,{uri:`/users/${t}`})}}class Ud{#t;#e;constructor(t,r){this.#t=t,this.#e=r}getById(t){return S(j(this.#t,this.#e,{uri:`/users/${t}`}))}}class lt{assets;datasets;live;mediaLibrary;projects;users;agent;releases;#t;#e;listen=Xs;constructor(t,r=He){this.config(r),this.#e=t,this.assets=new hd(this,this.#e),this.datasets=new Sd(this,this.#e),this.live=new Ys(this),this.mediaLibrary={video:new Ks(this,this.#e)},this.projects=new Od(this,this.#e),this.users=new Dd(this,this.#e),this.agent={action:new ud(this,this.#e)},this.releases=new Ld(this,this.#e)}clone(){return new lt(this.#e,this.config())}config(t){if(t===void 0)return{...this.#t};if(this.#t&&this.#t.allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.#t=ws(t,this.#t||{}),this}withConfig(t){const r=this.config();return new lt(this.#e,{...r,...t,stega:{...r.stega||{},...typeof t?.stega=="boolean"?{enabled:t.stega}:t?.stega||{}}})}fetch(t,r,n){return Rs(this,this.#e,this.#t.stega,t,r,n)}getDocument(t,r){if(r?.includeAllVersions===!0)return Oe(this,this.#e,t,{...r,includeAllVersions:!0});const n={signal:r?.signal,tag:r?.tag,releaseId:r?.releaseId,...r&&"includeAllVersions"in r?{includeAllVersions:!1}:{}};return Oe(this,this.#e,t,n)}getDocuments(t,r){return _s(this,this.#e,t,r)}create(t,r){return bt(this,this.#e,t,"create",r)}createIfNotExists(t,r){return Os(this,this.#e,t,r)}createOrReplace(t,r){return js(this,this.#e,t,r)}createVersion({document:t,publishedId:r,releaseId:n,baseId:s,ifBaseRevisionId:i},a){if(!t)return Ls(this,this.#e,r,s,n,i,a);const o=ot("createVersion",{document:t,publishedId:r,releaseId:n}),c={...t,_id:o},u=r||vt(t._id);return Ps(this,this.#e,c,u,a)}delete(t,r){return ks(this,this.#e,t,r)}discardVersion({releaseId:t,publishedId:r},n,s){const i=at(r,t);return Ds(this,this.#e,i,n,s)}replaceVersion({document:t,publishedId:r,releaseId:n},s){const i=ot("replaceVersion",{document:t,publishedId:r,releaseId:n}),a={...t,_id:i};return Us(this,this.#e,a,s)}unpublishVersion({releaseId:t,publishedId:r},n){const s=Ve(r,t);return Bs(this,this.#e,s,r,n)}mutate(t,r){return Fs(this,this.#e,t,r)}patch(t,r){return new me(t,r,this)}transaction(t){return new xt(t,this)}action(t,r){return _(this,this.#e,t,r)}request(t){return j(this,this.#e,t)}getUrl(t,r){return ur(this,t,r)}getDataUrl(t,r){return q(this,t,r)}}class ct{assets;datasets;live;mediaLibrary;projects;users;agent;releases;observable;#t;#e;listen=Xs;constructor(t,r=He){this.config(r),this.#e=t,this.assets=new fd(this,this.#e),this.datasets=new Cd(this,this.#e),this.live=new Ys(this),this.mediaLibrary={video:new Ad(this,this.#e)},this.projects=new jd(this,this.#e),this.users=new Ud(this,this.#e),this.agent={action:new dd(this,this.#e)},this.releases=new kd(this,this.#e),this.observable=new lt(t,r)}clone(){return new ct(this.#e,this.config())}config(t){if(t===void 0)return{...this.#t};if(this.#t&&this.#t.allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(t),this.#t=ws(t,this.#t||{}),this}withConfig(t){const r=this.config();return new ct(this.#e,{...r,...t,stega:{...r.stega||{},...typeof t?.stega=="boolean"?{enabled:t.stega}:t?.stega||{}}})}fetch(t,r,n){return S(Rs(this,this.#e,this.#t.stega,t,r,n))}getDocument(t,r){if(r?.includeAllVersions===!0)return S(Oe(this,this.#e,t,{...r,includeAllVersions:!0}));const n={signal:r?.signal,tag:r?.tag,releaseId:r?.releaseId,...r&&"includeAllVersions"in r?{includeAllVersions:!1}:{}};return S(Oe(this,this.#e,t,n))}getDocuments(t,r){return S(_s(this,this.#e,t,r))}create(t,r){return S(bt(this,this.#e,t,"create",r))}createIfNotExists(t,r){return S(Os(this,this.#e,t,r))}createOrReplace(t,r){return S(js(this,this.#e,t,r))}createVersion({document:t,publishedId:r,releaseId:n,baseId:s,ifBaseRevisionId:i},a){if(!t)return Ot(Ls(this,this.#e,r,s,n,i,a));const o=ot("createVersion",{document:t,publishedId:r,releaseId:n}),c={...t,_id:o},u=r||vt(t._id);return Ot(Ps(this,this.#e,c,u,a))}delete(t,r){return S(ks(this,this.#e,t,r))}discardVersion({releaseId:t,publishedId:r},n,s){const i=at(r,t);return S(Ds(this,this.#e,i,n,s))}replaceVersion({document:t,publishedId:r,releaseId:n},s){const i=ot("replaceVersion",{document:t,publishedId:r,releaseId:n}),a={...t,_id:i};return Ot(Us(this,this.#e,a,s))}unpublishVersion({releaseId:t,publishedId:r},n){const s=Ve(r,t);return S(Bs(this,this.#e,s,r,n))}mutate(t,r){return S(Fs(this,this.#e,t,r))}patch(t,r){return new ae(t,r,this)}transaction(t){return new gt(t,this)}action(t,r){return S(_(this,this.#e,t,r))}request(t){return S(j(this,this.#e,t))}dataRequest(t,r,n){return S(xe(this,this.#e,t,r,n))}getUrl(t,r){return ur(this,t,r)}getDataUrl(t,r){return q(this,t,r)}}function Bd(e,t){return{requester:Kr(e),createClient:r=>{const n=Kr(e,{ignoreWarnings:r.ignoreWarnings});return new t((s,i)=>(i||n)({maxRedirects:0,maxRetries:r.maxRetries,retryDelay:r.retryDelay,lineage:r.lineage,...s}),r)}}}var Fd=[];const zd=Bd(Fd,ct),Hd=zd.createClient,nn="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function $d(e){const[,t,r,n]=e.split("-");if(!t||!r||!n)throw new Error(`Malformed asset _ref '${e}'. Expected an id like "${nn}".`);const[s,i]=r.split("x"),a=+s,o=+i;if(!(isFinite(a)&&isFinite(o)))throw new Error(`Malformed asset _ref '${e}'. Expected an id like "${nn}".`);return{id:t,width:a,height:o,format:n}}const Gd=e=>{const t=e;return t?typeof t._ref=="string":!1},Vd=e=>{const t=e;return t?typeof t._id=="string":!1},Wd=e=>{const t=e;return t&&t.asset?typeof t.asset.url=="string":!1},qd=e=>{if(typeof e=="object"&&e!==null){const t=e;return t._upload&&(!t.asset||!t.asset._ref)}return!1};function Xd(e){if(!e)return null;let t;if(typeof e=="string"&&Yd(e))t={asset:{_ref:sn(e)}};else if(typeof e=="string")t={asset:{_ref:e}};else if(Gd(e))t={asset:e};else if(Vd(e))t={asset:{_ref:e._id||""}};else if(Wd(e))t={asset:{_ref:sn(e.asset.url)}};else if(typeof e.asset=="object")t={...e};else return null;const r=e;return r.crop&&(t.crop=r.crop),r.hotspot&&(t.hotspot=r.hotspot),Kd(t)}function Yd(e){return/^https?:\/\//.test(`${e}`)}function sn(e){return`image-${e.split("/").slice(-1)[0]}`.replace(/\.([a-z]+)$/,"-$1")}function Kd(e){if(e.crop&&e.hotspot)return e;const t={...e};return t.crop||(t.crop={left:0,top:0,bottom:0,right:0}),t.hotspot||(t.hotspot={x:.5,y:.5,height:1,width:1}),t}const Zs=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"],["frame","frame"]];function Qd(e){let t={...e||{}};const r=t.source;delete t.source;const n=Xd(r);if(!n){if(r&&qd(r))return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8HwQACfsD/QNViZkAAAAASUVORK5CYII=";throw new Error(`Unable to resolve image URL from source (${JSON.stringify(r)})`)}const s=n.asset._ref||n.asset._id||"",i=$d(s),a=Math.round(n.crop.left*i.width),o=Math.round(n.crop.top*i.height),c={left:a,top:o,width:Math.round(i.width-n.crop.right*i.width-a),height:Math.round(i.height-n.crop.bottom*i.height-o)},u=n.hotspot.height*i.height/2,d=n.hotspot.width*i.width/2,h=n.hotspot.x*i.width,m=n.hotspot.y*i.height,p={left:h-d,top:m-u,right:h+d,bottom:m+u};return t.rect||t.focalPoint||t.ignoreImageParams||t.crop||(t={...t,...Jd({crop:c,hotspot:p},t)}),Zd({...t,asset:i})}function Zd(e){const t=(e.baseUrl||"https://cdn.sanity.io").replace(/\/+$/,""),r=e.vanityName?`/${e.vanityName}`:"",n=`${e.asset.id}-${e.asset.width}x${e.asset.height}.${e.asset.format}${r}`,s=e.mediaLibraryId?`${t}/media-libraries/${e.mediaLibraryId}/images/${n}`:`${t}/images/${e.projectId}/${e.dataset}/${n}`,i=[];if(e.rect){const{left:o,top:c,width:u,height:d}=e.rect;(o!==0||c!==0||d!==e.asset.height||u!==e.asset.width)&&i.push(`rect=${o},${c},${u},${d}`)}e.bg&&i.push(`bg=${e.bg}`),e.focalPoint&&(i.push(`fp-x=${e.focalPoint.x}`),i.push(`fp-y=${e.focalPoint.y}`));const a=[e.flipHorizontal&&"h",e.flipVertical&&"v"].filter(Boolean).join("");return a&&i.push(`flip=${a}`),Zs.forEach(o=>{const[c,u]=o;typeof e[c]<"u"?i.push(`${u}=${encodeURIComponent(e[c])}`):typeof e[u]<"u"&&i.push(`${u}=${encodeURIComponent(e[u])}`)}),i.length===0?s:`${s}?${i.join("&")}`}function Jd(e,t){let r;const n=t.width,s=t.height;if(!(n&&s))return{width:n,height:s,rect:e.crop};const i=e.crop,a=e.hotspot,o=n/s;if(i.width/i.height>o){const c=Math.round(i.height),u=Math.round(c*o),d=Math.max(0,Math.round(i.top)),h=Math.round((a.right-a.left)/2+a.left);let m=Math.max(0,Math.round(h-u/2));m<i.left?m=i.left:m+u>i.left+i.width&&(m=i.left+i.width-u),r={left:m,top:d,width:u,height:c}}else{const c=i.width,u=Math.round(c/o),d=Math.max(0,Math.round(i.left)),h=Math.round((a.bottom-a.top)/2+a.top);let m=Math.max(0,Math.round(h-u/2));m<i.top?m=i.top:m+u>i.top+i.height&&(m=i.top+i.height-u),r={left:d,top:m,width:c,height:u}}return{width:n,height:s,rect:r}}const eh=["clip","crop","fill","fillmax","max","scale","min"],th=["top","bottom","left","right","center","focalpoint","entropy"],rh=["format"];function nh(e){return e&&"config"in e?typeof e.config=="function":!1}function sh(e){return e&&"clientConfig"in e?typeof e.clientConfig=="object":!1}function an(e){const{apiHost:t,projectId:r,dataset:n}=e,s={baseUrl:(t||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn.")},i=e["~experimental_resource"];if(i?.type==="media-library"){if(typeof i.id!="string"||i.id.length===0)throw new Error('Media library clients must include an id in "~experimental_resource"');return{...s,mediaLibraryId:i.id}}return{...s,projectId:r,dataset:n}}function ih(e){const t=Zs;for(const r of t){const[n,s]=r;if(e===n||e===s)return n}return e}function Js(e){let t={};return nh(e)?t=an(e.config()):sh(e)?t=an(e.clientConfig):t=e||{},t}function ah(e,t){const r=Js(t);return new e(null,r)}function oh(e){return ah(ut,e)}function lh(e,t){const r=t.baseUrl||e.baseUrl,n={baseUrl:r};for(const s in t)if(t.hasOwnProperty(s)){const i=ih(s);n[i]=t[s]}return{baseUrl:r,...n}}class ut{options;constructor(t,r){this.options=t?{...t.options||{},...r||{}}:{...r||{}}}withOptions(t){const r=lh(this.options,t);return new ut(this,r)}image(t){return this.withOptions({source:t})}dataset(t){return this.withOptions({dataset:t})}projectId(t){return this.withOptions({projectId:t})}withClient(t){const r=Js(t),n={...this.options};return delete n.baseUrl,delete n.projectId,delete n.dataset,delete n.mediaLibraryId,new ut(null,{...r,...n})}bg(t){return this.withOptions({bg:t})}dpr(t){return this.withOptions(t&&t!==1?{dpr:t}:{})}width(t){return this.withOptions({width:t})}height(t){return this.withOptions({height:t})}focalPoint(t,r){return this.withOptions({focalPoint:{x:t,y:r}})}maxWidth(t){return this.withOptions({maxWidth:t})}minWidth(t){return this.withOptions({minWidth:t})}maxHeight(t){return this.withOptions({maxHeight:t})}minHeight(t){return this.withOptions({minHeight:t})}size(t,r){return this.withOptions({width:t,height:r})}blur(t){return this.withOptions({blur:t})}sharpen(t){return this.withOptions({sharpen:t})}rect(t,r,n,s){return this.withOptions({rect:{left:t,top:r,width:n,height:s}})}format(t){return this.withOptions({format:t})}invert(t){return this.withOptions({invert:t})}orientation(t){return this.withOptions({orientation:t})}quality(t){return this.withOptions({quality:t})}forceDownload(t){return this.withOptions({download:t})}flipHorizontal(){return this.withOptions({flipHorizontal:!0})}flipVertical(){return this.withOptions({flipVertical:!0})}ignoreImageParams(){return this.withOptions({ignoreImageParams:!0})}fit(t){if(eh.indexOf(t)===-1)throw new Error(`Invalid fit mode "${t}"`);return this.withOptions({fit:t})}crop(t){if(th.indexOf(t)===-1)throw new Error(`Invalid crop mode "${t}"`);return this.withOptions({crop:t})}saturation(t){return this.withOptions({saturation:t})}auto(t){if(rh.indexOf(t)===-1)throw new Error(`Invalid auto mode "${t}"`);return this.withOptions({auto:t})}pad(t){return this.withOptions({pad:t})}vanityName(t){return this.withOptions({vanityName:t})}frame(t){if(t!==1)throw new Error(`Invalid frame value "${t}"`);return this.withOptions({frame:t})}url(){return Qd(this.options)}toString(){return this.url()}}function ch(e){let t=!1,r;return(...n)=>(t||(r=e(...n),t=!0),r)}const uh=e=>ch((...t)=>{console.warn(e.join(" "),...t)}),dh=uh(["The default export of @sanity/image-url has been deprecated. Use the named export `createImageUrlBuilder` instead."]);function hh(e){return function(t){return dh(),e(t)}}const fh=hh(oh),ph="8s8dcy9g",mh="production",on=Hd({projectId:ph,dataset:mh,useCdn:!1,apiVersion:"2023-05-03"});on&&fh(on);const vh=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[s,i]=g.useState("LOCAL");return g.useEffect(()=>{(async()=>{{console.log("[System] No Sanity Config found. Using Local Archives."),t(Ll),i("LOCAL"),n(!1);return}})()},[]),{logs:e,isLoading:r,source:s}},gh=()=>{const e=E(f=>f.blackBoxOpen),t=E(f=>f.currentLogId),r=E(f=>f.closeBlackBox),{playHover:n,playClick:s}=Me(),{logs:i,isLoading:a,source:o}=vh(),[c,u]=g.useState(null),[d,h]=g.useState(null);g.useEffect(()=>{!a&&e&&(t?u(t):!c&&i.length>0&&u(i[0]?.id))},[e,t,a,i]),g.useEffect(()=>{const f=b=>{b.key==="Escape"&&r()};return e&&window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,r]);const m=g.useMemo(()=>i?d?i.filter(f=>f.tags.includes(d)):i:[],[d,i]),p=g.useMemo(()=>{const f=new Set;return i&&i.forEach(b=>b.tags.forEach(w=>f.add(w))),Array.from(f)},[i]),v=i.find(f=>f.id===c);return e?l.jsx(ht,{children:e&&l.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md pointer-events-auto",onClick:r,children:l.jsxs(I.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-[95vw] max-w-6xl h-[85vh] flex flex-col md:flex-row overflow-hidden rounded-lg border border-cyan-500/30 bg-black shadow-2xl",onClick:f=>f.stopPropagation(),style:{boxShadow:"0 0 60px rgba(6, 182, 212, 0.2), inset 0 0 100px rgba(6, 182, 212, 0.05)"},children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none z-50 opacity-10",style:{background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.3) 2px, rgba(0,0,0,0.3) 4px)"}}),l.jsxs("div",{className:"absolute top-0 left-0 right-0 h-10 bg-gradient-to-b from-cyan-950/80 to-transparent border-b border-cyan-500/20 flex items-center justify-between px-4 z-40",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:""}),l.jsxs("span",{className:"text-cyan-300 font-mono text-xs tracking-widest",children:["BLACK BOX :: SYSTEM ARCHIVE v2.1",l.jsxs("span",{className:"ml-2 text-[10px] opacity-70",children:["[",a?"BOOTING...":`LINK: ${o}`,"]"]})]})]}),l.jsx("button",{onClick:()=>{s(),r()},onMouseEnter:n,className:"text-cyan-500/70 hover:text-cyan-300 transition-colors text-xl font-mono",children:""})]}),a?l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-cyan-500 font-mono",children:[l.jsx("div",{className:"text-xl animate-pulse mb-4",children:"ESTABLISHING UPLINK..."}),l.jsx("div",{className:"text-sm opacity-70",children:"Connecting to Satellite Database"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full md:w-72 border-b md:border-b-0 md:border-r border-cyan-500/20 pt-12 pb-4 flex flex-col bg-black/50 overflow-hidden",children:[l.jsxs("div",{className:"flex-1 overflow-y-auto px-4 custom-scrollbar",children:[l.jsxs("h3",{className:"text-cyan-400 font-mono text-xs tracking-widest mb-3 border-b border-cyan-500/20 pb-2",children:["ARCHIVE LOGS [",m.length,"]"]}),l.jsx("div",{className:"space-y-1",children:m.map(f=>l.jsxs("button",{onClick:()=>{s(),u(f.id)},onMouseEnter:n,className:`w-full text-left px-3 py-2 rounded border transition-all text-xs font-mono group ${c===f.id?"border-cyan-500 bg-cyan-500/10 text-cyan-300":"border-transparent hover:border-cyan-500/30 hover:bg-cyan-500/5 text-white/60 hover:text-white"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-cyan-500",children:c===f.id?"":""}),l.jsx("span",{className:"truncate group-hover:text-cyan-200 transition-colors",children:f.title})]}),l.jsx("div",{className:"text-[10px] text-white/40 mt-1 pl-5",children:f.date})]},f.id))})]}),l.jsxs("div",{className:"px-4 pt-4 border-t border-cyan-500/20",children:[l.jsx("h3",{className:"text-cyan-400 font-mono text-xs tracking-widest mb-2",children:"TAGS"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.jsx("button",{onClick:()=>{s(),h(null)},onMouseEnter:n,className:`px-2 py-0.5 text-[10px] font-mono rounded border transition-all ${d===null?"border-cyan-500 bg-cyan-500/20 text-cyan-300":"border-white/10 text-white/40 hover:text-white hover:border-white/30"}`,children:"ALL"}),p.slice(0,10).map(f=>l.jsxs("button",{onClick:()=>{s(),h(f)},onMouseEnter:n,className:`px-2 py-0.5 text-[10px] font-mono rounded border transition-all ${d===f?"border-cyan-500 bg-cyan-500/20 text-cyan-300":"border-white/10 text-white/40 hover:text-white hover:border-white/30"}`,style:d===f?{borderColor:Be[f]||"#06b6d4",color:Be[f]||"#06b6d4"}:{},children:["#",f]},f))]})]})]}),l.jsx("div",{className:"flex-1 pt-12 pb-6 px-6 overflow-y-auto custom-scrollbar",children:v?l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs("div",{className:"mb-6 border-b border-cyan-500/20 pb-4",children:[l.jsxs("div",{className:"text-cyan-500 font-mono text-[10px] tracking-widest mb-2",children:["LOG ENTRY: ",v.id?v.id.toUpperCase():"UNKNOWN"]}),l.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white font-orbitron mb-2",children:v.title}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs font-mono",children:[l.jsxs("span",{className:"text-white/40",children:["DATE: ",l.jsx("span",{className:"text-cyan-300",children:v.date})]}),l.jsx("div",{className:"flex gap-1",children:v.tags&&v.tags.map(f=>l.jsxs("span",{className:"px-2 py-0.5 rounded-full text-[10px] border",style:{borderColor:`${Be[f]||"#06b6d4"}50`,color:Be[f]||"#06b6d4",backgroundColor:`${Be[f]||"#06b6d4"}15`},children:["#",f]},f))})]}),l.jsx("p",{className:"text-white/60 text-sm mt-3 italic",children:v.summary})]}),l.jsx("div",{className:"prose prose-invert prose-cyan max-w-none pb-20",children:l.jsx(xh,{content:v.content})}),l.jsxs("div",{className:"mt-8 pt-4 border-t border-cyan-500/20 flex justify-between",children:[l.jsx(ln,{direction:"prev",logs:i,currentId:c,onNavigate:f=>{s(),u(f)}}),l.jsx(ln,{direction:"next",logs:i,currentId:c,onNavigate:f=>{s(),u(f)}})]})]}):l.jsx("div",{className:"flex items-center justify-center h-full text-white/30 font-mono text-sm",children:"[NO LOG SELECTED]"})})]}),l.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-lg",style:{boxShadow:"inset 0 0 150px rgba(6, 182, 212, 0.1)"}})]},"blackbox-content")},"blackbox-backdrop")}):null},xh=({content:e})=>{if(!e)return null;const t=e.split(`
`),r=[];let n=!1,s=[],i=!1,a=[];for(let o=0;o<t.length;o++){const c=t[o];if(c.startsWith("```")){n?(r.push(l.jsx("pre",{className:"bg-black/50 border border-cyan-500/20 rounded-lg p-4 overflow-x-auto my-4 text-left",children:l.jsx("code",{className:"text-xs md:text-sm font-mono text-cyan-300/90 whitespace-pre",children:s.join(`
`)})},`code-${o}`)),s=[],n=!1):n=!0;continue}if(n){s.push(c);continue}if(c.includes("|")&&c.trim().startsWith("|")){if(i||(i=!0,a=[]),c.includes("---"))continue;a.push(c.split("|").filter(u=>u.trim()).map(u=>u.trim()));continue}else i&&(r.push(l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full my-4 text-sm border-collapse min-w-[500px]",children:[l.jsx("thead",{children:l.jsx("tr",{className:"border-b border-cyan-500/30",children:a[0]?.map((u,d)=>l.jsx("th",{className:"text-left py-2 px-3 text-cyan-400 font-mono whitespace-nowrap",children:u},d))})}),l.jsx("tbody",{children:a.slice(1).map((u,d)=>l.jsx("tr",{className:"border-b border-white/10 hover:bg-white/5",children:u.map((h,m)=>l.jsx("td",{className:"py-2 px-3 text-white/70",children:h},m))},d))})]})},`table-${o}`)),i=!1,a=[]);if(!c.trim()){r.push(l.jsx("div",{className:"h-4"},`space-${o}`));continue}if(c.startsWith("## ")){r.push(l.jsx("h2",{className:"text-xl font-bold text-cyan-400 mt-6 mb-3 font-orbitron border-l-2 border-cyan-500 pl-3",children:c.slice(3)},`h2-${o}`));continue}if(c.startsWith("### ")){r.push(l.jsx("h3",{className:"text-lg font-bold text-white mt-4 mb-2",children:c.slice(4)},`h3-${o}`));continue}if(c.startsWith("> ")){r.push(l.jsx("blockquote",{className:"border-l-2 border-purple-500 pl-4 my-4 text-white/70 italic bg-purple-500/5 py-2 pr-4 rounded-r",children:Ze(c.slice(2))},`quote-${o}`));continue}if(c.match(/^(\d+)\. /)){r.push(l.jsxs("div",{className:"flex gap-2 text-white/80 my-1 ml-2",children:[l.jsxs("span",{className:"text-cyan-500 font-mono",children:[c.match(/^(\d+)/)[1],"."]}),l.jsx("span",{children:Ze(c.replace(/^\d+\. /,""))})]},`li-${o}`));continue}if(c.startsWith("- ")){r.push(l.jsxs("div",{className:"flex gap-2 text-white/80 my-1 ml-2",children:[l.jsx("span",{className:"text-cyan-500",children:""}),l.jsx("span",{children:Ze(c.slice(2))})]},`li-${o}`));continue}if(c==="---"){r.push(l.jsx("hr",{className:"my-6 border-cyan-500/20"},`hr-${o}`));continue}r.push(l.jsx("p",{className:"text-white/80 leading-relaxed my-2",children:Ze(c)},`p-${o}`))}return l.jsx(l.Fragment,{children:r})},Ze=e=>e.split(/(`[^`]+`|\*\*[^*]+\*\*|\*[^*]+\*)/).map((r,n)=>r.startsWith("`")&&r.endsWith("`")?l.jsx("code",{className:"bg-cyan-500/10 text-cyan-300 px-1 rounded text-sm font-mono",children:r.slice(1,-1)},n):r.startsWith("**")&&r.endsWith("**")?l.jsx("strong",{className:"text-white font-bold",children:r.slice(2,-2)},n):r.startsWith("*")&&r.endsWith("*")?l.jsx("em",{className:"italic text-white/70",children:r.slice(1,-1)},n):r),ln=({direction:e,logs:t,currentId:r,onNavigate:n})=>{if(!t)return null;const s=t.findIndex(o=>o.id===r),i=e==="prev"?s-1:s+1,a=t[i];return a?l.jsxs("button",{onClick:()=>n(a.id),className:"flex items-center gap-2 text-xs font-mono text-white/50 hover:text-cyan-400 transition-colors group",children:[e==="prev"&&l.jsx("span",{className:"text-cyan-500 group-hover:-translate-x-1 transition-transform",children:""}),l.jsx("span",{className:"hidden md:inline",children:a.title}),l.jsx("span",{className:"md:hidden",children:e==="prev"?"PREV":"NEXT"}),e==="next"&&l.jsx("span",{className:"text-cyan-500 group-hover:translate-x-1 transition-transform",children:""})]}):l.jsx("div",{})};class bh extends V.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Uncaught error:",t,r),this.setState({errorInfo:r})}render(){return this.state.hasError?l.jsxs("div",{style:{padding:"20px",color:"#ff0033",backgroundColor:"black",height:"100vh",fontFamily:"monospace"},children:[l.jsx("h1",{children:"SYSTEM CRITICAL FAILURE"}),l.jsx("h2",{style:{color:"white"},children:"Metaverse OS has encountered a fatal error."}),l.jsxs("details",{style:{whiteSpace:"pre-wrap",marginTop:"20px",color:"#888"},children:[this.state.error&&this.state.error.toString(),l.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),l.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",backgroundColor:"#333",color:"white",border:"1px solid #ff0033",cursor:"pointer"},children:"REBOOT SYSTEM"})]}):this.props.children}}function yh(){const e=E(t=>t.currentScene);return g.useEffect(()=>{if(e!=="boot"){const t=new URL(window.location);t.searchParams.set("scene",e),window.history.pushState({},"",t)}else{const t=new URL(window.location);t.searchParams.delete("scene"),window.history.replaceState({},"",t)}},[e]),l.jsx(yn,{children:l.jsx(bh,{children:l.jsxs("div",{className:"w-full h-screen bg-background text-text selection:bg-primary/30 selection:text-white cursor-none overflow-hidden",children:[l.jsxs(Qi,{children:[l.jsx("title",{children:"Yesol Heo | Cinematic Metaverse Director"}),l.jsx("meta",{name:"description",content:"A Cinematic 3D Portfolio of Yesol Heo, Metaverse & XR Project Manager."})]}),l.jsx(Jo,{}),l.jsx(el,{}),l.jsx(g.Suspense,{fallback:l.jsx("div",{className:"flex items-center justify-center h-screen text-white font-mono text-xl animate-pulse tracking-widest",children:ye.SYSTEM.LOADING}),children:l.jsx($o,{})}),l.jsx(Zo,{}),e==="profile"&&l.jsx(jl,{}),l.jsx(Pl,{}),l.jsx(gh,{})]})})})}Si.createRoot(document.getElementById("root")).render(l.jsx(yh,{}));export{C as B,Ah as C,To as E,ye as L,Mh as N,Ao as V,Ch as a,Me as b,Rh as c,_o as d,os as i,Ih as r,E as u,So as w};
