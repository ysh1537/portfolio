import{s as D,t as n,w as M,C,z as e,a1 as H,a2 as X,a3 as v,l as I,a4 as E,K as S,J as Y,m as R,a5 as K,a6 as T,a7 as z,a8 as F,a0 as J,a9 as U,aa as O,b as $,ab as V,ac as q,ad as Q,ae as k}from"./three-B9-2A0-2.js";import{a as L,L as b,u as g,r as Z,b as ee,C as se}from"./index-SHItErlE.js";import"./vendor-CqO7gtIP.js";import"./animation-DsH0_-YU.js";import"./postprocessing-Qbs0T82m.js";const te=D.memo(({isActive:r,timeRef:s})=>{const o=n.useRef(),t=n.useRef(),a=n.useRef(),[m,d]=n.useState(!1),{playHover:c,playClick:h}=L(),p=r!==void 0?r:m;return M((l,u)=>{const i=s?.current!==void 0?s.current:l.clock.getElapsedTime();if(o.current){const x=p?1.6:1;o.current.scale.lerp(new S(x,x,x),u*4)}if(t.current&&(t.current.rotation.y=i*.1),a.current){const x=p?1.4:1.2;a.current.scale.setScalar(x+Math.sin(i*3)*.05),a.current.rotation.z-=.01}}),new C(b.SECTORS.PROFILE.visual.color),new C(b.SECTORS.PROFILE.visual.color).multiplyScalar(1.2),e.jsxs("group",{ref:o,onPointerEnter:l=>{l.stopPropagation(),d(!0),c(),document.body.style.cursor="pointer"},onPointerLeave:()=>{d(!1),document.body.style.cursor="auto"},children:[e.jsx(H,{ref:t,args:[5.5,128,128],onClick:l=>{l.stopPropagation(),h(),g.getState().setScene("profile")},onPointerOver:()=>d(!0),onPointerOut:()=>d(!1),children:e.jsx(X,{color:"#00f2ff",emissive:"#0066ff",emissiveIntensity:4,distort:.3,speed:2,roughness:0,metalness:1,toneMapped:!1})}),e.jsx("pointLight",{distance:100,intensity:30,color:"#00f2ff",decay:2}),e.jsxs("mesh",{ref:a,scale:[1.15,1.15,1.15],children:[e.jsx("sphereGeometry",{args:[5.5,64,64]}),e.jsx("meshBasicMaterial",{color:"#0066ff",transparent:!0,opacity:.25,side:I,blending:v,depthWrite:!1})]}),e.jsxs("mesh",{scale:[1.6,1.6,1.6],children:[e.jsx("sphereGeometry",{args:[5.5,64,32]}),e.jsx("meshBasicMaterial",{color:"#0033ff",transparent:!0,opacity:.15,side:I,blending:v,depthWrite:!1})]}),e.jsx(E,{count:120,scale:20,size:20,speed:1.2,opacity:.7,color:"#00f2ff",noise:3}),e.jsx(E,{count:40,scale:15,size:35,speed:.8,opacity:.4,color:"#ffffff",noise:2})]})}),re=({color:r,isActive:s,timeRef:o})=>{const t=n.useRef(),a=n.useRef(),m=n.useRef();return M((d,c)=>{const h=o?.current!==void 0?o.current:d.clock.getElapsedTime(),p=s?1.6:1;t.current.scale.lerp(new S(p,p,p),c*4),t.current.rotation.y=h*.1,a.current.rotation.x=-h*.5,m.current.rotation.y=h*.3,a.current.scale.setScalar(.4+Math.sin(h*3)*.05)}),e.jsx(T,{speed:1.5,rotationIntensity:.5,floatIntensity:1,children:e.jsxs("group",{ref:t,children:[e.jsxs("mesh",{ref:a,children:[e.jsx("icosahedronGeometry",{args:[2,2]}),e.jsx("meshStandardMaterial",{color:r,emissive:r,emissiveIntensity:20,transparent:!0,opacity:.9})]}),e.jsxs("mesh",{ref:m,children:[e.jsx("octahedronGeometry",{args:[4.2,0]}),e.jsx(z,{backside:!0,backsideThickness:15,thickness:10,roughness:.05,transmission:1,ior:2.2,chromaticAberration:25,anisotropy:10,distortion:.2,distortionScale:.5,temporalDistortion:.1,color:r,background:new C("#000000")})]}),e.jsxs("mesh",{ref:m,scale:1.01,children:[e.jsx("octahedronGeometry",{args:[4.2,0]}),e.jsx("meshBasicMaterial",{color:r,wireframe:!0,transparent:!0,opacity:.3,blending:v})]}),e.jsx(E,{count:40,scale:12,size:15,speed:1,opacity:.6,color:r})]})})},ae=({color:r,isActive:s,timeRef:o})=>{const t=n.useRef(),a=n.useRef(),m=n.useMemo(()=>Array.from({length:42}).map(()=>Math.random()*Math.PI*2),[]);return M((d,c)=>{const h=o?.current!==void 0?o.current:d.clock.getElapsedTime(),p=s?1.6:1;t.current.scale.lerp(new S(p,p,p),c*4),t.current.rotation.y=h*.1,a.current&&a.current.children.forEach((l,u)=>{if(l.material){const i=1+Math.sin(h*3+m[u])*.3;l.scale.setScalar(i),l.material.emissiveIntensity=5+Math.sin(h*5+m[u])*10}})}),e.jsxs("group",{ref:t,children:[e.jsxs("mesh",{children:[e.jsx("icosahedronGeometry",{args:[2.5,1]}),e.jsx("meshBasicMaterial",{color:"#000000"})]}),e.jsxs("mesh",{children:[e.jsx("icosahedronGeometry",{args:[3.5,2]}),e.jsx("meshStandardMaterial",{color:r,emissive:r,emissiveIntensity:2,wireframe:!0,transparent:!0,opacity:.4})]}),e.jsx("group",{ref:a,children:e.jsxs(K,{args:[3.6,1],children:[e.jsx("meshBasicMaterial",{visible:!1}),Array.from({length:42}).map((d,c)=>e.jsxs("mesh",{position:new S().setFromSphericalCoords(4,Math.acos(1-2*(c/42)),Math.PI*2*c/1.618),children:[e.jsx("boxGeometry",{args:[.25,.25,.25]}),e.jsx("meshStandardMaterial",{color:r,emissive:r,emissiveIntensity:10})]},c))]})}),e.jsxs("mesh",{rotation:[Math.PI/4,0,0],children:[e.jsx("icosahedronGeometry",{args:[4.2,1]}),e.jsx("meshStandardMaterial",{color:r,emissive:r,emissiveIntensity:1,wireframe:!0,transparent:!0,opacity:.15})]}),e.jsx(E,{count:60,scale:10,size:5,speed:2,opacity:.8,color:r})]})},oe=({color:r,isActive:s,timeRef:o})=>{const t=n.useRef(),a=n.useRef(),m=n.useRef(),d=25,c=n.useMemo(()=>Array.from({length:d}).map((h,p)=>({radius:6+p*.15,opacity:Math.random()*.3+.1,speed:Math.random()*.05+.02})),[]);return M((h,p)=>{const l=o?.current!==void 0?o.current:h.clock.getElapsedTime(),u=s?1.6:1;t.current.scale.lerp(new S(u,u,u),p*4),t.current.rotation.y=l*.05,a.current.rotation.y=-l*.1,m.current&&m.current.children.forEach((i,x)=>{i.rotation.z=l*c[x].speed})}),e.jsxs("group",{ref:t,children:[e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[4.5,64,64]}),e.jsx("meshStandardMaterial",{color:r,roughness:.8,metalness:.1,emissive:r,emissiveIntensity:.5})]}),e.jsxs("mesh",{scale:1.03,ref:a,children:[e.jsx("sphereGeometry",{args:[4.5,32,16]}),e.jsx("meshStandardMaterial",{color:"#fcd34d",transparent:!0,opacity:.25,wireframe:!0})]}),e.jsx("group",{ref:m,rotation:[Math.PI/2.5,.4,0],children:c.map((h,p)=>e.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[h.radius,h.radius+.02,128]}),e.jsx("meshBasicMaterial",{color:r,transparent:!0,opacity:h.opacity,side:R})]},p))}),e.jsxs("mesh",{scale:1.2,children:[e.jsx("sphereGeometry",{args:[4.5,32,32]}),e.jsx("meshBasicMaterial",{color:r,transparent:!0,opacity:.05,side:I})]}),e.jsx(E,{count:80,scale:18,size:4,speed:.5,opacity:.6,color:"#fde68a"})]})},ne=({color:r,isActive:s,timeRef:o})=>{const t=n.useRef(),a=n.useRef(),[m,d]=n.useState([0,0,0]),[c,h]=n.useState(1),p=n.useRef(1),l=n.useMemo(()=>Array.from({length:40}).map(()=>({pos:[Math.random()-.5,Math.random()-.5,Math.random()-.5],rot:[Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI],scale:Math.random()*.5+.2})),[]);return M((u,i)=>{const x=o?.current!==void 0?o.current:u.clock.getElapsedTime();t.current.rotation.y=x*.2,Math.random()>.96?(d([(Math.random()-.5)*.4,(Math.random()-.5)*.4,(Math.random()-.5)*.4]),h(1+(Math.random()-.5)*.2)):Math.random()>.9&&(d([0,0,0]),h(1));const P=s?1.6:1;p.current=Y.lerp(p.current,P,i*4);const B=c*p.current;t.current.position.set(...m),t.current.scale.setScalar(B)}),e.jsxs("group",{ref:t,children:[e.jsxs("mesh",{children:[e.jsx("icosahedronGeometry",{args:[3.8,0]}),e.jsx("meshStandardMaterial",{color:"#000000"})]}),e.jsxs("mesh",{scale:.98,children:[e.jsx("icosahedronGeometry",{args:[3.8,1]}),e.jsx("meshStandardMaterial",{color:r,emissive:r,emissiveIntensity:15,wireframe:!0})]}),e.jsx("group",{ref:a,children:l.map((u,i)=>e.jsxs("mesh",{position:[u.pos[0]*8,u.pos[1]*6,u.pos[2]*8],rotation:u.rot,scale:u.scale,children:[e.jsx("boxGeometry",{args:[.5,.5,.5]}),e.jsx("meshStandardMaterial",{color:r,emissive:r,emissiveIntensity:5})]},i))}),e.jsxs("mesh",{scale:1.2,children:[e.jsx("sphereGeometry",{args:[3.8,4,32]}),e.jsx("meshBasicMaterial",{color:r,wireframe:!0,transparent:!0,opacity:.2})]}),e.jsx(E,{count:100,scale:10,size:15,speed:30,opacity:1,color:r,noise:10})]})},ie=({type:r,color:s,isActive:o,timeRef:t})=>{switch(r){case"lab01":return e.jsx(re,{color:s,isActive:o,timeRef:t});case"lab02":return e.jsx(ae,{color:s,isActive:o,timeRef:t});case"lab03":return e.jsx(oe,{color:s,isActive:o,timeRef:t});case"lab04":return e.jsx(ne,{color:s,isActive:o,timeRef:t});default:return e.jsx(H,{args:[1],children:e.jsx("meshStandardMaterial",{color:s})})}},A=({korName:r,engName:s,color:o,hovered:t})=>e.jsx(J,{transform:!0,center:!0,distanceFactor:12,style:{pointerEvents:"none"},children:e.jsxs("div",{className:`flex flex-col items-center transition-all duration-700 ${t?"scale-110 opacity-100":"scale-95 opacity-70"}`,children:[e.jsx("div",{className:"w-[1px] mb-2 bg-gradient-to-t from-white to-transparent transition-all duration-700",style:{height:t?"100px":"60px",opacity:t?.8:.3}}),e.jsxs("div",{className:`relative px-8 py-4 bg-black/60 backdrop-blur-md border border-white/10 transition-all duration-700 ${t?"border-white/50 shadow-[0_0_30px_rgba(255,255,255,0.2)]":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 border-t border-l border-white/50"}),e.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 border-t border-r border-white/50"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-3 h-3 border-b border-l border-white/50"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 border-b border-r border-white/50"}),e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-[28px] md:text-[32px] font-sans font-bold tracking-[0.2em] text-white leading-tight whitespace-nowrap mb-1",style:{textShadow:t?`0 0 20px ${o}`:"none"},children:r}),e.jsx("span",{className:"text-[11px] md:text-[13px] font-orbitron font-bold tracking-[0.4em] whitespace-nowrap uppercase transition-colors duration-300",style:{color:t?o:"rgba(255, 255, 255, 0.8)"},children:s})]})]})]})}),ce=n.memo(({lab:r,config:s,activeScene:o,timeRef:t})=>{n.useRef();const a=n.useRef(),{playClick:m,playHover:d}=L(),[c,h]=n.useState(!1),p=g(u=>u.openMissionModal),l=c||o===s.target;return n.useEffect(()=>(Z(s.target,a),()=>ee(s.target)),[s.target]),M(()=>{const u=(t?.current||0)*s.speedOffset,i=Math.cos(u)*s.xRadius,x=Math.sin(u)*s.zRadius;a.current.position.set(i,0,x)}),e.jsxs("group",{rotation:s.inclination,children:[e.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[s.xRadius-.05,s.xRadius+.05,128]}),e.jsx("meshBasicMaterial",{color:s.color,transparent:!0,opacity:.15,side:R})]}),e.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[s.xRadius-.1,s.xRadius+.1,128]}),e.jsx("meshBasicMaterial",{color:s.color,transparent:!0,opacity:.05,side:R})]}),e.jsxs("group",{ref:a,onClick:u=>{u.stopPropagation(),m();const i=new S;a.current.getWorldPosition(i),p({lab:r,config:s,warpPos:[i.x,i.y,i.z]})},onPointerEnter:()=>{h(!0),d(),document.body.style.cursor="pointer"},onPointerLeave:()=>{h(!1),document.body.style.cursor="auto"},children:[e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[7,32,32]}),e.jsx("meshBasicMaterial",{transparent:!0,opacity:0,depthWrite:!1,colorWrite:!1})]}),e.jsx(ie,{type:s.target,color:s.color,isActive:l,timeRef:t}),e.jsxs("mesh",{visible:l,rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[s.target==="lab03"?11:5.5,s.target==="lab03"?11.5:6,64]}),e.jsx("meshBasicMaterial",{color:s.color,transparent:!0,opacity:.6,side:R,blending:v})]}),e.jsxs("mesh",{visible:l,rotation:[-Math.PI/2,0,0],scale:[1.1,1.1,1.1],children:[e.jsx("ringGeometry",{args:[s.target==="lab03"?11:5.5,s.target==="lab03"?11.1:5.6,64]}),e.jsx("meshBasicMaterial",{color:s.color,transparent:!0,opacity:.3,side:R,blending:v})]}),e.jsx(F,{position:[0,-14.5,0],children:e.jsx(A,{korName:s.korName,engName:s.engName,color:s.color,hovered:l})})]})]})}),le=()=>{const r=g(d=>d.currentScene),s=g(d=>d.missionModalData),[o,t]=n.useState(!1),a=n.useRef(0);M((d,c)=>{s||(a.current+=c)});const m=n.useMemo(()=>[{lab:b.SECTORS.LAB_01,config:{target:"lab01",color:b.SECTORS.LAB_01.visual.color,xRadius:18,zRadius:18,inclination:[0,0,0],speedOffset:.6,korName:"셰이더 랩",engName:"THE PRISM"}},{lab:b.SECTORS.LAB_02,config:{target:"lab02",color:b.SECTORS.LAB_02.visual.color,xRadius:28,zRadius:28,inclination:[Math.PI/12,0,0],speedOffset:.4,korName:"기술 생태계",engName:"TECH LIFE"}},{lab:b.SECTORS.LAB_03,config:{target:"lab03",color:b.SECTORS.LAB_03.visual.color,xRadius:40,zRadius:40,inclination:[-Math.PI/16,0,0],speedOffset:.25,korName:"오디오 랩",engName:"THE RESONANCE"}},{lab:b.SECTORS.LAB_04,config:{target:"lab04",color:b.SECTORS.LAB_04.visual.color,xRadius:54,zRadius:54,inclination:[Math.PI/10,0,Math.PI/20],speedOffset:.15,korName:"방명록",engName:"GUESTBOOK"}}],[]);return e.jsxs("group",{children:[e.jsxs("group",{onClick:()=>g.getState().setScene("profile"),onPointerEnter:()=>{t(!0),document.body.style.cursor="pointer"},onPointerLeave:()=>{t(!1),document.body.style.cursor="auto"},children:[e.jsx(te,{isActive:o,timeRef:a}),e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[10,32,32]}),e.jsx("meshBasicMaterial",{transparent:!0,opacity:0,depthWrite:!1,colorWrite:!1})]}),e.jsxs("mesh",{visible:o,rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[8.5,9,64]}),e.jsx("meshBasicMaterial",{color:"#00f2ff",transparent:!0,opacity:.6,side:R,blending:v})]}),e.jsxs("mesh",{visible:o,rotation:[-Math.PI/2,0,0],scale:[1.05,1.05,1.05],children:[e.jsx("ringGeometry",{args:[8.5,8.6,64]}),e.jsx("meshBasicMaterial",{color:"#00f2ff",transparent:!0,opacity:.3,side:R,blending:v})]}),e.jsx(F,{position:[0,-16.5,0],children:e.jsx(A,{korName:"프로필",engName:"IDENTITY",color:"#00f2ff",hovered:!0})})]}),m.map((d,c)=>e.jsx(ce,{lab:d.lab,config:d.config,activeScene:r,timeRef:a},c))]})},de=({position:r,label:s})=>e.jsxs("group",{position:r,children:[e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[.05,16,16]}),e.jsx("meshBasicMaterial",{color:"#ffffff",toneMapped:!1})]}),e.jsxs("mesh",{scale:[1.5,1.5,1.5],children:[e.jsx("sphereGeometry",{args:[.05,16,16]}),e.jsx("meshBasicMaterial",{color:"#06b6d4",transparent:!0,opacity:.3,toneMapped:!1})]}),e.jsx(T,{speed:2,rotationIntensity:0,floatIntensity:.5,children:e.jsx(O,{position:[.2,.2,0],fontSize:.2,color:"rgba(255,255,255,0.5)",anchorX:"left",anchorY:"bottom",children:s})})]}),N=({points:r,color:s="#06b6d4"})=>{const o=n.useMemo(()=>r.map(t=>new S(...t.position)),[r]);return e.jsxs("group",{children:[e.jsx(U,{points:o,color:s,opacity:.1,transparent:!0,lineWidth:1}),r.map((t,a)=>e.jsx(de,{position:t.position,label:t.label},a))]})},he=()=>{const r=n.useRef(),s=g(a=>a.performanceMode);if(M(a=>{r.current&&(r.current.rotation.y=a.clock.getElapsedTime()*.01)}),s==="low")return null;const o=[{label:"REACT",position:[-15,5,-10]},{label:"THREE.JS",position:[-12,8,-8]},{label:"NEXT.JS",position:[-10,4,-12]},{label:"TYPESCRIPT",position:[-14,2,-9]}],t=[{label:"WEBGL",position:[10,6,-15]},{label:"GLSL",position:[13,3,-12]},{label:"BLENDER",position:[8,-2,-10]},{label:"R3F",position:[15,8,-14]}];return e.jsxs("group",{ref:r,children:[e.jsx(N,{points:o,color:"#06b6d4"}),e.jsx(N,{points:t,color:"#7c3aed"})]})},ue=({position:r=[16,6,8]})=>{const s=n.useRef(),o=n.useRef(),t=n.useRef(),a=n.useRef(),m=g(f=>f.openBlackBox),d=g(f=>f.setHoverState),c=g(f=>f.performanceMode),{playHover:h,playClick:p}=L(),[l,u]=n.useState(!1),i=c==="high";M(f=>{const y=f.clock.elapsedTime;if(s.current){const j=l?4:1;s.current.scale.lerp(new S(j,j,j),.1)}if(o.current&&(o.current.rotation.x+=.005,o.current.rotation.y+=.008),t.current){const j=Math.sin(y*2)*.1+1;t.current.scale.setScalar(j)}if(a.current){const w=y*1.5%1,_=1.5+w*2,W=.6*(1-w);a.current.scale.setScalar(_),a.current.material.opacity=W}});const x=f=>{f.stopPropagation(),d(!0),u(!0),h(),document.body.style.cursor="pointer"},P=()=>{d(!1),u(!1),document.body.style.cursor="none"},B=f=>{f.stopPropagation(),p(),m()},G=n.useMemo(()=>{const f=[];for(let y=0;y<6;y++){const j=y/6*Math.PI*2;f.push({start:[Math.cos(j)*1.5,0,Math.sin(j)*1.5],end:[Math.cos(j)*3,(Math.random()-.5)*2,Math.sin(j)*3]})}return f},[]);return e.jsx("group",{ref:s,position:r,children:e.jsxs(T,{speed:1.5,rotationIntensity:.3,floatIntensity:.5,children:[e.jsxs("mesh",{onClick:B,onPointerOver:x,onPointerOut:P,children:[e.jsx("boxGeometry",{args:[5,5,5]}),e.jsx("meshBasicMaterial",{transparent:!0,opacity:0,depthWrite:!1,colorWrite:!1})]}),e.jsxs("mesh",{visible:l,rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[3,3.2,64]}),e.jsx("meshBasicMaterial",{color:"#00ffff",transparent:!0,opacity:.6,side:R,blending:v})]}),e.jsxs("mesh",{ref:o,children:[e.jsx("boxGeometry",{args:[1.5,1.5,1.5]}),i?e.jsx(z,{backside:!0,samples:8,resolution:256,transmission:.9,roughness:.1,thickness:.5,ior:1.5,chromaticAberration:.1,color:"#06b6d4"}):e.jsx("meshStandardMaterial",{color:"#06b6d4",transparent:!0,opacity:.8,metalness:.9,roughness:.1})]}),e.jsxs("mesh",{children:[e.jsx("boxGeometry",{args:[.5,.5,.5]}),e.jsx("meshBasicMaterial",{color:"#00ffff"})]}),e.jsxs("mesh",{ref:t,children:[e.jsx("sphereGeometry",{args:[1.8,16,16]}),e.jsx("meshBasicMaterial",{color:"#06b6d4",transparent:!0,opacity:.15,side:I})]}),e.jsxs("mesh",{ref:a,children:[e.jsx("sphereGeometry",{args:[1,32,32]}),e.jsx("meshBasicMaterial",{color:"#00ffff",transparent:!0,opacity:0,side:R})]}),i&&G.map((f,y)=>e.jsx(me,{start:f.start,end:f.end,delay:y*.2},y)),e.jsx(O,{position:[0,-2.5,0],fontSize:.3,color:"#06b6d4",anchorX:"center",anchorY:"middle",children:"BLACK BOX"}),e.jsx(O,{position:[0,-3,0],fontSize:.15,color:"#06b6d4",anchorX:"center",anchorY:"middle",fillOpacity:.6,children:"[CLICK TO ACCESS ARCHIVE]"})]})})},me=({start:r,end:s,delay:o})=>{const t=n.useRef();M(d=>{if(t.current){const c=Math.sin(d.clock.elapsedTime*3+o)>0;t.current.visible=c}});const a=n.useMemo(()=>[new S(...r),new S(...s)],[r,s]),m=n.useMemo(()=>new $().setFromPoints(a),[a]);return e.jsx("line",{ref:t,geometry:m,children:e.jsx("lineBasicMaterial",{color:"#06b6d4",transparent:!0,opacity:.4})})},pe=({count:r=500})=>{const s=n.useRef(),t=g(c=>c.performanceMode)==="high",a=t?r:Math.floor(r/3),m=n.useMemo(()=>new V,[]),d=n.useMemo(()=>{const c=[];for(let h=0;h<a;h++){const p=Math.random()*100,l=20+Math.random()*100,u=.01+Math.random()/200,i=-50+Math.random()*100,x=-50+Math.random()*100,P=-50+Math.random()*100;c.push({t:p,factor:l,speed:u,xFactor:i,yFactor:x,zFactor:P,mx:0,my:0})}return c},[a]);return M(c=>{if(!s.current)return;const h=c.pointer.x*c.viewport.width/2,p=c.pointer.y*c.viewport.height/2;d.forEach((l,u)=>{let{t:i,factor:x,speed:P,xFactor:B,yFactor:G,zFactor:f}=l;i=l.t+=P/2;const y=Math.cos(i)+Math.sin(i*1)/10,j=Math.sin(i)+Math.cos(i*2)/10,w=Math.cos(i);l.mx+=(h-l.mx)*.01,l.my+=(p-l.my)*.01,m.position.set(l.mx/10+y+B+Math.cos(i/10*x)+Math.sin(i*1)*x/10,l.my/10+j+G+Math.sin(i/10*x)+Math.cos(i*2)*x/10,j+f+Math.cos(i/10*x)+Math.sin(i*3)*x/10),m.scale.setScalar(w*.5+.5),m.rotation.set(w*5,w*5,w*5),m.updateMatrix(),s.current.setMatrixAt(u,m.matrix)}),s.current.instanceMatrix.needsUpdate=!0}),e.jsxs("instancedMesh",{ref:s,args:[null,null,a],children:[e.jsx("dodecahedronGeometry",{args:[.05,0]})," ",e.jsx("meshBasicMaterial",{color:t?"#a5f3fc":"#ffffff",transparent:!0,opacity:.6,blending:v})]})},Me=()=>{const s=g(o=>o.performanceMode)==="high";return e.jsxs("group",{position:[0,-1,0],children:[s&&e.jsx(se,{}),s&&e.jsx(pe,{count:800}),e.jsx(q,{preset:"city"}),e.jsx(Q,{radius:300,depth:60,count:s?15e3:1500,factor:s?7:5,saturation:.9,fade:!0,speed:s?.3:0}),e.jsx(E,{count:s?1e3:50,scale:50,size:s?3:1.5,speed:s?.2:0,opacity:.5,color:"#88ccff",noise:.3}),e.jsx("fog",{attach:"fog",args:["#020208",30,90]}),s&&e.jsxs(e.Fragment,{children:[e.jsx(k,{opacity:.3,seed:10,position:[35,5,-40],speed:.2,color:"#5b21b6",segments:30,bounds:[15,3,3],volume:20}),e.jsx(k,{opacity:.25,seed:20,position:[-35,-5,-40],speed:.15,color:"#0e7490",segments:30,bounds:[15,3,3],volume:20}),e.jsx(k,{opacity:.1,seed:30,position:[0,20,-50],speed:.1,color:"#374151",segments:10,bounds:[20,2,2],volume:30})]}),e.jsx(le,{}),s&&e.jsx(he,{}),e.jsx(ue,{position:[28,10,-20]}),s?e.jsxs(e.Fragment,{children:[e.jsx("spotLight",{position:[-20,20,20],angle:.25,penumbra:1,intensity:14,color:"#22d3ee",castShadow:!0}),e.jsx("pointLight",{position:[20,10,20],intensity:4,color:"#c084fc",distance:50}),e.jsx("spotLight",{position:[0,10,-30],angle:.6,penumbra:.5,intensity:25,color:"#4f46e5",distance:100})]}):e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("directionalLight",{position:[10,10,5],intensity:1.5,color:"#88ccff"})]})]})};export{Me as default};
