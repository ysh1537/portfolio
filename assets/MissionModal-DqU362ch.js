import{I as w,$ as g,t as j,z as e}from"./three-B9-2A0-2.js";import{u as h,a as v}from"./index-SHItErlE.js";import{u as y}from"./useInventory-D_1hzwLu.js";import{A as E,m as b}from"./animation-DsH0_-YU.js";import"./vendor-CqO7gtIP.js";import"./postprocessing-Qbs0T82m.js";const u={mission_01:{id:"mission_01",sectorId:"LAB-01",title:"Genesis Recovery",description:"Recover the lost Neural Shard from the Genesis Sector to stabilize the timeline.",type:"collection",requirements:{items:["fragment_01"]},reward:{xp:500,badge:"Genesis Pioneer",message:"Timeline Stabilization: 25% Complete."}},mission_02:{id:"mission_02",sectorId:"LAB-02",title:"Physics Defier",description:"Find the Graviton Core hiding in the Zero-G environment.",type:"collection",requirements:{items:["artifact_gravity"]},reward:{xp:750,badge:"Zero-G Master",message:"Gravity Systems: Calibrated."}},mission_03:{id:"mission_03",sectorId:"LAB-03",title:"Void Listener",description:"Capture the Void Frequency essence near the Gas Giant.",type:"collection",requirements:{items:["essence_void"]},reward:{xp:1e3,badge:"Void Walker",message:"Auditory Sensors: Max Sensitivity."}},mission_04:{id:"mission_04",sectorId:"LAB-04",title:"System Debugger",description:"Retrieve the Corrupted Key to unlock the hidden archives.",type:"collection",requirements:{items:["glitch_key"]},reward:{xp:1500,badge:"The Architect",message:"Access Level: ADMINISTRATOR."}}},k=w(g((l,o)=>({completedMissions:[],completeMission:a=>{const n=o().completedMissions;return n.includes(a)?!1:(console.log(`[Mission] Completed: ${u[a]?.title}`),l({completedMissions:[...n,a]}),!0)},isMissionComplete:a=>o().completedMissions.includes(a),checkRequirements:(a,n)=>{const c=u[a];return c?(c.requirements.items||[]).every(d=>n.includes(d)):!1},getMissionsBySector:a=>Object.values(u).filter(n=>n.sectorId===a),resetMissions:()=>l({completedMissions:[]})}),{name:"portfolio-mission-storage"})),M=({sectorId:l,color:o})=>{const{getMissionsBySector:a,isMissionComplete:n,completeMission:c,checkRequirements:x}=k(),{items:m}=y(),d=a(l);return j.useEffect(()=>{d.forEach(s=>{n(s.id)||x(s.id,m)&&c(s.id)})},[m,d,x,c,n]),d.length===0?e.jsx("div",{className:"text-[10px] font-mono text-white/30 italic py-2",children:"NO ACTIVE MISSIONS IN THIS SECTOR"}):e.jsx("div",{className:"space-y-2",children:d.map(s=>{const i=n(s.id);return e.jsxs("div",{className:`p-3 rounded border ${i?"bg-white/10 border-emerald-500/50":"bg-black/40 border-white/10"} transition-colors`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("div",{className:`text-xs font-bold font-orbitron ${i?"text-emerald-400":"text-white/70"}`,children:i?`✓ ${s.title}`:`[ ] ${s.title}`}),i&&e.jsx("span",{className:"text-[9px] font-mono text-emerald-300 bg-emerald-900/40 px-1.5 rounded",children:"COMPLETED"})]}),e.jsx("div",{className:"text-[10px] text-white/50 font-mono mb-2",children:s.description}),e.jsx("div",{className:"flex gap-2 text-[9px] font-mono uppercase text-white/30",children:s.requirements.items?.map(p=>e.jsxs("span",{className:m.includes(p)?"text-emerald-500 line-through":"",children:["- REQ: ",p]},p))}),e.jsxs("div",{className:"mt-2 text-[9px] font-mono flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-500/70",children:"REWARD:"}),e.jsx("span",{className:"text-white/60",children:s.reward.badge})]})]},s.id)})})},R=()=>{const l=h(t=>t.missionModalData),o=h(t=>t.closeMissionModal),a=h(t=>t.warpTo),{playHover:n,playClick:c}=v(),x=h(t=>t.lab01Config),m=h(t=>t.lab02Config),d=h(t=>t.lab03Config);if(j.useEffect(()=>{const t=f=>{f.key==="Escape"&&o()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[o]),!l)return null;const{lab:s,config:i,warpPos:p}=l,r=s.details||{},N=()=>{c(),o(),a(i.target,p)};return e.jsx(E,{children:l&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm pointer-events-auto",onClick:o,children:e.jsxs(b.div,{initial:{scale:.85,opacity:0,y:30},animate:{scale:1,opacity:1,y:0},exit:{scale:.85,opacity:0,y:30},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-[90vw] max-w-4xl max-h-[85vh] flex flex-col md:flex-row overflow-hidden rounded-2xl border border-white/10 bg-black/95 shadow-2xl",onClick:t=>t.stopPropagation(),style:{boxShadow:`0 0 60px ${i.color}30, inset 0 0 30px ${i.color}10`},children:[e.jsxs("div",{className:"w-full md:w-1/3 border-b md:border-b-0 md:border-r border-white/10 p-6 md:p-8 flex flex-col relative overflow-hidden bg-black/40",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`radial-gradient(circle at center, ${i.color}, transparent)`}}),e.jsx("div",{className:"text-3xl md:text-4xl font-black font-orbitron mb-1 tracking-tighter",style:{color:i.color},children:s.id}),e.jsxs("div",{className:"text-xs font-mono text-white/50 mb-6 tracking-widest uppercase flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),"SYSTEM: ",e.jsx("span",{className:"text-emerald-400",children:"ONLINE"})]}),e.jsxs("div",{className:"aspect-square w-full rounded-xl border border-white/10 bg-black/50 relative overflow-hidden mb-6 group",children:[r.media&&r.media.length>0?e.jsx("img",{src:r.media[0],alt:s.name,className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity duration-700 scale-110 group-hover:scale-100"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white/20 font-mono text-[10px] text-center p-4",children:"SCANNING UNIT..."}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-60"}),e.jsxs("div",{className:"absolute bottom-3 left-3 text-[9px] font-mono text-white/40",children:["SEC_PREVIEW_0",s.id.slice(-1)]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("h4",{className:"text-[10px] font-bold font-mono text-white/30 uppercase tracking-[0.2em] mb-3 border-b border-white/5 pb-1",children:"LIVE TELEMETRY"}),s.id==="LAB-01"&&e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"DISTORTION"}),e.jsx("span",{className:"text-cyan-400",children:x.distort.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"COLOR_MODE"}),e.jsx("span",{className:"text-cyan-400",children:x.color.toUpperCase()})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"FLOW_SPEED"}),e.jsx("span",{className:"text-cyan-400",children:x.speed.toFixed(1)})]})]}),s.id==="LAB-02"&&e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"GRAVITY"}),e.jsx("span",{className:"text-emerald-400",children:m.zeroG?"ZERO_G":"NORMAL"})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"ENV_VECTOR"}),e.jsxs("span",{className:"text-emerald-400",children:["[",m.gravity.join(", "),"]"]})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"SIM_ENGINE"}),e.jsx("span",{className:"text-emerald-400",children:"ENABLED"})]})]}),s.id==="LAB-03"&&e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"REACTIVE"}),e.jsx("span",{className:"text-yellow-400",children:d.mode==="mic"?"MIC_INPUT":"DEMO_OSC"})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"FREQUENCY"}),e.jsx("span",{className:"text-yellow-400",children:"SYNCED"})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"VIZ_MODULE"}),e.jsx("span",{className:"text-yellow-400",children:"FFT_3D"})]})]}),s.id==="LAB-04"&&e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"INTEGRITY"}),e.jsx("span",{className:"text-red-400",children:"STABLE"})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"DB_CONNECTION"}),e.jsx("span",{className:"text-red-400",children:"FIREBASE"})]}),e.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[e.jsx("span",{className:"text-white/40",children:"GLITCH_SCAN"}),e.jsx("span",{className:"text-red-400",children:"READY"})]})]})]}),e.jsxs("div",{className:"mt-auto grid grid-cols-2 gap-2 text-[10px] font-mono",children:[e.jsxs("div",{className:"p-2 border border-white/5 rounded bg-white/5",children:[e.jsx("div",{className:"text-white/20 mb-1",children:"TECH"}),e.jsx("div",{className:"text-white/80 font-bold",children:s.tech})]}),e.jsxs("div",{className:"p-2 border border-white/5 rounded bg-white/5",children:[e.jsx("div",{className:"text-white/20 mb-1",children:"TYPE"}),e.jsx("div",{className:"text-white/80 font-bold",children:s.type.split(" ")[0]})]})]})]}),e.jsxs("div",{className:"flex-1 p-6 md:p-8 flex flex-col relative z-10 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold font-orbitron text-white mb-1 tracking-tight",children:s.name}),e.jsx("h3",{className:"text-sm md:text-base text-white/50 font-rajdhani italic",children:s.description})]}),e.jsx("button",{onClick:()=>{c(),o()},onMouseEnter:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/30 hover:text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"text-sm text-white/70 leading-relaxed font-sans",children:e.jsx("p",{className:"border-l-2 border-white/20 pl-4 py-1",children:r.longDescription})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[11px] font-bold font-mono text-white/40 mb-4 uppercase tracking-[0.2em] flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{background:i.color}}),"Active Missions (임무)"]}),e.jsx(M,{sectorId:s.id,color:i.color})]}),r.features&&r.features.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[11px] font-bold font-mono text-white/40 mb-4 uppercase tracking-[0.2em] flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{background:i.color}}),"Active Modules (핵심 기능)"]}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:r.features.map((t,f)=>e.jsxs("li",{className:"flex items-center text-[11px] text-white/70 bg-white/5 px-3 py-2.5 rounded border border-white/5 hover:bg-white/10 transition-colors cursor-default",children:[e.jsx("span",{className:"w-1 h-1 bg-white/30 rounded-full mr-3"}),t]},f))})]}),r.techStack&&r.techStack.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[11px] font-bold font-mono text-white/40 mb-3 uppercase tracking-[0.2em] flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{background:i.color}}),"Tech Schematics (기술 스택)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.techStack.map((t,f)=>e.jsx("span",{className:"px-2 py-1 text-[10px] font-mono rounded bg-white/5 border border-white/10 text-white/60 hover:text-white hover:border-white/20 transition-all",children:t},f))})]})]}),e.jsxs("div",{className:"mt-12 flex items-center justify-end gap-3 border-t border-white/10 pt-6",children:[e.jsx("button",{onClick:o,onMouseEnter:n,className:"px-5 py-2.5 rounded text-[11px] font-bold text-white/40 hover:text-white transition-colors uppercase font-mono tracking-widest",children:"CLOSE"}),e.jsxs("button",{onClick:N,onMouseEnter:n,className:"px-8 py-2.5 rounded text-[11px] font-bold tracking-[0.3em] uppercase font-mono flex items-center gap-2 transition-all hover:scale-105 active:scale-95",style:{background:i.color,color:"#000",boxShadow:`0 0 30px ${i.color}40`},children:[e.jsx("span",{children:"ENTER SECTOR"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]})]},"mission-modal-content")},"mission-modal-backdrop")})};export{R as default};
